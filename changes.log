2025-05-12: Added product document upload and management to admin product Source tab. Implemented API endpoints for upload, listing, and deletion of ProductDocuments. Updated UI to support document upload, display, and removal. 

[2024-05-13] Added GET handler to src/app/api/products/[slug]/route.ts to resolve 405 error and allow fetching product details by slug. 

[2024-05-13] Fixed admin product edit page: updated GET handler in src/app/api/products/[slug]/route.ts to wrap product in a 'product' property in the response. 

[2024-05-13] Improved PUT handler in src/app/api/products/[slug]/route.ts: added error handling/logging and optimized update logic to only update categories/images if provided, avoiding unnecessary deleteMany/create operations. 

[2024-05-13] Fixed bug in PUT handler for products: sanitized categoryIds to filter out null/invalid values before updating categories, preventing Prisma errors and failed updates. 

[2024-05-13] Fixed Next.js dynamic API route param usage and optimized PUT handler to only update categories/images if changed, improving admin save performance. 

[2024-05-13] Added CORS headers and OPTIONS handler to categories and product API routes for cross-origin compatibility. 

[2024-05-13] Fixed dynamic API route handler signatures in products/[slug] to use correct Next.js convention, removing unnecessary await/context destructuring. 

[2024-05-13] Fixed admin product edit: sanitize payload before PUT, only sending valid fields (categoryIds, images, etc.) to backend for updates. 

[2024-05-13] Fixed category update in product PUT handler: now uses explicit deleteMany/createMany for ProductCategory join table, ensuring updates persist for many-to-many relations. 

[2024-05-13] Fixed showroom category filtering: updated filter logic in src/app/showroom/page.tsx to use cat.category.slug instead of cat.slug, matching the API response structure. 

[2024-05-13] Restored DnD image management UI to src/app/admin/products/[slug]/images/page.tsx from backup. The page now supports drag-and-drop reordering, alt text editing, image upload, and save functionality. 

[2024-05-13 15:00] Created scripts/seed_db.ts to clear and repopulate Category, Product, Image, and ProductCategory tables using categories.json, products.json, images.jsonl, and product_categories.json. Uses pg and lib/db.ts. This replaces all previous Prisma-based seeding. 

[2024-05-18  DELETE handler for product soft-delete] Added DELETE handler to src/app/api/products/[slug]/route.ts to support soft-deleting products by setting status to 'deleted'. 

[2024-05-18  await context.params fix] Updated all handlers in src/app/api/products/[slug]/route.ts to use 'const { params } = await context;' and 'const slug = params.slug;' as required by Next.js 15+ dynamic API routes. 

[2025-05-13 admin delete refactor] Refactored admin product edit page: delete button is now a prominent trash icon outside the form, ensuring it always sends DELETE and never triggers a PUT. 

[YYYY-MM-DD] Admin UI: Edit button is now a blue button, Delete is a trash icon button that sends a DELETE request to the API (not a PUT). Ensured delete is distinct and works as expected. UI and API behavior now match requirements. 

[YYYY-MM-DD] Admin product list: Edit button is now a small blue circle with a pen icon instead of text. 

[YYYY-MM-DD] Show Deleted checkbox now works: API supports ?showDeleted=1 to include deleted products; frontend refetches accordingly. 

[YYYY-MM-DD] Commented out Sign In and basket icon links in the header (layout.tsx), not deleted. 

[YYYY-MM-DD] Contact API now stores customers and messages in the new tables, linking messages to customers, and uses the correct schema fields. 

[YYYY-MM-DD] Updated /api/enquiry API to store pageUrl in the Message table, so product enquiries now include the page source with the message, matching the contact form. 

[YYYY-MM-DD] Product detail page: 'Enquire about this item' button now reveals and scrolls to the enquiry form below, instead of doing nothing. Improves UX and makes the form discoverable. 

[YYYY-MM-DD] Fix: Enquiry API now matches actual Message table schema (uses 'message', adds ipAddress/userAgent, removes productSlug). Resolves form submission error. 

[2024-05-13] Hardened product image update flow: backend now rejects updates that would remove all images, and frontend warns/prevents saving if no images are present. Both changes prevent accidental image loss. 

[2024-05-13] Improved admin product image upload: after uploading an image, the page now auto-saves the image order/state to the backend, making the flow foolproof and preventing accidental image loss or state mismatch. 

[2024-05-13] Added admin Database page: a fourth link on the admin dashboard now leads to a page that lists all tables and fields in the database, using a new /api/db endpoint. 

[YYYY-MM-DD] Added a 'View Live Page' link at the top of the admin product edit page (/admin/products/[slug]) linking to the public showroom page for that product.

[YYYY-MM-DD] On the live product page (/showroom/[slug]), added a small 'Edit <title>' link at the top right linking to the admin edit page for that product.

[YYYY-MM-DD] Changed the 'Edit' button in the main site header to read 'Admin' instead.

[YYYY-MM-DD] Updated admin product edit page: field labels for dimensions now read 'Dimensions (Wide/Deep/High): cm' and weight now reads 'Weight: kg'.

[YYYY-MM-DD] Admin product edit page: moved all fields except title, price, and description into a 'Details' accordion (renamed from 'Delivery Information').

[YYYY-MM-DD] Showroom product page: moved all product details (status, categories, dimensions, weight, condition, origin, period) into a 'Details' accordion, and removed the redundant Delivery Information accordion. Only title, price, and description are shown outside the accordion.

[YYYY-MM-DD] Reversed previous error: restored the admin product edit page to its original structure, with all fields in the main form and no accordion for details.

[YYYY-MM-DD] Showroom product page: removed Status and Categories from the Details accordion display.

[YYYY-MM-DD] Product condition refactor: Added Condition table (grade, rubric), removed old condition field from Product, added condition_id (FK) and condition_notes. Updated admin product edit page to use a grouped section for grade, rubric, and notes. Added /api/conditions endpoint.

[YYYY-MM-DD] Admin product edit: decoupled image management from product save. Product details can now be saved without affecting images. Removed image warning modal and related logic.

[YYYY-MM-DD] API fix: Updated product PUT handler to use condition_id and condition_notes instead of the old condition field, matching the new schema and frontend.

[YYYY-MM-DD] API update: GET /api/products/[slug] now joins Condition table and returns grade and rubric for the product's condition_id.

[YYYY-MM-DD] Showroom product page: displays condition grade, rubric, and notes (if present) in the Details accordion under a Condition sub-heading.

[YYYY-MM-DD] Added 'materials' field to Product model (Prisma schema), admin edit page, main product page (Details), API routes, and seed script.

[YYYY-MM-DD] Removed all Prisma usage from product API and scripts. All product database logic now uses direct SQL via pg. Added support for 'materials' field throughout.

[YYYY-MM-DD] Removed 'origin' field from Product table and UI. Added 'provenance' field to Product table, admin edit page, and main product page (Details section).

[2024-05-02] Updated showroom product details page to:
- Show 'Materials' and 'Provenance' fields in the Details accordion if they have content
- Remove 'Origin' field from Details

[2024-05-02] Footer updated:
- Removed email link under address, replaced with 'Contact Us' link
- Moved 'Contact' link from Legal, added 'Terms & Conditions' under Legal
- Created new /terms page with friendly, clear, legally compliant T&C content

[2024-05-15  showroom] Add: Product details page now features a category navigation bar with Previous/Next icons, showing the selected category (or All Products) and allowing navigation to previous/next product in the current category. Subtle styling, placed below the header and above the product title. Product order matches showroom sort logic.

[2024-05-15  showroom] Fix: Product details page now remembers and displays the active category as you click Previous/Next, using localStorage to persist the user's last selected category. Showroom page now saves category selection to localStorage. Navigation and label always match user's last intent.

[2024-05-15  showroom] Update: Related Products section replaced with 'More in this Category' at the foot of the product details page, showing up to six of the most recent products from the same category (excluding the current product), using the same panels as the showroom. Section is hidden if no other products are available.

[2024-05-15  newsletter] Fix: The static newsletter form in the footer is now replaced with the NewsletterSignupForm component, enabling correct submission, confirmation, and DB updates.

[2024-05-15  admin] Update: Admin customers page now shows a Messages column (count of messages per customer) and displays only the date (YYYY-MM-DD) for Joined and Updated columns.

[2024-05-15  contact] Update: Added name and phone columns to the Message table. Contact API now stores name and phone in Message as well as Customer, and only updates Customer fields if new values are non-empty. Preserves both historical and latest contact info.

[2024-05-15  admin] Update: Admin messages page now displays the name and phone recorded with each message (not just the current customer name), and shows the phone number if present. API updated to return these fields.

[2024-05-15  customer] Fix: Customer name and phone are now only set on first contact/newsletter form submission. Once set, they are never overwritten by subsequent forms. Ensures original contact info is preserved in Customer table.

[2024-05-15  nav] Update: Removed the Blog link from the main navigation header.

[YYYY-MM-DD] Fixed React warning: duplicate key in country code <select> in ContactForm. Now uses both code and name for unique keys.

[YYYY-MM-DD] UI: Added asterisks beside required fields (Name, Email, Message, Phone) in ContactForm to indicate they are mandatory.

[YYYY-MM-DD] UI: Made phone field optional in ContactForm (no longer required, asterisk removed from label).