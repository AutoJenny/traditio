/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/showroom/[slug]/page"],{

/***/ "(app-pages-browser)/./node_modules/next/dist/api/navigation.js":
/*!**************************************************!*\
  !*** ./node_modules/next/dist/api/navigation.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _client_components_navigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../client/components/navigation */ \"(app-pages-browser)/./node_modules/next/dist/client/components/navigation.js\");\n/* harmony import */ var _client_components_navigation__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_client_components_navigation__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _client_components_navigation__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _client_components_navigation__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n//# sourceMappingURL=navigation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYXBpL25hdmlnYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEOztBQUVoRCIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2tmaWRkZXMvQ29kZS9wcm9qZWN0cy90cmFkaXRpby90cmFkaXRpby1uZXh0LXNpdGUvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9hcGkvbmF2aWdhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9jbGllbnQvY29tcG9uZW50cy9uYXZpZ2F0aW9uJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmF2aWdhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/api/navigation.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fnickfiddes%2FCode%2Fprojects%2Ftraditio%2Ftraditio-next-site%2Fsrc%2Fapp%2Fshowroom%2F%5Bslug%5D%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fnickfiddes%2FCode%2Fprojects%2Ftraditio%2Ftraditio-next-site%2Fsrc%2Fapp%2Fshowroom%2F%5Bslug%5D%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/showroom/[slug]/page.tsx */ \"(app-pages-browser)/./src/app/showroom/[slug]/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZuaWNrZmlkZGVzJTJGQ29kZSUyRnByb2plY3RzJTJGdHJhZGl0aW8lMkZ0cmFkaXRpby1uZXh0LXNpdGUlMkZzcmMlMkZhcHAlMkZzaG93cm9vbSUyRiU1QnNsdWclNUQlMkZwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9ZmFsc2UhIiwibWFwcGluZ3MiOiJBQUFBLDhMQUFpSSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL25pY2tmaWRkZXMvQ29kZS9wcm9qZWN0cy90cmFkaXRpby90cmFkaXRpby1uZXh0LXNpdGUvc3JjL2FwcC9zaG93cm9vbS9bc2x1Z10vcGFnZS50c3hcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fnickfiddes%2FCode%2Fprojects%2Ftraditio%2Ftraditio-next-site%2Fsrc%2Fapp%2Fshowroom%2F%5Bslug%5D%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n true &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return (type.displayName || \"Context\") + \".Provider\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(\n      type,\n      key,\n      self,\n      source,\n      owner,\n      props,\n      debugStack,\n      debugTask\n    ) {\n      self = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== self ? self : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        self,\n        source,\n        getOwner(),\n        maybeKey,\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n    Symbol.for(\"react.provider\");\n    var REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      \"react-stack-bottom-frame\": function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React[\"react-stack-bottom-frame\"].bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self\n    ) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        source,\n        self,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixLQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCLGdEQUFnRDtBQUNoRSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0EsZ0NBQWdDLGtDQUFrQyxPQUFPO0FBQ3pFO0FBQ0EsZ0dBQWdHLFNBQVMsVUFBVSxzRkFBc0YsYUFBYSxVQUFVLFVBQVU7QUFDMU87QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUJBQU8sQ0FBQyxzR0FBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdCQUFnQjtBQUNwQixJQUFJLGNBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvbmlja2ZpZGRlcy9Db2RlL3Byb2plY3RzL3RyYWRpdGlvL3RyYWRpdGlvLW5leHQtc2l0ZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0L2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKSB7XG4gICAgICBpZiAobnVsbCA9PSB0eXBlKSByZXR1cm4gbnVsbDtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0eXBlKVxuICAgICAgICByZXR1cm4gdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgbnVsbDtcbiAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdHlwZSkgcmV0dXJuIHR5cGU7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIkZyYWdtZW50XCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJQcm9maWxlclwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3RyaWN0TW9kZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VMaXN0XCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfQUNUSVZJVFlfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJBY3Rpdml0eVwiO1xuICAgICAgfVxuICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlKVxuICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgIChcIm51bWJlclwiID09PSB0eXBlb2YgdHlwZS50YWcgJiZcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwiUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS5cIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB0eXBlLiQkdHlwZW9mKVxuICAgICAgICApIHtcbiAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuIFwiUG9ydGFsXCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCIpICsgXCIuUHJvdmlkZXJcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlNVTUVSX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuX2NvbnRleHQuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCIpICsgXCIuQ29uc3VtZXJcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgICAgICB2YXIgaW5uZXJUeXBlID0gdHlwZS5yZW5kZXI7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHR5cGUgfHxcbiAgICAgICAgICAgICAgKCh0eXBlID0gaW5uZXJUeXBlLmRpc3BsYXlOYW1lIHx8IGlubmVyVHlwZS5uYW1lIHx8IFwiXCIpLFxuICAgICAgICAgICAgICAodHlwZSA9IFwiXCIgIT09IHR5cGUgPyBcIkZvcndhcmRSZWYoXCIgKyB0eXBlICsgXCIpXCIgOiBcIkZvcndhcmRSZWZcIikpO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAoaW5uZXJUeXBlID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsKSxcbiAgICAgICAgICAgICAgbnVsbCAhPT0gaW5uZXJUeXBlXG4gICAgICAgICAgICAgICAgPyBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA6IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8IFwiTWVtb1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgaW5uZXJUeXBlID0gdHlwZS5fcGF5bG9hZDtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLl9pbml0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKGlubmVyVHlwZSkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge31cbiAgICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tLZXlTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMDtcbiAgICAgIH1cbiAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIHtcbiAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMCA9XG4gICAgICAgICAgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFN5bWJvbCAmJlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnICYmXG4gICAgICAgICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddKSB8fFxuICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHxcbiAgICAgICAgICBcIk9iamVjdFwiO1xuICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbChcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQsXG4gICAgICAgICAgXCJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiBcIjw+XCI7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlICYmXG4gICAgICAgIG51bGwgIT09IHR5cGUgJiZcbiAgICAgICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFXG4gICAgICApXG4gICAgICAgIHJldHVybiBcIjwuLi4+XCI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyBcIjxcIiArIG5hbWUgKyBcIj5cIiA6IFwiPC4uLj5cIjtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZGlzcGF0Y2hlciA/IG51bGwgOiBkaXNwYXRjaGVyLmdldE93bmVyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFVua25vd25Pd25lcigpIHtcbiAgICAgIHJldHVybiBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzVmFsaWRLZXkoY29uZmlnKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIFwia2V5XCIpKSB7XG4gICAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgXCJrZXlcIikuZ2V0O1xuICAgICAgICBpZiAoZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZykgcmV0dXJuICExO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7XG4gICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duIHx8XG4gICAgICAgICAgKChzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9ICEwKSxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCIlczogYGtleWAgaXMgbm90IGEgcHJvcC4gVHJ5aW5nIHRvIGFjY2VzcyBpdCB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lIHZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgcHJvcC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvc3BlY2lhbC1wcm9wcylcIixcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lXG4gICAgICAgICAgKSk7XG4gICAgICB9XG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSAhMDtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgXCJrZXlcIiwge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ0tleSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nKCkge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTtcbiAgICAgIGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gfHxcbiAgICAgICAgKChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gITApLFxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQWNjZXNzaW5nIGVsZW1lbnQucmVmIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiByZWYgaXMgbm93IGEgcmVndWxhciBwcm9wLiBJdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgSlNYIEVsZW1lbnQgdHlwZSBpbiBhIGZ1dHVyZSByZWxlYXNlLlwiXG4gICAgICAgICkpO1xuICAgICAgY29tcG9uZW50TmFtZSA9IHRoaXMucHJvcHMucmVmO1xuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29tcG9uZW50TmFtZSA/IGNvbXBvbmVudE5hbWUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWFjdEVsZW1lbnQoXG4gICAgICB0eXBlLFxuICAgICAga2V5LFxuICAgICAgc2VsZixcbiAgICAgIHNvdXJjZSxcbiAgICAgIG93bmVyLFxuICAgICAgcHJvcHMsXG4gICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgZGVidWdUYXNrXG4gICAgKSB7XG4gICAgICBzZWxmID0gcHJvcHMucmVmO1xuICAgICAgdHlwZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgX293bmVyOiBvd25lclxuICAgICAgfTtcbiAgICAgIG51bGwgIT09ICh2b2lkIDAgIT09IHNlbGYgPyBzZWxmIDogbnVsbClcbiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJyZWZcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgICAgICBnZXQ6IGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJyZWZcIiwgeyBlbnVtZXJhYmxlOiAhMSwgdmFsdWU6IG51bGwgfSk7XG4gICAgICB0eXBlLl9zdG9yZSA9IHt9O1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUuX3N0b3JlLCBcInZhbGlkYXRlZFwiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiAwXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z0luZm9cIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdTdGFja1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1N0YWNrXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1Rhc2tcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogZGVidWdUYXNrXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5mcmVlemUgJiYgKE9iamVjdC5mcmVlemUodHlwZS5wcm9wcyksIE9iamVjdC5mcmVlemUodHlwZSkpO1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGpzeERFVkltcGwoXG4gICAgICB0eXBlLFxuICAgICAgY29uZmlnLFxuICAgICAgbWF5YmVLZXksXG4gICAgICBpc1N0YXRpY0NoaWxkcmVuLFxuICAgICAgc291cmNlLFxuICAgICAgc2VsZixcbiAgICAgIGRlYnVnU3RhY2ssXG4gICAgICBkZWJ1Z1Rhc2tcbiAgICApIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IGNvbmZpZy5jaGlsZHJlbjtcbiAgICAgIGlmICh2b2lkIDAgIT09IGNoaWxkcmVuKVxuICAgICAgICBpZiAoaXNTdGF0aWNDaGlsZHJlbilcbiAgICAgICAgICBpZiAoaXNBcnJheUltcGwoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICBpc1N0YXRpY0NoaWxkcmVuID0gMDtcbiAgICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA8IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbisrXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGNoaWxkcmVuW2lzU3RhdGljQ2hpbGRyZW5dKTtcbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUgJiYgT2JqZWN0LmZyZWV6ZShjaGlsZHJlbik7XG4gICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIlJlYWN0LmpzeDogU3RhdGljIGNoaWxkcmVuIHNob3VsZCBhbHdheXMgYmUgYW4gYXJyYXkuIFlvdSBhcmUgbGlrZWx5IGV4cGxpY2l0bHkgY2FsbGluZyBSZWFjdC5qc3hzIG9yIFJlYWN0LmpzeERFVi4gVXNlIHRoZSBCYWJlbCB0cmFuc2Zvcm0gaW5zdGVhZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgZWxzZSB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbik7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIFwia2V5XCIpKSB7XG4gICAgICAgIGNoaWxkcmVuID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZykuZmlsdGVyKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgcmV0dXJuIFwia2V5XCIgIT09IGs7XG4gICAgICAgIH0pO1xuICAgICAgICBpc1N0YXRpY0NoaWxkcmVuID1cbiAgICAgICAgICAwIDwga2V5cy5sZW5ndGhcbiAgICAgICAgICAgID8gXCJ7a2V5OiBzb21lS2V5LCBcIiArIGtleXMuam9pbihcIjogLi4uLCBcIikgKyBcIjogLi4ufVwiXG4gICAgICAgICAgICA6IFwie2tleTogc29tZUtleX1cIjtcbiAgICAgICAgZGlkV2FybkFib3V0S2V5U3ByZWFkW2NoaWxkcmVuICsgaXNTdGF0aWNDaGlsZHJlbl0gfHxcbiAgICAgICAgICAoKGtleXMgPVxuICAgICAgICAgICAgMCA8IGtleXMubGVuZ3RoID8gXCJ7XCIgKyBrZXlzLmpvaW4oXCI6IC4uLiwgXCIpICsgXCI6IC4uLn1cIiA6IFwie31cIiksXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICdBIHByb3BzIG9iamVjdCBjb250YWluaW5nIGEgXCJrZXlcIiBwcm9wIGlzIGJlaW5nIHNwcmVhZCBpbnRvIEpTWDpcXG4gIGxldCBwcm9wcyA9ICVzO1xcbiAgPCVzIHsuLi5wcm9wc30gLz5cXG5SZWFjdCBrZXlzIG11c3QgYmUgcGFzc2VkIGRpcmVjdGx5IHRvIEpTWCB3aXRob3V0IHVzaW5nIHNwcmVhZDpcXG4gIGxldCBwcm9wcyA9ICVzO1xcbiAgPCVzIGtleT17c29tZUtleX0gey4uLnByb3BzfSAvPicsXG4gICAgICAgICAgICBpc1N0YXRpY0NoaWxkcmVuLFxuICAgICAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgICAgICBrZXlzLFxuICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICApLFxuICAgICAgICAgIChkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY2hpbGRyZW4gKyBpc1N0YXRpY0NoaWxkcmVuXSA9ICEwKSk7XG4gICAgICB9XG4gICAgICBjaGlsZHJlbiA9IG51bGw7XG4gICAgICB2b2lkIDAgIT09IG1heWJlS2V5ICYmXG4gICAgICAgIChjaGVja0tleVN0cmluZ0NvZXJjaW9uKG1heWJlS2V5KSwgKGNoaWxkcmVuID0gXCJcIiArIG1heWJlS2V5KSk7XG4gICAgICBoYXNWYWxpZEtleShjb25maWcpICYmXG4gICAgICAgIChjaGVja0tleVN0cmluZ0NvZXJjaW9uKGNvbmZpZy5rZXkpLCAoY2hpbGRyZW4gPSBcIlwiICsgY29uZmlnLmtleSkpO1xuICAgICAgaWYgKFwia2V5XCIgaW4gY29uZmlnKSB7XG4gICAgICAgIG1heWJlS2V5ID0ge307XG4gICAgICAgIGZvciAodmFyIHByb3BOYW1lIGluIGNvbmZpZylcbiAgICAgICAgICBcImtleVwiICE9PSBwcm9wTmFtZSAmJiAobWF5YmVLZXlbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXSk7XG4gICAgICB9IGVsc2UgbWF5YmVLZXkgPSBjb25maWc7XG4gICAgICBjaGlsZHJlbiAmJlxuICAgICAgICBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihcbiAgICAgICAgICBtYXliZUtleSxcbiAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0eXBlXG4gICAgICAgICAgICA/IHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICA6IHR5cGVcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiBSZWFjdEVsZW1lbnQoXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGNoaWxkcmVuLFxuICAgICAgICBzZWxmLFxuICAgICAgICBzb3VyY2UsXG4gICAgICAgIGdldE93bmVyKCksXG4gICAgICAgIG1heWJlS2V5LFxuICAgICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgICBkZWJ1Z1Rhc2tcbiAgICAgICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ2hpbGRLZXlzKG5vZGUpIHtcbiAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiBub2RlICYmXG4gICAgICAgIG51bGwgIT09IG5vZGUgJiZcbiAgICAgICAgbm9kZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFICYmXG4gICAgICAgIG5vZGUuX3N0b3JlICYmXG4gICAgICAgIChub2RlLl9zdG9yZS52YWxpZGF0ZWQgPSAxKTtcbiAgICB9XG4gICAgdmFyIFJlYWN0ID0gcmVxdWlyZShcIm5leHQvZGlzdC9jb21waWxlZC9yZWFjdFwiKSxcbiAgICAgIFJFQUNUX0VMRU1FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC50cmFuc2l0aW9uYWwuZWxlbWVudFwiKSxcbiAgICAgIFJFQUNUX1BPUlRBTF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnBvcnRhbFwiKSxcbiAgICAgIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZnJhZ21lbnRcIiksXG4gICAgICBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN0cmljdF9tb2RlXCIpLFxuICAgICAgUkVBQ1RfUFJPRklMRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5wcm9maWxlclwiKTtcbiAgICBTeW1ib2wuZm9yKFwicmVhY3QucHJvdmlkZXJcIik7XG4gICAgdmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29uc3VtZXJcIiksXG4gICAgICBSRUFDVF9DT05URVhUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29udGV4dFwiKSxcbiAgICAgIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlXCIpLFxuICAgICAgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlX2xpc3RcIiksXG4gICAgICBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKSxcbiAgICAgIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5sYXp5XCIpLFxuICAgICAgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5hY3Rpdml0eVwiKSxcbiAgICAgIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKFwicmVhY3QuY2xpZW50LnJlZmVyZW5jZVwiKSxcbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzID1cbiAgICAgICAgUmVhY3QuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFLFxuICAgICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgaXNBcnJheUltcGwgPSBBcnJheS5pc0FycmF5LFxuICAgICAgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA/IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgUmVhY3QgPSB7XG4gICAgICBcInJlYWN0LXN0YWNrLWJvdHRvbS1mcmFtZVwiOiBmdW5jdGlvbiAoY2FsbFN0YWNrRm9yRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxTdGFja0ZvckVycm9yKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd247XG4gICAgdmFyIGRpZFdhcm5BYm91dEVsZW1lbnRSZWYgPSB7fTtcbiAgICB2YXIgdW5rbm93bk93bmVyRGVidWdTdGFjayA9IFJlYWN0W1wicmVhY3Qtc3RhY2stYm90dG9tLWZyYW1lXCJdLmJpbmQoXG4gICAgICBSZWFjdCxcbiAgICAgIFVua25vd25Pd25lclxuICAgICkoKTtcbiAgICB2YXIgdW5rbm93bk93bmVyRGVidWdUYXNrID0gY3JlYXRlVGFzayhnZXRUYXNrTmFtZShVbmtub3duT3duZXIpKTtcbiAgICB2YXIgZGlkV2FybkFib3V0S2V5U3ByZWFkID0ge307XG4gICAgZXhwb3J0cy5GcmFnbWVudCA9IFJFQUNUX0ZSQUdNRU5UX1RZUEU7XG4gICAgZXhwb3J0cy5qc3hERVYgPSBmdW5jdGlvbiAoXG4gICAgICB0eXBlLFxuICAgICAgY29uZmlnLFxuICAgICAgbWF5YmVLZXksXG4gICAgICBpc1N0YXRpY0NoaWxkcmVuLFxuICAgICAgc291cmNlLFxuICAgICAgc2VsZlxuICAgICkge1xuICAgICAgdmFyIHRyYWNrQWN0dWFsT3duZXIgPVxuICAgICAgICAxZTQgPiBSZWFjdFNoYXJlZEludGVybmFscy5yZWNlbnRseUNyZWF0ZWRPd25lclN0YWNrcysrO1xuICAgICAgcmV0dXJuIGpzeERFVkltcGwoXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgbWF5YmVLZXksXG4gICAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgc2VsZixcbiAgICAgICAgdHJhY2tBY3R1YWxPd25lclxuICAgICAgICAgID8gRXJyb3IoXCJyZWFjdC1zdGFjay10b3AtZnJhbWVcIilcbiAgICAgICAgICA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssXG4gICAgICAgIHRyYWNrQWN0dWFsT3duZXIgPyBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKHR5cGUpKSA6IHVua25vd25Pd25lckRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9O1xuICB9KSgpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrZmlkZGVzL0NvZGUvcHJvamVjdHMvdHJhZGl0aW8vdHJhZGl0aW8tbmV4dC1zaXRlL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUucHJvZHVjdGlvbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/react-zoom-pan-pinch/dist/index.esm.js":
/*!*************************************************************!*\
  !*** ./node_modules/react-zoom-pan-pinch/dist/index.esm.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context),\n/* harmony export */   KeepScale: () => (/* binding */ KeepScale),\n/* harmony export */   MiniMap: () => (/* binding */ MiniMap),\n/* harmony export */   TransformComponent: () => (/* binding */ TransformComponent),\n/* harmony export */   TransformWrapper: () => (/* binding */ TransformWrapper),\n/* harmony export */   getCenterPosition: () => (/* binding */ getCenterPosition),\n/* harmony export */   getMatrixTransformStyles: () => (/* binding */ getMatrixTransformStyles),\n/* harmony export */   getTransformStyles: () => (/* binding */ getTransformStyles),\n/* harmony export */   useControls: () => (/* binding */ useControls),\n/* harmony export */   useTransformComponent: () => (/* binding */ useTransformComponent),\n/* harmony export */   useTransformContext: () => (/* binding */ useTransformContext),\n/* harmony export */   useTransformEffect: () => (/* binding */ useTransformEffect),\n/* harmony export */   useTransformInit: () => (/* binding */ useTransformInit)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\n/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nvar roundNumber = function (num, decimal) {\n    return Number(num.toFixed(decimal));\n};\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nvar checkIsNumber = function (num, defaultValue) {\n    return typeof num === \"number\" ? num : defaultValue;\n};\n\nvar handleCallback = function (context, event, callback) {\n    if (callback && typeof callback === \"function\") {\n        callback(context, event);\n    }\n};\n\n/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\n/**\n * Functions should return denominator of the target value, which is the next animation step.\n * t is a value from 0 to 1, reflecting the percentage of animation status.\n */\nvar easeOut = function (t) {\n    return -Math.cos(t * Math.PI) / 2 + 0.5;\n};\n// linear\nvar linear = function (t) {\n    return t;\n};\n// accelerating from zero velocity\nvar easeInQuad = function (t) {\n    return t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuad = function (t) {\n    return t * (2 - t);\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuad = function (t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n// accelerating from zero velocity\nvar easeInCubic = function (t) {\n    return t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutCubic = function (t) {\n    return --t * t * t + 1;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutCubic = function (t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n};\n// accelerating from zero velocity\nvar easeInQuart = function (t) {\n    return t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuart = function (t) {\n    return 1 - --t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuart = function (t) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n};\n// accelerating from zero velocity\nvar easeInQuint = function (t) {\n    return t * t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuint = function (t) {\n    return 1 + --t * t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuint = function (t) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\nvar animations = {\n    easeOut: easeOut,\n    linear: linear,\n    easeInQuad: easeInQuad,\n    easeOutQuad: easeOutQuad,\n    easeInOutQuad: easeInOutQuad,\n    easeInCubic: easeInCubic,\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n};\n\n/* eslint-disable no-param-reassign */\nvar handleCancelAnimationFrame = function (animation) {\n    if (typeof animation === \"number\") {\n        cancelAnimationFrame(animation);\n    }\n};\nvar handleCancelAnimation = function (contextInstance) {\n    if (!contextInstance.mounted)\n        return;\n    handleCancelAnimationFrame(contextInstance.animation);\n    // Clear animation state\n    contextInstance.animate = false;\n    contextInstance.animation = null;\n    contextInstance.velocity = null;\n};\nfunction handleSetupAnimation(contextInstance, animationName, animationTime, callback) {\n    if (!contextInstance.mounted)\n        return;\n    var startTime = new Date().getTime();\n    var lastStep = 1;\n    // if another animation is active\n    handleCancelAnimation(contextInstance);\n    // new animation\n    contextInstance.animation = function () {\n        if (!contextInstance.mounted) {\n            return handleCancelAnimationFrame(contextInstance.animation);\n        }\n        var frameTime = new Date().getTime() - startTime;\n        var animationProgress = frameTime / animationTime;\n        var animationType = animations[animationName];\n        var step = animationType(animationProgress);\n        if (frameTime >= animationTime) {\n            callback(lastStep);\n            contextInstance.animation = null;\n        }\n        else if (contextInstance.animation) {\n            callback(step);\n            requestAnimationFrame(contextInstance.animation);\n        }\n    };\n    requestAnimationFrame(contextInstance.animation);\n}\nfunction isValidTargetState(targetState) {\n    var scale = targetState.scale, positionX = targetState.positionX, positionY = targetState.positionY;\n    if (Number.isNaN(scale) ||\n        Number.isNaN(positionX) ||\n        Number.isNaN(positionY)) {\n        return false;\n    }\n    return true;\n}\nfunction animate(contextInstance, targetState, animationTime, animationName) {\n    var isValid = isValidTargetState(targetState);\n    if (!contextInstance.mounted || !isValid)\n        return;\n    var setTransformState = contextInstance.setTransformState;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    var scaleDiff = targetState.scale - scale;\n    var positionXDiff = targetState.positionX - positionX;\n    var positionYDiff = targetState.positionY - positionY;\n    if (animationTime === 0) {\n        setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n    }\n    else {\n        // animation start timestamp\n        handleSetupAnimation(contextInstance, animationName, animationTime, function (step) {\n            var newScale = scale + scaleDiff * step;\n            var newPositionX = positionX + positionXDiff * step;\n            var newPositionY = positionY + positionYDiff * step;\n            setTransformState(newScale, newPositionX, newPositionY);\n        });\n    }\n}\n\n/* eslint-disable no-param-reassign */\nfunction getComponentsSizes(wrapperComponent, contentComponent, newScale) {\n    var wrapperWidth = wrapperComponent.offsetWidth;\n    var wrapperHeight = wrapperComponent.offsetHeight;\n    var contentWidth = contentComponent.offsetWidth;\n    var contentHeight = contentComponent.offsetHeight;\n    var newContentWidth = contentWidth * newScale;\n    var newContentHeight = contentHeight * newScale;\n    var newDiffWidth = wrapperWidth - newContentWidth;\n    var newDiffHeight = wrapperHeight - newContentHeight;\n    return {\n        wrapperWidth: wrapperWidth,\n        wrapperHeight: wrapperHeight,\n        newContentWidth: newContentWidth,\n        newDiffWidth: newDiffWidth,\n        newContentHeight: newContentHeight,\n        newDiffHeight: newDiffHeight,\n    };\n}\nvar getBounds = function (wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, centerZoomedOut) {\n    var scaleWidthFactor = wrapperWidth > newContentWidth\n        ? diffWidth * (centerZoomedOut ? 1 : 0.5)\n        : 0;\n    var scaleHeightFactor = wrapperHeight > newContentHeight\n        ? diffHeight * (centerZoomedOut ? 1 : 0.5)\n        : 0;\n    var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n    var maxPositionX = scaleWidthFactor;\n    var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n    var maxPositionY = scaleHeightFactor;\n    return { minPositionX: minPositionX, maxPositionX: maxPositionX, minPositionY: minPositionY, maxPositionY: maxPositionY };\n};\nvar calculateBounds = function (contextInstance, newScale) {\n    var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n    var centerZoomedOut = contextInstance.setup.centerZoomedOut;\n    if (!wrapperComponent || !contentComponent) {\n        throw new Error(\"Components are not mounted\");\n    }\n    var _a = getComponentsSizes(wrapperComponent, contentComponent, newScale), wrapperWidth = _a.wrapperWidth, wrapperHeight = _a.wrapperHeight, newContentWidth = _a.newContentWidth, newDiffWidth = _a.newDiffWidth, newContentHeight = _a.newContentHeight, newDiffHeight = _a.newDiffHeight;\n    var bounds = getBounds(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, Boolean(centerZoomedOut));\n    return bounds;\n};\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nvar boundLimiter = function (value, minBound, maxBound, isActive) {\n    if (!isActive)\n        return roundNumber(value, 2);\n    if (value < minBound)\n        return roundNumber(minBound, 2);\n    if (value > maxBound)\n        return roundNumber(maxBound, 2);\n    return roundNumber(value, 2);\n};\nvar handleCalculateBounds = function (contextInstance, newScale) {\n    var bounds = calculateBounds(contextInstance, newScale);\n    // Save bounds\n    contextInstance.bounds = bounds;\n    return bounds;\n};\nfunction getMouseBoundedPosition(positionX, positionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent) {\n    var minPositionX = bounds.minPositionX, minPositionY = bounds.minPositionY, maxPositionX = bounds.maxPositionX, maxPositionY = bounds.maxPositionY;\n    var paddingX = 0;\n    var paddingY = 0;\n    if (wrapperComponent) {\n        paddingX = paddingValueX;\n        paddingY = paddingValueY;\n    }\n    var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\n    var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\n    return { x: x, y: y };\n}\n\nfunction handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds) {\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    var scaleDifference = newScale - scale;\n    if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\") {\n        console.error(\"Mouse X and Y position were not provided!\");\n        return { x: positionX, y: positionY };\n    }\n    var calculatedPositionX = positionX - mouseX * scaleDifference;\n    var calculatedPositionY = positionY - mouseY * scaleDifference;\n    // do not limit to bounds when there is padding animation,\n    // it causes animation strange behaviour\n    var newPositions = getMouseBoundedPosition(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, 0, null);\n    return newPositions;\n}\nfunction checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\n    var scalePadding = enablePadding ? zoomPadding : 0;\n    var minScaleWithPadding = minScale - scalePadding;\n    if (!Number.isNaN(maxScale) && zoom >= maxScale)\n        return maxScale;\n    if (!Number.isNaN(minScale) && zoom <= minScaleWithPadding)\n        return minScaleWithPadding;\n    return zoom;\n}\n\nvar isPanningStartAllowed = function (contextInstance, event) {\n    var excluded = contextInstance.setup.panning.excluded;\n    var isInitialized = contextInstance.isInitialized, wrapperComponent = contextInstance.wrapperComponent;\n    var target = event.target;\n    var targetIsShadowDom = \"shadowRoot\" in target && \"composedPath\" in event;\n    var isWrapperChild = targetIsShadowDom\n        ? event.composedPath().some(function (el) {\n            if (!(el instanceof Element)) {\n                return false;\n            }\n            return wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(el);\n        })\n        : wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n    var isAllowed = isInitialized && target && isWrapperChild;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nvar isPanningAllowed = function (contextInstance) {\n    var isInitialized = contextInstance.isInitialized, isPanning = contextInstance.isPanning, setup = contextInstance.setup;\n    var disabled = setup.panning.disabled;\n    var isAllowed = isInitialized && isPanning && !disabled;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nvar handlePanningSetup = function (contextInstance, event) {\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY;\n    contextInstance.isPanning = true;\n    // Panning with mouse\n    var x = event.clientX;\n    var y = event.clientY;\n    contextInstance.startCoords = { x: x - positionX, y: y - positionY };\n};\nvar handleTouchPanningSetup = function (contextInstance, event) {\n    var touches = event.touches;\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY;\n    contextInstance.isPanning = true;\n    // Panning with touch\n    var oneFingerTouch = touches.length === 1;\n    if (oneFingerTouch) {\n        var x = touches[0].clientX;\n        var y = touches[0].clientY;\n        contextInstance.startCoords = { x: x - positionX, y: y - positionY };\n    }\n};\nfunction handlePanToBounds(contextInstance) {\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale;\n    var _b = contextInstance.setup, disabled = _b.disabled, limitToBounds = _b.limitToBounds, centerZoomedOut = _b.centerZoomedOut;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    if (disabled || !wrapperComponent || !contextInstance.bounds)\n        return;\n    var _c = contextInstance.bounds, maxPositionX = _c.maxPositionX, minPositionX = _c.minPositionX, maxPositionY = _c.maxPositionY, minPositionY = _c.minPositionY;\n    var xChanged = positionX > maxPositionX || positionX < minPositionX;\n    var yChanged = positionY > maxPositionY || positionY < minPositionY;\n    var mousePosX = positionX > maxPositionX\n        ? wrapperComponent.offsetWidth\n        : contextInstance.setup.minPositionX || 0;\n    var mousePosY = positionY > maxPositionY\n        ? wrapperComponent.offsetHeight\n        : contextInstance.setup.minPositionY || 0;\n    var _d = handleCalculateZoomPositions(contextInstance, mousePosX, mousePosY, scale, contextInstance.bounds, limitToBounds || centerZoomedOut), x = _d.x, y = _d.y;\n    return {\n        scale: scale,\n        positionX: xChanged ? x : positionX,\n        positionY: yChanged ? y : positionY,\n    };\n}\nfunction handleNewPosition(contextInstance, newPositionX, newPositionY, paddingValueX, paddingValueY) {\n    var limitToBounds = contextInstance.setup.limitToBounds;\n    var wrapperComponent = contextInstance.wrapperComponent, bounds = contextInstance.bounds;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (wrapperComponent === null ||\n        bounds === null ||\n        (newPositionX === positionX && newPositionY === positionY)) {\n        return;\n    }\n    var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent), x = _b.x, y = _b.y;\n    contextInstance.setTransformState(scale, x, y);\n}\nvar getPanningClientPosition = function (contextInstance, clientX, clientY) {\n    var startCoords = contextInstance.startCoords, transformState = contextInstance.transformState;\n    var panning = contextInstance.setup.panning;\n    var lockAxisX = panning.lockAxisX, lockAxisY = panning.lockAxisY;\n    var positionX = transformState.positionX, positionY = transformState.positionY;\n    if (!startCoords) {\n        return { x: positionX, y: positionY };\n    }\n    var mouseX = clientX - startCoords.x;\n    var mouseY = clientY - startCoords.y;\n    var newPositionX = lockAxisX ? positionX : mouseX;\n    var newPositionY = lockAxisY ? positionY : mouseY;\n    return { x: newPositionX, y: newPositionY };\n};\nvar getPaddingValue = function (contextInstance, size) {\n    var setup = contextInstance.setup, transformState = contextInstance.transformState;\n    var scale = transformState.scale;\n    var minScale = setup.minScale, disablePadding = setup.disablePadding;\n    if (size > 0 && scale >= minScale && !disablePadding) {\n        return size;\n    }\n    return 0;\n};\n\nvar isVelocityCalculationAllowed = function (contextInstance) {\n    var mounted = contextInstance.mounted;\n    var _a = contextInstance.setup, disabled = _a.disabled, velocityAnimation = _a.velocityAnimation;\n    var scale = contextInstance.transformState.scale;\n    var disabledVelocity = velocityAnimation.disabled;\n    var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nvar isVelocityAllowed = function (contextInstance) {\n    var mounted = contextInstance.mounted, velocity = contextInstance.velocity, bounds = contextInstance.bounds;\n    var _a = contextInstance.setup, disabled = _a.disabled, velocityAnimation = _a.velocityAnimation;\n    var scale = contextInstance.transformState.scale;\n    var disabledVelocity = velocityAnimation.disabled;\n    var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n    if (!isAllowed)\n        return false;\n    if (!velocity || !bounds)\n        return false;\n    return true;\n};\nfunction getVelocityMoveTime(contextInstance, velocity) {\n    var velocityAnimation = contextInstance.setup.velocityAnimation;\n    var equalToMove = velocityAnimation.equalToMove, animationTime = velocityAnimation.animationTime, sensitivity = velocityAnimation.sensitivity;\n    if (equalToMove) {\n        return animationTime * velocity * sensitivity;\n    }\n    return animationTime;\n}\nfunction getVelocityPosition(newPosition, startPosition, currentPosition, isLocked, limitToBounds, minPosition, maxPosition, minTarget, maxTarget, step) {\n    if (limitToBounds) {\n        if (startPosition > maxPosition && currentPosition > maxPosition) {\n            var calculatedPosition = maxPosition + (newPosition - maxPosition) * step;\n            if (calculatedPosition > maxTarget)\n                return maxTarget;\n            if (calculatedPosition < maxPosition)\n                return maxPosition;\n            return calculatedPosition;\n        }\n        if (startPosition < minPosition && currentPosition < minPosition) {\n            var calculatedPosition = minPosition + (newPosition - minPosition) * step;\n            if (calculatedPosition < minTarget)\n                return minTarget;\n            if (calculatedPosition > minPosition)\n                return minPosition;\n            return calculatedPosition;\n        }\n    }\n    if (isLocked)\n        return startPosition;\n    return boundLimiter(newPosition, minPosition, maxPosition, limitToBounds);\n}\n\nfunction getSizeMultiplier(wrapperComponent, equalToMove) {\n    var defaultMultiplier = 1;\n    if (equalToMove) {\n        return Math.min(defaultMultiplier, wrapperComponent.offsetWidth / window.innerWidth);\n    }\n    return defaultMultiplier;\n}\nfunction handleCalculateVelocity(contextInstance, position) {\n    var isAllowed = isVelocityCalculationAllowed(contextInstance);\n    if (!isAllowed) {\n        return;\n    }\n    var lastMousePosition = contextInstance.lastMousePosition, velocityTime = contextInstance.velocityTime, setup = contextInstance.setup;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var equalToMove = setup.velocityAnimation.equalToMove;\n    var now = Date.now();\n    if (lastMousePosition && velocityTime && wrapperComponent) {\n        var sizeMultiplier = getSizeMultiplier(wrapperComponent, equalToMove);\n        var distanceX = position.x - lastMousePosition.x;\n        var distanceY = position.y - lastMousePosition.y;\n        var velocityX = distanceX / sizeMultiplier;\n        var velocityY = distanceY / sizeMultiplier;\n        var interval = now - velocityTime;\n        var speed = distanceX * distanceX + distanceY * distanceY;\n        var velocity = Math.sqrt(speed) / interval;\n        contextInstance.velocity = { velocityX: velocityX, velocityY: velocityY, total: velocity };\n    }\n    contextInstance.lastMousePosition = position;\n    contextInstance.velocityTime = now;\n}\nfunction handleVelocityPanning(contextInstance) {\n    var velocity = contextInstance.velocity, bounds = contextInstance.bounds, setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var isAllowed = isVelocityAllowed(contextInstance);\n    if (!isAllowed || !velocity || !bounds || !wrapperComponent) {\n        return;\n    }\n    var velocityX = velocity.velocityX, velocityY = velocity.velocityY, total = velocity.total;\n    var maxPositionX = bounds.maxPositionX, minPositionX = bounds.minPositionX, maxPositionY = bounds.maxPositionY, minPositionY = bounds.minPositionY;\n    var limitToBounds = setup.limitToBounds, alignmentAnimation = setup.alignmentAnimation;\n    var zoomAnimation = setup.zoomAnimation, panning = setup.panning;\n    var lockAxisY = panning.lockAxisY, lockAxisX = panning.lockAxisX;\n    var animationType = zoomAnimation.animationType;\n    var sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY, velocityAlignmentTime = alignmentAnimation.velocityAlignmentTime;\n    var alignAnimationTime = velocityAlignmentTime;\n    var moveAnimationTime = getVelocityMoveTime(contextInstance, total);\n    var finalAnimationTime = Math.max(moveAnimationTime, alignAnimationTime);\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    var paddingX = (paddingValueX * wrapperComponent.offsetWidth) / 100;\n    var paddingY = (paddingValueY * wrapperComponent.offsetHeight) / 100;\n    var maxTargetX = maxPositionX + paddingX;\n    var minTargetX = minPositionX - paddingX;\n    var maxTargetY = maxPositionY + paddingY;\n    var minTargetY = minPositionY - paddingY;\n    var startState = contextInstance.transformState;\n    var startTime = new Date().getTime();\n    handleSetupAnimation(contextInstance, animationType, finalAnimationTime, function (step) {\n        var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n        var frameTime = new Date().getTime() - startTime;\n        var animationProgress = frameTime / alignAnimationTime;\n        var alignAnimation = animations[alignmentAnimation.animationType];\n        var alignStep = 1 - alignAnimation(Math.min(1, animationProgress));\n        var customStep = 1 - step;\n        var newPositionX = positionX + velocityX * customStep;\n        var newPositionY = positionY + velocityY * customStep;\n        var currentPositionX = getVelocityPosition(newPositionX, startState.positionX, positionX, lockAxisX, limitToBounds, minPositionX, maxPositionX, minTargetX, maxTargetX, alignStep);\n        var currentPositionY = getVelocityPosition(newPositionY, startState.positionY, positionY, lockAxisY, limitToBounds, minPositionY, maxPositionY, minTargetY, maxTargetY, alignStep);\n        if (positionX !== newPositionX || positionY !== newPositionY) {\n            contextInstance.setTransformState(scale, currentPositionX, currentPositionY);\n        }\n    });\n}\n\nfunction handlePanningStart(contextInstance, event) {\n    var scale = contextInstance.transformState.scale;\n    handleCancelAnimation(contextInstance);\n    handleCalculateBounds(contextInstance, scale);\n    if (window.TouchEvent !== undefined && event instanceof TouchEvent) {\n        handleTouchPanningSetup(contextInstance, event);\n    }\n    else {\n        handlePanningSetup(contextInstance, event);\n    }\n}\nfunction handleAlignToBounds(contextInstance, customAnimationTime) {\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, minScale = _a.minScale, alignmentAnimation = _a.alignmentAnimation;\n    var disabled = alignmentAnimation.disabled, sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY, animationTime = alignmentAnimation.animationTime, animationType = alignmentAnimation.animationType;\n    var isDisabled = disabled || scale < minScale || (!sizeX && !sizeY);\n    if (isDisabled)\n        return;\n    var targetState = handlePanToBounds(contextInstance);\n    if (targetState) {\n        animate(contextInstance, targetState, customAnimationTime !== null && customAnimationTime !== void 0 ? customAnimationTime : animationTime, animationType);\n    }\n}\nfunction handlePanning(contextInstance, clientX, clientY) {\n    var startCoords = contextInstance.startCoords, setup = contextInstance.setup;\n    var _a = setup.alignmentAnimation, sizeX = _a.sizeX, sizeY = _a.sizeY;\n    if (!startCoords)\n        return;\n    var _b = getPanningClientPosition(contextInstance, clientX, clientY), x = _b.x, y = _b.y;\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    handleCalculateVelocity(contextInstance, { x: x, y: y });\n    handleNewPosition(contextInstance, x, y, paddingValueX, paddingValueY);\n}\nfunction handlePanningEnd(contextInstance) {\n    if (contextInstance.isPanning) {\n        var velocityDisabled = contextInstance.setup.panning.velocityDisabled;\n        var velocity = contextInstance.velocity, wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        contextInstance.isPanning = false;\n        contextInstance.animate = false;\n        contextInstance.animation = null;\n        var wrapperRect = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.getBoundingClientRect();\n        var contentRect = contentComponent === null || contentComponent === void 0 ? void 0 : contentComponent.getBoundingClientRect();\n        var wrapperWidth = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.width) || 0;\n        var wrapperHeight = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.height) || 0;\n        var contentWidth = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.width) || 0;\n        var contentHeight = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.height) || 0;\n        var isZoomed = wrapperWidth < contentWidth || wrapperHeight < contentHeight;\n        var shouldAnimate = !velocityDisabled && velocity && (velocity === null || velocity === void 0 ? void 0 : velocity.total) > 0.1 && isZoomed;\n        if (shouldAnimate) {\n            handleVelocityPanning(contextInstance);\n        }\n        else {\n            handleAlignToBounds(contextInstance);\n        }\n    }\n}\n\nfunction handleZoomToPoint(contextInstance, scale, mouseX, mouseY) {\n    var _a = contextInstance.setup, minScale = _a.minScale, maxScale = _a.maxScale, limitToBounds = _a.limitToBounds;\n    var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, 0, false);\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var _b = handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds), x = _b.x, y = _b.y;\n    return { scale: newScale, positionX: x, positionY: y };\n}\nfunction handleAlignToScaleBounds(contextInstance, mousePositionX, mousePositionY) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var _a = contextInstance.setup, minScale = _a.minScale, limitToBounds = _a.limitToBounds, zoomAnimation = _a.zoomAnimation;\n    var disabled = zoomAnimation.disabled, animationTime = zoomAnimation.animationTime, animationType = zoomAnimation.animationType;\n    var isDisabled = disabled || scale >= minScale;\n    if (scale >= 1 || limitToBounds) {\n        // fire fit to bounds animation\n        handleAlignToBounds(contextInstance);\n    }\n    if (isDisabled || !wrapperComponent || !contextInstance.mounted)\n        return;\n    var mouseX = mousePositionX || wrapperComponent.offsetWidth / 2;\n    var mouseY = mousePositionY || wrapperComponent.offsetHeight / 2;\n    var targetState = handleZoomToPoint(contextInstance, minScale, mouseX, mouseY);\n    if (targetState) {\n        animate(contextInstance, targetState, animationTime, animationType);\n    }\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar initialState = {\n    previousScale: 1,\n    scale: 1,\n    positionX: 0,\n    positionY: 0,\n};\nvar initialSetup = {\n    disabled: false,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    centerZoomedOut: false,\n    centerOnInit: false,\n    disablePadding: false,\n    smooth: true,\n    wheel: {\n        step: 0.2,\n        disabled: false,\n        smoothStep: 0.001,\n        wheelDisabled: false,\n        touchPadDisabled: false,\n        activationKeys: [],\n        excluded: [],\n    },\n    panning: {\n        disabled: false,\n        velocityDisabled: false,\n        lockAxisX: false,\n        lockAxisY: false,\n        allowLeftClickPan: true,\n        allowMiddleClickPan: true,\n        allowRightClickPan: true,\n        wheelPanning: false,\n        activationKeys: [],\n        excluded: [],\n    },\n    pinch: {\n        step: 5,\n        disabled: false,\n        excluded: [],\n    },\n    doubleClick: {\n        disabled: false,\n        step: 0.7,\n        mode: \"zoomIn\",\n        animationType: \"easeOut\",\n        animationTime: 200,\n        excluded: [],\n    },\n    zoomAnimation: {\n        disabled: false,\n        size: 0.4,\n        animationTime: 200,\n        animationType: \"easeOut\",\n    },\n    alignmentAnimation: {\n        disabled: false,\n        sizeX: 100,\n        sizeY: 100,\n        animationTime: 200,\n        velocityAlignmentTime: 400,\n        animationType: \"easeOut\",\n    },\n    velocityAnimation: {\n        disabled: false,\n        sensitivity: 1,\n        animationTime: 400,\n        animationType: \"easeOut\",\n        equalToMove: true,\n    },\n};\nvar baseClasses = {\n    wrapperClass: \"react-transform-wrapper\",\n    contentClass: \"react-transform-component\",\n};\n\nvar createState = function (props) {\n    var _a, _b, _c, _d;\n    return {\n        previousScale: (_a = props.initialScale) !== null && _a !== void 0 ? _a : initialState.scale,\n        scale: (_b = props.initialScale) !== null && _b !== void 0 ? _b : initialState.scale,\n        positionX: (_c = props.initialPositionX) !== null && _c !== void 0 ? _c : initialState.positionX,\n        positionY: (_d = props.initialPositionY) !== null && _d !== void 0 ? _d : initialState.positionY,\n    };\n};\nvar createSetup = function (props) {\n    var newSetup = __assign({}, initialSetup);\n    Object.keys(props).forEach(function (key) {\n        var validValue = typeof props[key] !== \"undefined\";\n        var validParameter = typeof initialSetup[key] !== \"undefined\";\n        if (validParameter && validValue) {\n            var dataType = Object.prototype.toString.call(initialSetup[key]);\n            var isObject = dataType === \"[object Object]\";\n            var isArray = dataType === \"[object Array]\";\n            if (isObject) {\n                newSetup[key] = __assign(__assign({}, initialSetup[key]), props[key]);\n            }\n            else if (isArray) {\n                newSetup[key] = __spreadArray(__spreadArray([], initialSetup[key], true), props[key], true);\n            }\n            else {\n                newSetup[key] = props[key];\n            }\n        }\n    });\n    return newSetup;\n};\n\nvar handleCalculateButtonZoom = function (contextInstance, delta, step) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, smooth = setup.smooth;\n    var size = zoomAnimation.size;\n    if (!wrapperComponent) {\n        throw new Error(\"Wrapper is not mounted\");\n    }\n    var targetScale = smooth\n        ? scale * Math.exp(delta * step)\n        : scale + delta * step;\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, false);\n    return newScale;\n};\nfunction handleZoomToViewCenter(contextInstance, delta, step, animationTime, animationType) {\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (!wrapperComponent)\n        return console.error(\"No WrapperComponent found\");\n    var wrapperWidth = wrapperComponent.offsetWidth;\n    var wrapperHeight = wrapperComponent.offsetHeight;\n    var mouseX = (wrapperWidth / 2 - positionX) / scale;\n    var mouseY = (wrapperHeight / 2 - positionY) / scale;\n    var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n    var targetState = handleZoomToPoint(contextInstance, newScale, mouseX, mouseY);\n    if (!targetState) {\n        return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n    }\n    animate(contextInstance, targetState, animationTime, animationType);\n}\nfunction resetTransformations(contextInstance, animationTime, animationType, onResetTransformation) {\n    var setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var limitToBounds = setup.limitToBounds;\n    var initialTransformation = createState(contextInstance.props);\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (!wrapperComponent)\n        return;\n    var newBounds = calculateBounds(contextInstance, initialTransformation.scale);\n    var boundedPositions = getMouseBoundedPosition(initialTransformation.positionX, initialTransformation.positionY, newBounds, limitToBounds, 0, 0, wrapperComponent);\n    var newState = {\n        scale: initialTransformation.scale,\n        positionX: boundedPositions.x,\n        positionY: boundedPositions.y,\n    };\n    if (scale === initialTransformation.scale &&\n        positionX === initialTransformation.positionX &&\n        positionY === initialTransformation.positionY) {\n        return;\n    }\n    onResetTransformation === null || onResetTransformation === void 0 ? void 0 : onResetTransformation();\n    animate(contextInstance, newState, animationTime, animationType);\n}\nfunction getOffset(element, wrapper, content, state) {\n    var offset = element.getBoundingClientRect();\n    var wrapperOffset = wrapper.getBoundingClientRect();\n    var contentOffset = content.getBoundingClientRect();\n    var xOff = wrapperOffset.x * state.scale;\n    var yOff = wrapperOffset.y * state.scale;\n    return {\n        x: (offset.x - contentOffset.x + xOff) / state.scale,\n        y: (offset.y - contentOffset.y + yOff) / state.scale,\n    };\n}\nfunction calculateZoomToNode(contextInstance, node, customZoom) {\n    var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent, transformState = contextInstance.transformState;\n    var _a = contextInstance.setup, limitToBounds = _a.limitToBounds, minScale = _a.minScale, maxScale = _a.maxScale;\n    if (!wrapperComponent || !contentComponent)\n        return transformState;\n    var wrapperRect = wrapperComponent.getBoundingClientRect();\n    var nodeRect = node.getBoundingClientRect();\n    var nodeOffset = getOffset(node, wrapperComponent, contentComponent, transformState);\n    var nodeLeft = nodeOffset.x;\n    var nodeTop = nodeOffset.y;\n    var nodeWidth = nodeRect.width / transformState.scale;\n    var nodeHeight = nodeRect.height / transformState.scale;\n    var scaleX = wrapperComponent.offsetWidth / nodeWidth;\n    var scaleY = wrapperComponent.offsetHeight / nodeHeight;\n    var newScale = checkZoomBounds(customZoom || Math.min(scaleX, scaleY), minScale, maxScale, 0, false);\n    var offsetX = (wrapperRect.width - nodeWidth * newScale) / 2;\n    var offsetY = (wrapperRect.height - nodeHeight * newScale) / 2;\n    var newPositionX = (wrapperRect.left - nodeLeft) * newScale + offsetX;\n    var newPositionY = (wrapperRect.top - nodeTop) * newScale + offsetY;\n    var bounds = calculateBounds(contextInstance, newScale);\n    var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, 0, 0, wrapperComponent), x = _b.x, y = _b.y;\n    return { positionX: x, positionY: y, scale: newScale };\n}\n\nvar zoomIn = function (contextInstance) {\n    return function (step, animationTime, animationType) {\n        if (step === void 0) { step = 0.5; }\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleZoomToViewCenter(contextInstance, 1, step, animationTime, animationType);\n    };\n};\nvar zoomOut = function (contextInstance) {\n    return function (step, animationTime, animationType) {\n        if (step === void 0) { step = 0.5; }\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleZoomToViewCenter(contextInstance, -1, step, animationTime, animationType);\n    };\n};\nvar setTransform = function (contextInstance) {\n    return function (newPositionX, newPositionY, newScale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale;\n        var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        var disabled = contextInstance.setup.disabled;\n        if (disabled || !wrapperComponent || !contentComponent)\n            return;\n        var targetState = {\n            positionX: Number.isNaN(newPositionX) ? positionX : newPositionX,\n            positionY: Number.isNaN(newPositionY) ? positionY : newPositionY,\n            scale: Number.isNaN(newScale) ? scale : newScale,\n        };\n        animate(contextInstance, targetState, animationTime, animationType);\n    };\n};\nvar resetTransform = function (contextInstance) {\n    return function (animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 200; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        resetTransformations(contextInstance, animationTime, animationType);\n    };\n};\nvar centerView = function (contextInstance) {\n    return function (scale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 200; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        var transformState = contextInstance.transformState, wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        if (wrapperComponent && contentComponent) {\n            var targetState = getCenterPosition(scale || transformState.scale, wrapperComponent, contentComponent);\n            animate(contextInstance, targetState, animationTime, animationType);\n        }\n    };\n};\nvar zoomToElement = function (contextInstance) {\n    return function (node, scale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 600; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleCancelAnimation(contextInstance);\n        var wrapperComponent = contextInstance.wrapperComponent;\n        var target = typeof node === \"string\" ? document.getElementById(node) : node;\n        if (wrapperComponent && target && wrapperComponent.contains(target)) {\n            var targetState = calculateZoomToNode(contextInstance, target, scale);\n            animate(contextInstance, targetState, animationTime, animationType);\n        }\n    };\n};\n\nvar getControls = function (contextInstance) {\n    return {\n        instance: contextInstance,\n        zoomIn: zoomIn(contextInstance),\n        zoomOut: zoomOut(contextInstance),\n        setTransform: setTransform(contextInstance),\n        resetTransform: resetTransform(contextInstance),\n        centerView: centerView(contextInstance),\n        zoomToElement: zoomToElement(contextInstance),\n    };\n};\nvar getState = function (contextInstance) {\n    return {\n        instance: contextInstance,\n        state: contextInstance.transformState,\n    };\n};\nvar getContext = function (contextInstance) {\n    var ref = {};\n    Object.assign(ref, getState(contextInstance));\n    Object.assign(ref, getControls(contextInstance));\n    return ref;\n};\n\n// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nvar passiveSupported = false;\nfunction makePassiveEventOption() {\n    try {\n        var options = {\n            get passive() {\n                // This function will be called when the browser\n                //   attempts to access the passive property.\n                passiveSupported = true;\n                return false;\n            },\n        };\n        return options;\n    }\n    catch (err) {\n        passiveSupported = false;\n        return passiveSupported;\n    }\n}\n\nvar matchPrefix = \".\".concat(baseClasses.wrapperClass);\nvar isExcludedNode = function (node, excluded) {\n    return excluded.some(function (exclude) {\n        return node.matches(\"\".concat(matchPrefix, \" \").concat(exclude, \", \").concat(matchPrefix, \" .\").concat(exclude, \", \").concat(matchPrefix, \" \").concat(exclude, \" *, \").concat(matchPrefix, \" .\").concat(exclude, \" *\"));\n    });\n};\nvar cancelTimeout = function (timeout) {\n    if (timeout) {\n        clearTimeout(timeout);\n    }\n};\n\nvar getTransformStyles = function (x, y, scale) {\n    // Standard translate prevents blurry svg on the safari\n    return \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(\").concat(scale, \")\");\n};\nvar getMatrixTransformStyles = function (x, y, scale) {\n    // The shorthand for matrix does not work for Safari hence the need to explicitly use matrix3d\n    // Refer to https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix\n    var a = scale;\n    var b = 0;\n    var c = 0;\n    var d = scale;\n    var tx = x;\n    var ty = y;\n    return \"matrix3d(\".concat(a, \", \").concat(b, \", 0, 0, \").concat(c, \", \").concat(d, \", 0, 0, 0, 0, 1, 0, \").concat(tx, \", \").concat(ty, \", 0, 1)\");\n};\nvar getCenterPosition = function (scale, wrapperComponent, contentComponent) {\n    var contentWidth = contentComponent.offsetWidth * scale;\n    var contentHeight = contentComponent.offsetHeight * scale;\n    var centerPositionX = (wrapperComponent.offsetWidth - contentWidth) / 2;\n    var centerPositionY = (wrapperComponent.offsetHeight - contentHeight) / 2;\n    return {\n        scale: scale,\n        positionX: centerPositionX,\n        positionY: centerPositionY,\n    };\n};\n\nfunction mergeRefs(refs) {\n    return function (value) {\n        refs.forEach(function (ref) {\n            if (typeof ref === \"function\") {\n                ref(value);\n            }\n            else if (ref != null) {\n                ref.current = value;\n            }\n        });\n    };\n}\n\nvar isWheelAllowed = function (contextInstance, event) {\n    var _a = contextInstance.setup.wheel, disabled = _a.disabled, wheelDisabled = _a.wheelDisabled, touchPadDisabled = _a.touchPadDisabled, excluded = _a.excluded;\n    var isInitialized = contextInstance.isInitialized, isPanning = contextInstance.isPanning;\n    var target = event.target;\n    var isAllowed = isInitialized && !isPanning && !disabled && target;\n    if (!isAllowed)\n        return false;\n    // Event ctrlKey detects if touchpad action is executing wheel or pinch gesture\n    if (wheelDisabled && !event.ctrlKey)\n        return false;\n    if (touchPadDisabled && event.ctrlKey)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nvar getDeltaY = function (event) {\n    if (event) {\n        return event.deltaY < 0 ? 1 : -1;\n    }\n    return 0;\n};\nfunction getDelta(event, customDelta) {\n    var deltaY = getDeltaY(event);\n    var delta = checkIsNumber(customDelta, deltaY);\n    return delta;\n}\nfunction getMousePosition(event, contentComponent, scale) {\n    var contentRect = contentComponent.getBoundingClientRect();\n    var mouseX = 0;\n    var mouseY = 0;\n    if (\"clientX\" in event) {\n        // mouse position x, y over wrapper component\n        mouseX = (event.clientX - contentRect.left) / scale;\n        mouseY = (event.clientY - contentRect.top) / scale;\n    }\n    else {\n        var touch = event.touches[0];\n        mouseX = (touch.clientX - contentRect.left) / scale;\n        mouseY = (touch.clientY - contentRect.top) / scale;\n    }\n    if (Number.isNaN(mouseX) || Number.isNaN(mouseY))\n        console.error(\"No mouse or touch offset found\");\n    return {\n        x: mouseX,\n        y: mouseY,\n    };\n}\nvar handleCalculateWheelZoom = function (contextInstance, delta, step, disable, getTarget) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    if (!wrapperComponent) {\n        throw new Error(\"Wrapper is not mounted\");\n    }\n    var targetScale = scale + delta * step;\n    if (getTarget)\n        return targetScale;\n    var paddingEnabled = disable ? false : !disabled;\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled && !disablePadding);\n    return newScale;\n};\nvar handleWheelZoomStop = function (contextInstance, event) {\n    var previousWheelEvent = contextInstance.previousWheelEvent;\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, maxScale = _a.maxScale, minScale = _a.minScale;\n    if (!previousWheelEvent)\n        return false;\n    if (scale < maxScale || scale > minScale)\n        return true;\n    if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY))\n        return true;\n    if (previousWheelEvent.deltaY > 0 && previousWheelEvent.deltaY < event.deltaY)\n        return true;\n    if (previousWheelEvent.deltaY < 0 && previousWheelEvent.deltaY > event.deltaY)\n        return true;\n    if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY))\n        return true;\n    return false;\n};\n\nvar isPinchStartAllowed = function (contextInstance, event) {\n    var _a = contextInstance.setup.pinch, disabled = _a.disabled, excluded = _a.excluded;\n    var isInitialized = contextInstance.isInitialized;\n    var target = event.target;\n    var isAllowed = isInitialized && !disabled && target;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nvar isPinchAllowed = function (contextInstance) {\n    var disabled = contextInstance.setup.pinch.disabled;\n    var isInitialized = contextInstance.isInitialized, pinchStartDistance = contextInstance.pinchStartDistance;\n    var isAllowed = isInitialized && !disabled && pinchStartDistance;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nvar calculateTouchMidPoint = function (event, scale, contentComponent) {\n    var contentRect = contentComponent.getBoundingClientRect();\n    var touches = event.touches;\n    var firstPointX = roundNumber(touches[0].clientX - contentRect.left, 5);\n    var firstPointY = roundNumber(touches[0].clientY - contentRect.top, 5);\n    var secondPointX = roundNumber(touches[1].clientX - contentRect.left, 5);\n    var secondPointY = roundNumber(touches[1].clientY - contentRect.top, 5);\n    return {\n        x: (firstPointX + secondPointX) / 2 / scale,\n        y: (firstPointY + secondPointY) / 2 / scale,\n    };\n};\nvar getTouchDistance = function (event) {\n    return Math.sqrt(Math.pow((event.touches[0].pageX - event.touches[1].pageX), 2) +\n        Math.pow((event.touches[0].pageY - event.touches[1].pageY), 2));\n};\nvar calculatePinchZoom = function (contextInstance, currentDistance) {\n    var pinchStartScale = contextInstance.pinchStartScale, pinchStartDistance = contextInstance.pinchStartDistance, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    if (!pinchStartScale || pinchStartDistance === null || !currentDistance) {\n        throw new Error(\"Pinch touches distance was not provided\");\n    }\n    if (currentDistance < 0) {\n        return contextInstance.transformState.scale;\n    }\n    var touchProportion = currentDistance / pinchStartDistance;\n    var scaleDifference = touchProportion * pinchStartScale;\n    return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled && !disablePadding);\n};\n\nvar wheelStopEventTime = 160;\nvar wheelAnimationTime = 100;\nvar handleWheelStart = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheelStart = _a.onWheelStart, onZoomStart = _a.onZoomStart;\n    if (!contextInstance.wheelStopEventTimer) {\n        handleCancelAnimation(contextInstance);\n        handleCallback(getContext(contextInstance), event, onWheelStart);\n        handleCallback(getContext(contextInstance), event, onZoomStart);\n    }\n};\nvar handleWheelZoom = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheel = _a.onWheel, onZoom = _a.onZoom;\n    var contentComponent = contextInstance.contentComponent, setup = contextInstance.setup, transformState = contextInstance.transformState;\n    var scale = transformState.scale;\n    var limitToBounds = setup.limitToBounds, centerZoomedOut = setup.centerZoomedOut, zoomAnimation = setup.zoomAnimation, wheel = setup.wheel, disablePadding = setup.disablePadding, smooth = setup.smooth;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    var step = wheel.step, smoothStep = wheel.smoothStep;\n    if (!contentComponent) {\n        throw new Error(\"Component not mounted\");\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    var delta = getDelta(event, null);\n    var zoomStep = smooth ? smoothStep * Math.abs(event.deltaY) : step;\n    var newScale = handleCalculateWheelZoom(contextInstance, delta, zoomStep, !event.ctrlKey);\n    // if scale not change\n    if (scale === newScale)\n        return;\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var mousePosition = getMousePosition(event, contentComponent, scale);\n    var isPaddingDisabled = disabled || size === 0 || centerZoomedOut || disablePadding;\n    var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n    var _b = handleCalculateZoomPositions(contextInstance, mousePosition.x, mousePosition.y, newScale, bounds, isLimitedToBounds), x = _b.x, y = _b.y;\n    contextInstance.previousWheelEvent = event;\n    contextInstance.setTransformState(newScale, x, y);\n    handleCallback(getContext(contextInstance), event, onWheel);\n    handleCallback(getContext(contextInstance), event, onZoom);\n};\nvar handleWheelStop = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheelStop = _a.onWheelStop, onZoomStop = _a.onZoomStop;\n    // fire animation\n    cancelTimeout(contextInstance.wheelAnimationTimer);\n    contextInstance.wheelAnimationTimer = setTimeout(function () {\n        if (!contextInstance.mounted)\n            return;\n        handleAlignToScaleBounds(contextInstance, event.x, event.y);\n        contextInstance.wheelAnimationTimer = null;\n    }, wheelAnimationTime);\n    // Wheel stop event\n    var hasStoppedZooming = handleWheelZoomStop(contextInstance, event);\n    if (hasStoppedZooming) {\n        cancelTimeout(contextInstance.wheelStopEventTimer);\n        contextInstance.wheelStopEventTimer = setTimeout(function () {\n            if (!contextInstance.mounted)\n                return;\n            contextInstance.wheelStopEventTimer = null;\n            handleCallback(getContext(contextInstance), event, onWheelStop);\n            handleCallback(getContext(contextInstance), event, onZoomStop);\n        }, wheelStopEventTime);\n    }\n};\n\nvar getTouchCenter = function (event) {\n    var totalX = 0;\n    var totalY = 0;\n    // Sum up the positions of all touches\n    for (var i = 0; i < 2; i += 1) {\n        totalX += event.touches[i].clientX;\n        totalY += event.touches[i].clientY;\n    }\n    // Calculate the average position\n    var x = totalX / 2;\n    var y = totalY / 2;\n    return { x: x, y: y };\n};\nvar handlePinchStart = function (contextInstance, event) {\n    var distance = getTouchDistance(event);\n    contextInstance.pinchStartDistance = distance;\n    contextInstance.lastDistance = distance;\n    contextInstance.pinchStartScale = contextInstance.transformState.scale;\n    contextInstance.isPanning = false;\n    var center = getTouchCenter(event);\n    contextInstance.pinchLastCenterX = center.x;\n    contextInstance.pinchLastCenterY = center.y;\n    handleCancelAnimation(contextInstance);\n};\nvar handlePinchZoom = function (contextInstance, event) {\n    var contentComponent = contextInstance.contentComponent, pinchStartDistance = contextInstance.pinchStartDistance, wrapperComponent = contextInstance.wrapperComponent;\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, limitToBounds = _a.limitToBounds, centerZoomedOut = _a.centerZoomedOut, zoomAnimation = _a.zoomAnimation, alignmentAnimation = _a.alignmentAnimation;\n    var disabled = zoomAnimation.disabled, size = zoomAnimation.size;\n    // if one finger starts from outside of wrapper\n    if (pinchStartDistance === null || !contentComponent)\n        return;\n    var midPoint = calculateTouchMidPoint(event, scale, contentComponent);\n    // if touches goes off of the wrapper element\n    if (!Number.isFinite(midPoint.x) || !Number.isFinite(midPoint.y))\n        return;\n    var currentDistance = getTouchDistance(event);\n    var newScale = calculatePinchZoom(contextInstance, currentDistance);\n    var center = getTouchCenter(event);\n    // pan should be scale invariant.\n    var panX = center.x - (contextInstance.pinchLastCenterX || 0);\n    var panY = center.y - (contextInstance.pinchLastCenterY || 0);\n    if (newScale === scale && panX === 0 && panY === 0)\n        return;\n    contextInstance.pinchLastCenterX = center.x;\n    contextInstance.pinchLastCenterY = center.y;\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var isPaddingDisabled = disabled || size === 0 || centerZoomedOut;\n    var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n    var _b = handleCalculateZoomPositions(contextInstance, midPoint.x, midPoint.y, newScale, bounds, isLimitedToBounds), x = _b.x, y = _b.y;\n    contextInstance.pinchMidpoint = midPoint;\n    contextInstance.lastDistance = currentDistance;\n    var sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY;\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    var newPositionX = x + panX;\n    var newPositionY = y + panY;\n    var _c = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent), finalX = _c.x, finalY = _c.y;\n    contextInstance.setTransformState(newScale, finalX, finalY);\n};\nvar handlePinchStop = function (contextInstance) {\n    var pinchMidpoint = contextInstance.pinchMidpoint;\n    contextInstance.velocity = null;\n    contextInstance.lastDistance = null;\n    contextInstance.pinchMidpoint = null;\n    contextInstance.pinchStartScale = null;\n    contextInstance.pinchStartDistance = null;\n    handleAlignToScaleBounds(contextInstance, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.x, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.y);\n};\n\nvar handleDoubleClickStop = function (contextInstance, event) {\n    var onZoomStop = contextInstance.props.onZoomStop;\n    var animationTime = contextInstance.setup.doubleClick.animationTime;\n    cancelTimeout(contextInstance.doubleClickStopEventTimer);\n    contextInstance.doubleClickStopEventTimer = setTimeout(function () {\n        contextInstance.doubleClickStopEventTimer = null;\n        handleCallback(getContext(contextInstance), event, onZoomStop);\n    }, animationTime);\n};\nvar handleDoubleClickResetMode = function (contextInstance, event) {\n    var _a = contextInstance.props, onZoomStart = _a.onZoomStart, onZoom = _a.onZoom;\n    var _b = contextInstance.setup.doubleClick, animationTime = _b.animationTime, animationType = _b.animationType;\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n    resetTransformations(contextInstance, animationTime, animationType, function () {\n        return handleCallback(getContext(contextInstance), event, onZoom);\n    });\n    handleDoubleClickStop(contextInstance, event);\n};\nfunction getDoubleClickScale(mode, scale) {\n    if (mode === \"toggle\") {\n        return scale === 1 ? 1 : -1;\n    }\n    return mode === \"zoomOut\" ? -1 : 1;\n}\nfunction handleDoubleClick(contextInstance, event) {\n    var setup = contextInstance.setup, doubleClickStopEventTimer = contextInstance.doubleClickStopEventTimer, transformState = contextInstance.transformState, contentComponent = contextInstance.contentComponent;\n    var scale = transformState.scale;\n    var _a = contextInstance.props, onZoomStart = _a.onZoomStart, onZoom = _a.onZoom;\n    var _b = setup.doubleClick, disabled = _b.disabled, mode = _b.mode, step = _b.step, animationTime = _b.animationTime, animationType = _b.animationType;\n    if (disabled)\n        return;\n    if (doubleClickStopEventTimer)\n        return;\n    if (mode === \"reset\") {\n        return handleDoubleClickResetMode(contextInstance, event);\n    }\n    if (!contentComponent)\n        return console.error(\"No ContentComponent found\");\n    var delta = getDoubleClickScale(mode, contextInstance.transformState.scale);\n    var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n    // stop execution when scale didn't change\n    if (scale === newScale)\n        return;\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n    var mousePosition = getMousePosition(event, contentComponent, scale);\n    var targetState = handleZoomToPoint(contextInstance, newScale, mousePosition.x, mousePosition.y);\n    if (!targetState) {\n        return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n    }\n    handleCallback(getContext(contextInstance), event, onZoom);\n    animate(contextInstance, targetState, animationTime, animationType);\n    handleDoubleClickStop(contextInstance, event);\n}\nvar isDoubleClickAllowed = function (contextInstance, event) {\n    var isInitialized = contextInstance.isInitialized, setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var _a = setup.doubleClick, disabled = _a.disabled, excluded = _a.excluded;\n    var target = event.target;\n    var isWrapperChild = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n    var isAllowed = isInitialized && target && isWrapperChild && !disabled;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\n\nvar ZoomPanPinch = /** @class */ (function () {\n    function ZoomPanPinch(props) {\n        var _this = this;\n        this.mounted = true;\n        this.pinchLastCenterX = null;\n        this.pinchLastCenterY = null;\n        this.onChangeCallbacks = new Set();\n        this.onInitCallbacks = new Set();\n        // Components\n        this.wrapperComponent = null;\n        this.contentComponent = null;\n        // Initialization\n        this.isInitialized = false;\n        this.bounds = null;\n        // wheel helpers\n        this.previousWheelEvent = null;\n        this.wheelStopEventTimer = null;\n        this.wheelAnimationTimer = null;\n        // panning helpers\n        this.isPanning = false;\n        this.isWheelPanning = false;\n        this.startCoords = null;\n        this.lastTouch = null;\n        // pinch helpers\n        this.distance = null;\n        this.lastDistance = null;\n        this.pinchStartDistance = null;\n        this.pinchStartScale = null;\n        this.pinchMidpoint = null;\n        // double click helpers\n        this.doubleClickStopEventTimer = null;\n        // velocity helpers\n        this.velocity = null;\n        this.velocityTime = null;\n        this.lastMousePosition = null;\n        // animations helpers\n        this.animate = false;\n        this.animation = null;\n        this.maxBounds = null;\n        // key press\n        this.pressedKeys = {};\n        this.mount = function () {\n            _this.initializeWindowEvents();\n        };\n        this.unmount = function () {\n            _this.cleanupWindowEvents();\n        };\n        this.update = function (newProps) {\n            _this.props = newProps;\n            handleCalculateBounds(_this, _this.transformState.scale);\n            _this.setup = createSetup(newProps);\n        };\n        this.initializeWindowEvents = function () {\n            var _a, _b;\n            var passive = makePassiveEventOption();\n            var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n            var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n            (_b = _this.wrapperComponent) === null || _b === void 0 ? void 0 : _b.addEventListener(\"wheel\", _this.onWheelPanning, passive);\n            // Panning on window to allow panning when mouse is out of component wrapper\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousedown\", _this.onPanningStart, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousemove\", _this.onPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mouseup\", _this.onPanningStop, passive);\n            currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.addEventListener(\"mouseleave\", _this.clearPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keydown\", _this.setKeyPressed, passive);\n        };\n        this.cleanupWindowEvents = function () {\n            var _a, _b;\n            var passive = makePassiveEventOption();\n            var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n            var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousedown\", _this.onPanningStart, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousemove\", _this.onPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mouseup\", _this.onPanningStop, passive);\n            currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keydown\", _this.setKeyPressed, passive);\n            document.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n            handleCancelAnimation(_this);\n            (_b = _this.observer) === null || _b === void 0 ? void 0 : _b.disconnect();\n        };\n        this.handleInitializeWrapperEvents = function (wrapper) {\n            // Zooming events on wrapper\n            var passive = makePassiveEventOption();\n            wrapper.addEventListener(\"wheel\", _this.onWheelZoom, passive);\n            wrapper.addEventListener(\"dblclick\", _this.onDoubleClick, passive);\n            wrapper.addEventListener(\"touchstart\", _this.onTouchPanningStart, passive);\n            wrapper.addEventListener(\"touchmove\", _this.onTouchPanning, passive);\n            wrapper.addEventListener(\"touchend\", _this.onTouchPanningStop, passive);\n        };\n        this.handleInitialize = function (wrapper, contentComponent) {\n            var isCentered = false;\n            var centerOnInit = _this.setup.centerOnInit;\n            var hasTarget = function (entries, target) {\n                // eslint-disable-next-line no-restricted-syntax\n                for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                    var entry = entries_1[_i];\n                    if (entry.target === target) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n            _this.applyTransformation();\n            _this.onInitCallbacks.forEach(function (callback) {\n                callback(getContext(_this));\n            });\n            _this.observer = new ResizeObserver(function (entries) {\n                if (hasTarget(entries, wrapper) || hasTarget(entries, contentComponent)) {\n                    if (centerOnInit && !isCentered) {\n                        var currentWidth = contentComponent.offsetWidth;\n                        var currentHeight = contentComponent.offsetHeight;\n                        if (currentWidth > 0 || currentHeight > 0) {\n                            isCentered = true;\n                            _this.setCenter();\n                        }\n                    }\n                    else {\n                        handleCancelAnimation(_this);\n                        handleCalculateBounds(_this, _this.transformState.scale);\n                        handleAlignToBounds(_this, 0);\n                    }\n                }\n            });\n            // Start observing the target node for configured mutations\n            _this.observer.observe(wrapper);\n            _this.observer.observe(contentComponent);\n        };\n        /// ///////\n        // Zoom\n        /// ///////\n        this.onWheelZoom = function (event) {\n            var disabled = _this.setup.disabled;\n            if (disabled)\n                return;\n            var isAllowed = isWheelAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.wheel.activationKeys);\n            if (!keysPressed)\n                return;\n            handleWheelStart(_this, event);\n            handleWheelZoom(_this, event);\n            handleWheelStop(_this, event);\n        };\n        /// ///////\n        // Pan\n        /// ///////\n        this.onWheelPanning = function (event) {\n            var _a = _this.setup, disabled = _a.disabled, wheel = _a.wheel, panning = _a.panning;\n            if (!_this.wrapperComponent ||\n                !_this.contentComponent ||\n                disabled ||\n                !wheel.wheelDisabled ||\n                panning.disabled ||\n                !panning.wheelPanning ||\n                event.ctrlKey) {\n                return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            var _b = _this.transformState, positionX = _b.positionX, positionY = _b.positionY;\n            var mouseX = positionX - event.deltaX;\n            var mouseY = positionY - event.deltaY;\n            var newPositionX = panning.lockAxisX ? positionX : mouseX;\n            var newPositionY = panning.lockAxisY ? positionY : mouseY;\n            var _c = _this.setup.alignmentAnimation, sizeX = _c.sizeX, sizeY = _c.sizeY;\n            var paddingValueX = getPaddingValue(_this, sizeX);\n            var paddingValueY = getPaddingValue(_this, sizeY);\n            if (newPositionX === positionX && newPositionY === positionY)\n                return;\n            handleNewPosition(_this, newPositionX, newPositionY, paddingValueX, paddingValueY);\n        };\n        this.onPanningStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanningStart = _this.props.onPanningStart;\n            if (disabled)\n                return;\n            var isAllowed = isPanningStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n            if (!keysPressed)\n                return;\n            if (event.button === 0 && !_this.setup.panning.allowLeftClickPan)\n                return;\n            if (event.button === 1 && !_this.setup.panning.allowMiddleClickPan)\n                return;\n            if (event.button === 2 && !_this.setup.panning.allowRightClickPan)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handleCancelAnimation(_this);\n            handlePanningStart(_this, event);\n            handleCallback(getContext(_this), event, onPanningStart);\n        };\n        this.onPanning = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanning = _this.props.onPanning;\n            if (disabled)\n                return;\n            var isAllowed = isPanningAllowed(_this);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n            if (!keysPressed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handlePanning(_this, event.clientX, event.clientY);\n            handleCallback(getContext(_this), event, onPanning);\n        };\n        this.onPanningStop = function (event) {\n            var onPanningStop = _this.props.onPanningStop;\n            if (_this.isPanning) {\n                handlePanningEnd(_this);\n                handleCallback(getContext(_this), event, onPanningStop);\n            }\n        };\n        /// ///////\n        // Pinch\n        /// ///////\n        this.onPinchStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var _a = _this.props, onPinchingStart = _a.onPinchingStart, onZoomStart = _a.onZoomStart;\n            if (disabled)\n                return;\n            var isAllowed = isPinchStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            handlePinchStart(_this, event);\n            handleCancelAnimation(_this);\n            handleCallback(getContext(_this), event, onPinchingStart);\n            handleCallback(getContext(_this), event, onZoomStart);\n        };\n        this.onPinch = function (event) {\n            var disabled = _this.setup.disabled;\n            var _a = _this.props, onPinching = _a.onPinching, onZoom = _a.onZoom;\n            if (disabled)\n                return;\n            var isAllowed = isPinchAllowed(_this);\n            if (!isAllowed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handlePinchZoom(_this, event);\n            handleCallback(getContext(_this), event, onPinching);\n            handleCallback(getContext(_this), event, onZoom);\n        };\n        this.onPinchStop = function (event) {\n            var _a = _this.props, onPinchingStop = _a.onPinchingStop, onZoomStop = _a.onZoomStop;\n            if (_this.pinchStartScale) {\n                handlePinchStop(_this);\n                handleCallback(getContext(_this), event, onPinchingStop);\n                handleCallback(getContext(_this), event, onZoomStop);\n            }\n        };\n        /// ///////\n        // Touch\n        /// ///////\n        this.onTouchPanningStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanningStart = _this.props.onPanningStart;\n            if (disabled)\n                return;\n            var isAllowed = isPanningStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var isDoubleTap = _this.lastTouch &&\n                +new Date() - _this.lastTouch < 200 &&\n                event.touches.length === 1;\n            if (!isDoubleTap) {\n                _this.lastTouch = +new Date();\n                handleCancelAnimation(_this);\n                var touches = event.touches;\n                var isPanningAction = touches.length === 1;\n                var isPinchAction = touches.length === 2;\n                if (isPanningAction) {\n                    handleCancelAnimation(_this);\n                    handlePanningStart(_this, event);\n                    handleCallback(getContext(_this), event, onPanningStart);\n                }\n                if (isPinchAction) {\n                    _this.onPinchStart(event);\n                }\n            }\n        };\n        this.onTouchPanning = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanning = _this.props.onPanning;\n            if (_this.isPanning && event.touches.length === 1) {\n                if (disabled)\n                    return;\n                var isAllowed = isPanningAllowed(_this);\n                if (!isAllowed)\n                    return;\n                event.preventDefault();\n                event.stopPropagation();\n                var touch = event.touches[0];\n                handlePanning(_this, touch.clientX, touch.clientY);\n                handleCallback(getContext(_this), event, onPanning);\n            }\n            else if (event.touches.length > 1) {\n                _this.onPinch(event);\n            }\n        };\n        this.onTouchPanningStop = function (event) {\n            _this.onPanningStop(event);\n            _this.onPinchStop(event);\n        };\n        /// ///////\n        // Double Click\n        /// ///////\n        this.onDoubleClick = function (event) {\n            var disabled = _this.setup.disabled;\n            if (disabled)\n                return;\n            var isAllowed = isDoubleClickAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            handleDoubleClick(_this, event);\n        };\n        /// ///////\n        // Helpers\n        /// ///////\n        this.clearPanning = function (event) {\n            if (_this.isPanning) {\n                _this.onPanningStop(event);\n            }\n        };\n        this.setKeyPressed = function (e) {\n            _this.pressedKeys[e.key] = true;\n        };\n        this.setKeyUnPressed = function (e) {\n            _this.pressedKeys[e.key] = false;\n        };\n        this.isPressingKeys = function (keys) {\n            if (!keys.length) {\n                return true;\n            }\n            return Boolean(keys.find(function (key) { return _this.pressedKeys[key]; }));\n        };\n        this.setTransformState = function (scale, positionX, positionY) {\n            var onTransformed = _this.props.onTransformed;\n            if (!Number.isNaN(scale) &&\n                !Number.isNaN(positionX) &&\n                !Number.isNaN(positionY)) {\n                if (scale !== _this.transformState.scale) {\n                    _this.transformState.previousScale = _this.transformState.scale;\n                    _this.transformState.scale = scale;\n                }\n                _this.transformState.positionX = positionX;\n                _this.transformState.positionY = positionY;\n                _this.applyTransformation();\n                var ctx_1 = getContext(_this);\n                _this.onChangeCallbacks.forEach(function (callback) { return callback(ctx_1); });\n                handleCallback(ctx_1, { scale: scale, positionX: positionX, positionY: positionY }, onTransformed);\n            }\n            else {\n                console.error(\"Detected NaN set state values\");\n            }\n        };\n        this.setCenter = function () {\n            if (_this.wrapperComponent && _this.contentComponent) {\n                var targetState = getCenterPosition(_this.transformState.scale, _this.wrapperComponent, _this.contentComponent);\n                _this.setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n            }\n        };\n        this.handleTransformStyles = function (x, y, scale) {\n            if (_this.props.customTransform) {\n                return _this.props.customTransform(x, y, scale);\n            }\n            return getTransformStyles(x, y, scale);\n        };\n        this.applyTransformation = function () {\n            if (!_this.mounted || !_this.contentComponent)\n                return;\n            var _a = _this.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n            var transform = _this.handleTransformStyles(positionX, positionY, scale);\n            _this.contentComponent.style.transform = transform;\n        };\n        this.getContext = function () {\n            return getContext(_this);\n        };\n        /**\n         * Hooks\n         */\n        this.onChange = function (callback) {\n            if (!_this.onChangeCallbacks.has(callback)) {\n                _this.onChangeCallbacks.add(callback);\n            }\n            return function () {\n                _this.onChangeCallbacks.delete(callback);\n            };\n        };\n        this.onInit = function (callback) {\n            if (!_this.onInitCallbacks.has(callback)) {\n                _this.onInitCallbacks.add(callback);\n            }\n            return function () {\n                _this.onInitCallbacks.delete(callback);\n            };\n        };\n        /**\n         * Initialization\n         */\n        this.init = function (wrapperComponent, contentComponent) {\n            _this.cleanupWindowEvents();\n            _this.wrapperComponent = wrapperComponent;\n            _this.contentComponent = contentComponent;\n            handleCalculateBounds(_this, _this.transformState.scale);\n            _this.handleInitializeWrapperEvents(wrapperComponent);\n            _this.handleInitialize(wrapperComponent, contentComponent);\n            _this.initializeWindowEvents();\n            _this.isInitialized = true;\n            var ctx = getContext(_this);\n            handleCallback(ctx, undefined, _this.props.onInit);\n        };\n        this.props = props;\n        this.setup = createSetup(this.props);\n        this.transformState = createState(this.props);\n    }\n    return ZoomPanPinch;\n}());\n\nvar Context = react__WEBPACK_IMPORTED_MODULE_0___default().createContext(null);\nvar getContent = function (children, ctx) {\n    if (typeof children === \"function\") {\n        return children(ctx);\n    }\n    return children;\n};\nvar TransformWrapper = react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(function (props, ref) {\n    var instance = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new ZoomPanPinch(props)).current;\n    var content = getContent(props.children, getControls(instance));\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, function () { return getControls(instance); }, [instance]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        instance.update(props);\n    }, [instance, props]);\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Context.Provider, { value: instance }, content);\n});\n\nvar KeepScale = react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(function (props, ref) {\n    var localRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var instance = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        return instance.onChange(function (ctx) {\n            if (localRef.current) {\n                var positionX = 0;\n                var positionY = 0;\n                localRef.current.style.transform = instance.handleTransformStyles(positionX, positionY, 1 / ctx.instance.transformState.scale);\n            }\n        });\n    }, [instance]);\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", __assign({}, props, { ref: mergeRefs([localRef, ref]) }));\n});\n\nvar initialElementRect = {\n    width: 0,\n    height: 0,\n    y: 0,\n    x: 0,\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n};\nvar useResize = function (ref, onResize, dependencies) {\n    var resizeObserverRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n    var rectRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(initialElementRect);\n    var didUnmount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(function () {\n        var _a;\n        didUnmount.current = false;\n        if (!(\"ResizeObserver\" in window)) {\n            return;\n        }\n        if (ref) {\n            resizeObserverRef.current = new ResizeObserver(function (entries) {\n                var newSize = ref.getBoundingClientRect();\n                if (!Array.isArray(entries) ||\n                    !entries.length ||\n                    didUnmount.current ||\n                    (newSize.width === rectRef.current.width &&\n                        newSize.height === rectRef.current.height))\n                    return;\n                onResize(newSize, ref);\n                rectRef.current = newSize;\n            });\n            (_a = resizeObserverRef.current) === null || _a === void 0 ? void 0 : _a.observe(ref);\n        }\n        return function () {\n            var _a;\n            didUnmount.current = true;\n            if (ref) {\n                (_a = resizeObserverRef.current) === null || _a === void 0 ? void 0 : _a.unobserve(ref);\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, __spreadArray([onResize, ref], dependencies, true));\n};\n\nvar previewStyles = {\n    position: \"absolute\",\n    zIndex: 2,\n    top: \"0px\",\n    left: \"0px\",\n    boxSizing: \"border-box\",\n    border: \"3px solid red\",\n    transformOrigin: \"0% 0%\",\n    boxShadow: \"rgba(0,0,0,0.2) 0 0 0 10000000px\",\n};\nvar MiniMap = function (_a) {\n    var _b = _a.width, width = _b === void 0 ? 200 : _b, _c = _a.height, height = _c === void 0 ? 200 : _c, _d = _a.borderColor, borderColor = _d === void 0 ? \"red\" : _d, children = _a.children, rest = __rest(_a, [\"width\", \"height\", \"borderColor\", \"children\"]);\n    var _e = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false), initialized = _e[0], setInitialized = _e[1];\n    var instance = useTransformContext();\n    var miniMapInstance = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var mainRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var previewRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var getViewportSize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n        if (instance.wrapperComponent) {\n            var rect = instance.wrapperComponent.getBoundingClientRect();\n            return {\n                width: rect.width,\n                height: rect.height,\n            };\n        }\n        return {\n            width: 0,\n            height: 0,\n        };\n    }, [instance.wrapperComponent]);\n    var getContentSize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n        if (instance.contentComponent) {\n            var rect = instance.contentComponent.getBoundingClientRect();\n            return {\n                width: rect.width / instance.transformState.scale,\n                height: rect.height / instance.transformState.scale,\n            };\n        }\n        return {\n            width: 0,\n            height: 0,\n        };\n    }, [instance.contentComponent, instance.transformState.scale]);\n    var computeMiniMapScale = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n        var contentSize = getContentSize();\n        var scaleX = width / contentSize.width;\n        var scaleY = height / contentSize.height;\n        var scale = scaleY > scaleX ? scaleX : scaleY;\n        return scale;\n    }, [getContentSize, height, width]);\n    var computeMiniMapSize = function () {\n        var contentSize = getContentSize();\n        var scaleX = width / contentSize.width;\n        var scaleY = height / contentSize.height;\n        if (scaleY > scaleX) {\n            return { width: width, height: contentSize.height * scaleX };\n        }\n        return { width: contentSize.width * scaleY, height: height };\n    };\n    var computeMiniMapStyle = function () {\n        var scale = computeMiniMapScale();\n        var style = {\n            transform: \"scale(\".concat(scale || 1, \")\"),\n            transformOrigin: \"0% 0%\",\n            position: \"absolute\",\n            boxSizing: \"border-box\",\n            zIndex: 1,\n            overflow: \"hidden\",\n        };\n        Object.keys(style).forEach(function (key) {\n            if (wrapperRef.current) {\n                wrapperRef.current.style[key] = style[key];\n            }\n        });\n    };\n    var transformMiniMap = function () {\n        computeMiniMapStyle();\n        var miniSize = computeMiniMapSize();\n        var wrapSize = getContentSize();\n        if (wrapperRef.current) {\n            wrapperRef.current.style.width = \"\".concat(wrapSize.width, \"px\");\n            wrapperRef.current.style.height = \"\".concat(wrapSize.height, \"px\");\n        }\n        if (mainRef.current) {\n            mainRef.current.style.width = \"\".concat(miniSize.width, \"px\");\n            mainRef.current.style.height = \"\".concat(miniSize.height, \"px\");\n        }\n        if (previewRef.current) {\n            var size = getViewportSize();\n            var scale = computeMiniMapScale();\n            var previewScale = scale * (1 / instance.transformState.scale);\n            var transform = instance.handleTransformStyles(-instance.transformState.positionX * previewScale, -instance.transformState.positionY * previewScale, 1);\n            previewRef.current.style.transform = transform;\n            previewRef.current.style.width = \"\".concat(size.width * previewScale, \"px\");\n            previewRef.current.style.height = \"\".concat(size.height * previewScale, \"px\");\n        }\n    };\n    var initialize = function () {\n        transformMiniMap();\n    };\n    useTransformEffect(function () {\n        transformMiniMap();\n    });\n    useTransformInit(function () {\n        initialize();\n        setInitialized(true);\n    });\n    useResize(instance.contentComponent, initialize, [initialized]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        return instance.onChange(function (zpp) {\n            var scale = computeMiniMapScale();\n            if (miniMapInstance.current) {\n                miniMapInstance.current.instance.transformState.scale =\n                    zpp.instance.transformState.scale;\n                miniMapInstance.current.instance.transformState.positionX =\n                    zpp.instance.transformState.positionX * scale;\n                miniMapInstance.current.instance.transformState.positionY =\n                    zpp.instance.transformState.positionY * scale;\n            }\n        });\n    }, [computeMiniMapScale, instance, miniMapInstance]);\n    var wrapperStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n        return {\n            position: \"relative\",\n            zIndex: 2,\n            overflow: \"hidden\",\n        };\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", __assign({}, rest, { ref: mainRef, style: wrapperStyle, className: \"rzpp-mini-map \".concat(rest.className || \"\") }),\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", __assign({}, rest, { ref: wrapperRef, className: \"rzpp-wrapper\" }), children),\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"rzpp-preview\", ref: previewRef, style: __assign(__assign({}, previewStyles), { borderColor: borderColor }) })));\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".transform-component-module_wrapper__SPB86 {\\n  position: relative;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n  transform: translate3d(0, 0, 0);\\n}\\n.transform-component-module_content__FBWxo {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.transform-component-module_content__FBWxo img {\\n  pointer-events: none;\\n}\\n\";\nvar styles = {\"wrapper\":\"transform-component-module_wrapper__SPB86\",\"content\":\"transform-component-module_content__FBWxo\"};\nstyleInject(css_248z);\n\nvar TransformComponent = function (_a) {\n    var children = _a.children, _b = _a.wrapperClass, wrapperClass = _b === void 0 ? \"\" : _b, _c = _a.contentClass, contentClass = _c === void 0 ? \"\" : _c, wrapperStyle = _a.wrapperStyle, contentStyle = _a.contentStyle, _d = _a.wrapperProps, wrapperProps = _d === void 0 ? {} : _d, _e = _a.contentProps, contentProps = _e === void 0 ? {} : _e;\n    var _f = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context), init = _f.init, cleanupWindowEvents = _f.cleanupWindowEvents;\n    var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var contentRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        var wrapper = wrapperRef.current;\n        var content = contentRef.current;\n        if (wrapper !== null && content !== null && init) {\n            init === null || init === void 0 ? void 0 : init(wrapper, content);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        return function () {\n            cleanupWindowEvents === null || cleanupWindowEvents === void 0 ? void 0 : cleanupWindowEvents();\n        };\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", __assign({}, wrapperProps, { ref: wrapperRef, className: \"\".concat(baseClasses.wrapperClass, \" \").concat(styles.wrapper, \" \").concat(wrapperClass), style: wrapperStyle }),\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", __assign({}, contentProps, { ref: contentRef, className: \"\".concat(baseClasses.contentClass, \" \").concat(styles.content, \" \").concat(contentClass), style: contentStyle }), children)));\n};\n\nvar useTransformContext = function () {\n    var libraryContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context);\n    if (!libraryContext) {\n        throw new Error(\"Transform context must be placed inside TransformWrapper\");\n    }\n    return libraryContext;\n};\n\nvar useControls = function () {\n    var libraryContext = useTransformContext();\n    return getControls(libraryContext);\n};\n\nvar useTransformInit = function (callback) {\n    var libraryContext = useTransformContext();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        var unmountCallback;\n        var unmount;\n        if (libraryContext.contentComponent && libraryContext.wrapperComponent) {\n            unmountCallback = callback(getState(libraryContext));\n        }\n        else {\n            unmount = libraryContext.onInit(function (ref) {\n                unmountCallback = callback(getState(ref.instance));\n            });\n        }\n        return function () {\n            unmount === null || unmount === void 0 ? void 0 : unmount();\n            unmountCallback === null || unmountCallback === void 0 ? void 0 : unmountCallback();\n        };\n    }, []);\n};\n\nvar useTransformEffect = function (callback) {\n    var libraryContext = useTransformContext();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        var unmountCallback;\n        var unmount = libraryContext.onChange(function (ref) {\n            unmountCallback = callback(getState(ref.instance));\n        });\n        return function () {\n            unmount();\n            unmountCallback === null || unmountCallback === void 0 ? void 0 : unmountCallback();\n        };\n    }, [callback, libraryContext]);\n};\n\nfunction useTransformComponent(callback) {\n    var libraryContext = useTransformContext();\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(callback(getState(libraryContext))), transformRender = _a[0], setTransformRender = _a[1];\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n        var mounted = true;\n        var unmount = libraryContext.onChange(function (ref) {\n            if (mounted) {\n                setTransformRender(callback(getState(ref.instance)));\n            }\n        });\n        return function () {\n            unmount();\n            mounted = false;\n        };\n    }, [callback, libraryContext]);\n    return transformRender;\n}\n\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9yZWFjdC16b29tLXBhbi1waW5jaC9kaXN0L2luZGV4LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUk7O0FBRW5JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsWUFBWTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsT0FBTztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQix3Q0FBd0M7QUFDeEMsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0Isd0NBQXdDO0FBQ3hDLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4Qyx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCx1QkFBdUI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGdDQUFnQztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLHlCQUF5QjtBQUMvRix3Q0FBd0MsMERBQTBEO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsY0FBYywwREFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVEQUFnQjtBQUN2QyxtQkFBbUIsNkNBQU07QUFDekI7QUFDQSxJQUFJLDBEQUFtQixvQkFBb0IsK0JBQStCO0FBQzFFLElBQUksZ0RBQVM7QUFDYjtBQUNBLEtBQUs7QUFDTCxXQUFXLDBEQUFtQixxQkFBcUIsaUJBQWlCO0FBQ3BFLENBQUM7O0FBRUQsZ0JBQWdCLHVEQUFnQjtBQUNoQyxtQkFBbUIsNkNBQU07QUFDekIsbUJBQW1CLGlEQUFVO0FBQzdCLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMLFdBQVcsMERBQW1CLG1CQUFtQixXQUFXLGlDQUFpQztBQUM3RixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNkNBQU07QUFDbEMsa0JBQWtCLDZDQUFNO0FBQ3hCLHFCQUFxQiw2Q0FBTTtBQUMzQixJQUFJLHNEQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0NBQVE7QUFDckI7QUFDQSwwQkFBMEIsNkNBQU07QUFDaEMsa0JBQWtCLDZDQUFNO0FBQ3hCLHFCQUFxQiw2Q0FBTTtBQUMzQixxQkFBcUIsNkNBQU07QUFDM0IsMEJBQTBCLGtEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wseUJBQXlCLGtEQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsOEJBQThCLGtEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCx1QkFBdUIsOENBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLDBEQUFtQixtQkFBbUIsVUFBVSw2RkFBNkY7QUFDekosUUFBUSwwREFBbUIsbUJBQW1CLFVBQVUsNENBQTRDO0FBQ3BHLFFBQVEsMERBQW1CLFVBQVUsdUVBQXVFLG9CQUFvQiwwQkFBMEIsR0FBRztBQUM3Sjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlEOztBQUVqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQSw0REFBNEQsdUJBQXVCLDRCQUE0Qix1QkFBdUIsNkJBQTZCLHdCQUF3QixxQkFBcUIsaUNBQWlDLCtDQUErQywwQ0FBMEMsZ0RBQWdELHdDQUF3QyxrREFBa0QsY0FBYyxlQUFlLG9DQUFvQyxHQUFHLDhDQUE4QyxrQkFBa0Isb0JBQW9CLDRCQUE0Qix1QkFBdUIsNkJBQTZCLHdCQUF3QixjQUFjLGVBQWUsNEJBQTRCLEdBQUcsa0RBQWtELHlCQUF5QixHQUFHO0FBQzkxQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQSxvUkFBb1IsOERBQThEO0FBQ2xWLGFBQWEsaURBQVU7QUFDdkIscUJBQXFCLDZDQUFNO0FBQzNCLHFCQUFxQiw2Q0FBTTtBQUMzQixJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVksMERBQW1CLG1CQUFtQixrQkFBa0IsNElBQTRJO0FBQ2hOLFFBQVEsMERBQW1CLG1CQUFtQixrQkFBa0IsNElBQTRJO0FBQzVNOztBQUVBO0FBQ0EseUJBQXlCLGlEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsK0NBQVE7QUFDckIsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFNk87QUFDN08iLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrZmlkZGVzL0NvZGUvcHJvamVjdHMvdHJhZGl0aW8vdHJhZGl0aW8tbmV4dC1zaXRlL25vZGVfbW9kdWxlcy9yZWFjdC16b29tLXBhbi1waW5jaC9kaXN0L2luZGV4LmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VJbXBlcmF0aXZlSGFuZGxlLCB1c2VFZmZlY3QsIHVzZUNvbnRleHQsIHVzZUxheW91dEVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIFJvdW5kcyBudW1iZXIgdG8gZ2l2ZW4gZGVjaW1hbFxuICogZWcuIHJvdW5kTnVtYmVyKDIuMzQzNDMsIDEpID0+IDIuM1xuICovXG52YXIgcm91bmROdW1iZXIgPSBmdW5jdGlvbiAobnVtLCBkZWNpbWFsKSB7XG4gICAgcmV0dXJuIE51bWJlcihudW0udG9GaXhlZChkZWNpbWFsKSk7XG59O1xuLyoqXG4gKiBDaGVja3MgaWYgdmFsdWUgaXMgbnVtYmVyLCBpZiBub3QgaXQgcmV0dXJucyBkZWZhdWx0IHZhbHVlXG4gKiAxIyBlZy4gY2hlY2tJc051bWJlcigyLCAzMCkgPT4gMlxuICogMiMgZWcuIGNoZWNrSXNOdW1iZXIobnVsbCwgMzApID0+IDMwXG4gKi9cbnZhciBjaGVja0lzTnVtYmVyID0gZnVuY3Rpb24gKG51bSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBudW0gPT09IFwibnVtYmVyXCIgPyBudW0gOiBkZWZhdWx0VmFsdWU7XG59O1xuXG52YXIgaGFuZGxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY29udGV4dCwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrKGNvbnRleHQsIGV2ZW50KTtcbiAgICB9XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbi8qKlxuICogRnVuY3Rpb25zIHNob3VsZCByZXR1cm4gZGVub21pbmF0b3Igb2YgdGhlIHRhcmdldCB2YWx1ZSwgd2hpY2ggaXMgdGhlIG5leHQgYW5pbWF0aW9uIHN0ZXAuXG4gKiB0IGlzIGEgdmFsdWUgZnJvbSAwIHRvIDEsIHJlZmxlY3RpbmcgdGhlIHBlcmNlbnRhZ2Ugb2YgYW5pbWF0aW9uIHN0YXR1cy5cbiAqL1xudmFyIGVhc2VPdXQgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiAtTWF0aC5jb3ModCAqIE1hdGguUEkpIC8gMiArIDAuNTtcbn07XG4vLyBsaW5lYXJcbnZhciBsaW5lYXIgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0O1xufTtcbi8vIGFjY2VsZXJhdGluZyBmcm9tIHplcm8gdmVsb2NpdHlcbnZhciBlYXNlSW5RdWFkID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdCAqIHQ7XG59O1xuLy8gZGVjZWxlcmF0aW5nIHRvIHplcm8gdmVsb2NpdHlcbnZhciBlYXNlT3V0UXVhZCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQgKiAoMiAtIHQpO1xufTtcbi8vIGFjY2VsZXJhdGlvbiB1bnRpbCBoYWxmd2F5LCB0aGVuIGRlY2VsZXJhdGlvblxudmFyIGVhc2VJbk91dFF1YWQgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0IDwgMC41ID8gMiAqIHQgKiB0IDogLTEgKyAoNCAtIDIgKiB0KSAqIHQ7XG59O1xuLy8gYWNjZWxlcmF0aW5nIGZyb20gemVybyB2ZWxvY2l0eVxudmFyIGVhc2VJbkN1YmljID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdCAqIHQgKiB0O1xufTtcbi8vIGRlY2VsZXJhdGluZyB0byB6ZXJvIHZlbG9jaXR5XG52YXIgZWFzZU91dEN1YmljID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gLS10ICogdCAqIHQgKyAxO1xufTtcbi8vIGFjY2VsZXJhdGlvbiB1bnRpbCBoYWxmd2F5LCB0aGVuIGRlY2VsZXJhdGlvblxudmFyIGVhc2VJbk91dEN1YmljID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdCA8IDAuNSA/IDQgKiB0ICogdCAqIHQgOiAodCAtIDEpICogKDIgKiB0IC0gMikgKiAoMiAqIHQgLSAyKSArIDE7XG59O1xuLy8gYWNjZWxlcmF0aW5nIGZyb20gemVybyB2ZWxvY2l0eVxudmFyIGVhc2VJblF1YXJ0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdCAqIHQgKiB0ICogdDtcbn07XG4vLyBkZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eVxudmFyIGVhc2VPdXRRdWFydCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIDEgLSAtLXQgKiB0ICogdCAqIHQ7XG59O1xuLy8gYWNjZWxlcmF0aW9uIHVudGlsIGhhbGZ3YXksIHRoZW4gZGVjZWxlcmF0aW9uXG52YXIgZWFzZUluT3V0UXVhcnQgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0IDwgMC41ID8gOCAqIHQgKiB0ICogdCAqIHQgOiAxIC0gOCAqIC0tdCAqIHQgKiB0ICogdDtcbn07XG4vLyBhY2NlbGVyYXRpbmcgZnJvbSB6ZXJvIHZlbG9jaXR5XG52YXIgZWFzZUluUXVpbnQgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0ICogdCAqIHQgKiB0ICogdDtcbn07XG4vLyBkZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eVxudmFyIGVhc2VPdXRRdWludCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIDEgKyAtLXQgKiB0ICogdCAqIHQgKiB0O1xufTtcbi8vIGFjY2VsZXJhdGlvbiB1bnRpbCBoYWxmd2F5LCB0aGVuIGRlY2VsZXJhdGlvblxudmFyIGVhc2VJbk91dFF1aW50ID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdCA8IDAuNSA/IDE2ICogdCAqIHQgKiB0ICogdCAqIHQgOiAxICsgMTYgKiAtLXQgKiB0ICogdCAqIHQgKiB0O1xufTtcbnZhciBhbmltYXRpb25zID0ge1xuICAgIGVhc2VPdXQ6IGVhc2VPdXQsXG4gICAgbGluZWFyOiBsaW5lYXIsXG4gICAgZWFzZUluUXVhZDogZWFzZUluUXVhZCxcbiAgICBlYXNlT3V0UXVhZDogZWFzZU91dFF1YWQsXG4gICAgZWFzZUluT3V0UXVhZDogZWFzZUluT3V0UXVhZCxcbiAgICBlYXNlSW5DdWJpYzogZWFzZUluQ3ViaWMsXG4gICAgZWFzZU91dEN1YmljOiBlYXNlT3V0Q3ViaWMsXG4gICAgZWFzZUluT3V0Q3ViaWM6IGVhc2VJbk91dEN1YmljLFxuICAgIGVhc2VJblF1YXJ0OiBlYXNlSW5RdWFydCxcbiAgICBlYXNlT3V0UXVhcnQ6IGVhc2VPdXRRdWFydCxcbiAgICBlYXNlSW5PdXRRdWFydDogZWFzZUluT3V0UXVhcnQsXG4gICAgZWFzZUluUXVpbnQ6IGVhc2VJblF1aW50LFxuICAgIGVhc2VPdXRRdWludDogZWFzZU91dFF1aW50LFxuICAgIGVhc2VJbk91dFF1aW50OiBlYXNlSW5PdXRRdWludCxcbn07XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG52YXIgaGFuZGxlQ2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoYW5pbWF0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiBhbmltYXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uKTtcbiAgICB9XG59O1xudmFyIGhhbmRsZUNhbmNlbEFuaW1hdGlvbiA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICBpZiAoIWNvbnRleHRJbnN0YW5jZS5tb3VudGVkKVxuICAgICAgICByZXR1cm47XG4gICAgaGFuZGxlQ2FuY2VsQW5pbWF0aW9uRnJhbWUoY29udGV4dEluc3RhbmNlLmFuaW1hdGlvbik7XG4gICAgLy8gQ2xlYXIgYW5pbWF0aW9uIHN0YXRlXG4gICAgY29udGV4dEluc3RhbmNlLmFuaW1hdGUgPSBmYWxzZTtcbiAgICBjb250ZXh0SW5zdGFuY2UuYW5pbWF0aW9uID0gbnVsbDtcbiAgICBjb250ZXh0SW5zdGFuY2UudmVsb2NpdHkgPSBudWxsO1xufTtcbmZ1bmN0aW9uIGhhbmRsZVNldHVwQW5pbWF0aW9uKGNvbnRleHRJbnN0YW5jZSwgYW5pbWF0aW9uTmFtZSwgYW5pbWF0aW9uVGltZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWNvbnRleHRJbnN0YW5jZS5tb3VudGVkKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHZhciBsYXN0U3RlcCA9IDE7XG4gICAgLy8gaWYgYW5vdGhlciBhbmltYXRpb24gaXMgYWN0aXZlXG4gICAgaGFuZGxlQ2FuY2VsQW5pbWF0aW9uKGNvbnRleHRJbnN0YW5jZSk7XG4gICAgLy8gbmV3IGFuaW1hdGlvblxuICAgIGNvbnRleHRJbnN0YW5jZS5hbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghY29udGV4dEluc3RhbmNlLm1vdW50ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDYW5jZWxBbmltYXRpb25GcmFtZShjb250ZXh0SW5zdGFuY2UuYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnJhbWVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWU7XG4gICAgICAgIHZhciBhbmltYXRpb25Qcm9ncmVzcyA9IGZyYW1lVGltZSAvIGFuaW1hdGlvblRpbWU7XG4gICAgICAgIHZhciBhbmltYXRpb25UeXBlID0gYW5pbWF0aW9uc1thbmltYXRpb25OYW1lXTtcbiAgICAgICAgdmFyIHN0ZXAgPSBhbmltYXRpb25UeXBlKGFuaW1hdGlvblByb2dyZXNzKTtcbiAgICAgICAgaWYgKGZyYW1lVGltZSA+PSBhbmltYXRpb25UaW1lKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhsYXN0U3RlcCk7XG4gICAgICAgICAgICBjb250ZXh0SW5zdGFuY2UuYW5pbWF0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb250ZXh0SW5zdGFuY2UuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhzdGVwKTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjb250ZXh0SW5zdGFuY2UuYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNvbnRleHRJbnN0YW5jZS5hbmltYXRpb24pO1xufVxuZnVuY3Rpb24gaXNWYWxpZFRhcmdldFN0YXRlKHRhcmdldFN0YXRlKSB7XG4gICAgdmFyIHNjYWxlID0gdGFyZ2V0U3RhdGUuc2NhbGUsIHBvc2l0aW9uWCA9IHRhcmdldFN0YXRlLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gdGFyZ2V0U3RhdGUucG9zaXRpb25ZO1xuICAgIGlmIChOdW1iZXIuaXNOYU4oc2NhbGUpIHx8XG4gICAgICAgIE51bWJlci5pc05hTihwb3NpdGlvblgpIHx8XG4gICAgICAgIE51bWJlci5pc05hTihwb3NpdGlvblkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBhbmltYXRlKGNvbnRleHRJbnN0YW5jZSwgdGFyZ2V0U3RhdGUsIGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvbk5hbWUpIHtcbiAgICB2YXIgaXNWYWxpZCA9IGlzVmFsaWRUYXJnZXRTdGF0ZSh0YXJnZXRTdGF0ZSk7XG4gICAgaWYgKCFjb250ZXh0SW5zdGFuY2UubW91bnRlZCB8fCAhaXNWYWxpZClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBzZXRUcmFuc2Zvcm1TdGF0ZSA9IGNvbnRleHRJbnN0YW5jZS5zZXRUcmFuc2Zvcm1TdGF0ZTtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUsIHNjYWxlID0gX2Euc2NhbGUsIHBvc2l0aW9uWCA9IF9hLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gX2EucG9zaXRpb25ZO1xuICAgIHZhciBzY2FsZURpZmYgPSB0YXJnZXRTdGF0ZS5zY2FsZSAtIHNjYWxlO1xuICAgIHZhciBwb3NpdGlvblhEaWZmID0gdGFyZ2V0U3RhdGUucG9zaXRpb25YIC0gcG9zaXRpb25YO1xuICAgIHZhciBwb3NpdGlvbllEaWZmID0gdGFyZ2V0U3RhdGUucG9zaXRpb25ZIC0gcG9zaXRpb25ZO1xuICAgIGlmIChhbmltYXRpb25UaW1lID09PSAwKSB7XG4gICAgICAgIHNldFRyYW5zZm9ybVN0YXRlKHRhcmdldFN0YXRlLnNjYWxlLCB0YXJnZXRTdGF0ZS5wb3NpdGlvblgsIHRhcmdldFN0YXRlLnBvc2l0aW9uWSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBhbmltYXRpb24gc3RhcnQgdGltZXN0YW1wXG4gICAgICAgIGhhbmRsZVNldHVwQW5pbWF0aW9uKGNvbnRleHRJbnN0YW5jZSwgYW5pbWF0aW9uTmFtZSwgYW5pbWF0aW9uVGltZSwgZnVuY3Rpb24gKHN0ZXApIHtcbiAgICAgICAgICAgIHZhciBuZXdTY2FsZSA9IHNjYWxlICsgc2NhbGVEaWZmICogc3RlcDtcbiAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvblggPSBwb3NpdGlvblggKyBwb3NpdGlvblhEaWZmICogc3RlcDtcbiAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvblkgPSBwb3NpdGlvblkgKyBwb3NpdGlvbllEaWZmICogc3RlcDtcbiAgICAgICAgICAgIHNldFRyYW5zZm9ybVN0YXRlKG5ld1NjYWxlLCBuZXdQb3NpdGlvblgsIG5ld1Bvc2l0aW9uWSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudHNTaXplcyh3cmFwcGVyQ29tcG9uZW50LCBjb250ZW50Q29tcG9uZW50LCBuZXdTY2FsZSkge1xuICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyQ29tcG9uZW50Lm9mZnNldFdpZHRoO1xuICAgIHZhciB3cmFwcGVySGVpZ2h0ID0gd3JhcHBlckNvbXBvbmVudC5vZmZzZXRIZWlnaHQ7XG4gICAgdmFyIGNvbnRlbnRXaWR0aCA9IGNvbnRlbnRDb21wb25lbnQub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50Q29tcG9uZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgbmV3Q29udGVudFdpZHRoID0gY29udGVudFdpZHRoICogbmV3U2NhbGU7XG4gICAgdmFyIG5ld0NvbnRlbnRIZWlnaHQgPSBjb250ZW50SGVpZ2h0ICogbmV3U2NhbGU7XG4gICAgdmFyIG5ld0RpZmZXaWR0aCA9IHdyYXBwZXJXaWR0aCAtIG5ld0NvbnRlbnRXaWR0aDtcbiAgICB2YXIgbmV3RGlmZkhlaWdodCA9IHdyYXBwZXJIZWlnaHQgLSBuZXdDb250ZW50SGVpZ2h0O1xuICAgIHJldHVybiB7XG4gICAgICAgIHdyYXBwZXJXaWR0aDogd3JhcHBlcldpZHRoLFxuICAgICAgICB3cmFwcGVySGVpZ2h0OiB3cmFwcGVySGVpZ2h0LFxuICAgICAgICBuZXdDb250ZW50V2lkdGg6IG5ld0NvbnRlbnRXaWR0aCxcbiAgICAgICAgbmV3RGlmZldpZHRoOiBuZXdEaWZmV2lkdGgsXG4gICAgICAgIG5ld0NvbnRlbnRIZWlnaHQ6IG5ld0NvbnRlbnRIZWlnaHQsXG4gICAgICAgIG5ld0RpZmZIZWlnaHQ6IG5ld0RpZmZIZWlnaHQsXG4gICAgfTtcbn1cbnZhciBnZXRCb3VuZHMgPSBmdW5jdGlvbiAod3JhcHBlcldpZHRoLCBuZXdDb250ZW50V2lkdGgsIGRpZmZXaWR0aCwgd3JhcHBlckhlaWdodCwgbmV3Q29udGVudEhlaWdodCwgZGlmZkhlaWdodCwgY2VudGVyWm9vbWVkT3V0KSB7XG4gICAgdmFyIHNjYWxlV2lkdGhGYWN0b3IgPSB3cmFwcGVyV2lkdGggPiBuZXdDb250ZW50V2lkdGhcbiAgICAgICAgPyBkaWZmV2lkdGggKiAoY2VudGVyWm9vbWVkT3V0ID8gMSA6IDAuNSlcbiAgICAgICAgOiAwO1xuICAgIHZhciBzY2FsZUhlaWdodEZhY3RvciA9IHdyYXBwZXJIZWlnaHQgPiBuZXdDb250ZW50SGVpZ2h0XG4gICAgICAgID8gZGlmZkhlaWdodCAqIChjZW50ZXJab29tZWRPdXQgPyAxIDogMC41KVxuICAgICAgICA6IDA7XG4gICAgdmFyIG1pblBvc2l0aW9uWCA9IHdyYXBwZXJXaWR0aCAtIG5ld0NvbnRlbnRXaWR0aCAtIHNjYWxlV2lkdGhGYWN0b3I7XG4gICAgdmFyIG1heFBvc2l0aW9uWCA9IHNjYWxlV2lkdGhGYWN0b3I7XG4gICAgdmFyIG1pblBvc2l0aW9uWSA9IHdyYXBwZXJIZWlnaHQgLSBuZXdDb250ZW50SGVpZ2h0IC0gc2NhbGVIZWlnaHRGYWN0b3I7XG4gICAgdmFyIG1heFBvc2l0aW9uWSA9IHNjYWxlSGVpZ2h0RmFjdG9yO1xuICAgIHJldHVybiB7IG1pblBvc2l0aW9uWDogbWluUG9zaXRpb25YLCBtYXhQb3NpdGlvblg6IG1heFBvc2l0aW9uWCwgbWluUG9zaXRpb25ZOiBtaW5Qb3NpdGlvblksIG1heFBvc2l0aW9uWTogbWF4UG9zaXRpb25ZIH07XG59O1xudmFyIGNhbGN1bGF0ZUJvdW5kcyA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIG5ld1NjYWxlKSB7XG4gICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgY29udGVudENvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS5jb250ZW50Q29tcG9uZW50O1xuICAgIHZhciBjZW50ZXJab29tZWRPdXQgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAuY2VudGVyWm9vbWVkT3V0O1xuICAgIGlmICghd3JhcHBlckNvbXBvbmVudCB8fCAhY29udGVudENvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21wb25lbnRzIGFyZSBub3QgbW91bnRlZFwiKTtcbiAgICB9XG4gICAgdmFyIF9hID0gZ2V0Q29tcG9uZW50c1NpemVzKHdyYXBwZXJDb21wb25lbnQsIGNvbnRlbnRDb21wb25lbnQsIG5ld1NjYWxlKSwgd3JhcHBlcldpZHRoID0gX2Eud3JhcHBlcldpZHRoLCB3cmFwcGVySGVpZ2h0ID0gX2Eud3JhcHBlckhlaWdodCwgbmV3Q29udGVudFdpZHRoID0gX2EubmV3Q29udGVudFdpZHRoLCBuZXdEaWZmV2lkdGggPSBfYS5uZXdEaWZmV2lkdGgsIG5ld0NvbnRlbnRIZWlnaHQgPSBfYS5uZXdDb250ZW50SGVpZ2h0LCBuZXdEaWZmSGVpZ2h0ID0gX2EubmV3RGlmZkhlaWdodDtcbiAgICB2YXIgYm91bmRzID0gZ2V0Qm91bmRzKHdyYXBwZXJXaWR0aCwgbmV3Q29udGVudFdpZHRoLCBuZXdEaWZmV2lkdGgsIHdyYXBwZXJIZWlnaHQsIG5ld0NvbnRlbnRIZWlnaHQsIG5ld0RpZmZIZWlnaHQsIEJvb2xlYW4oY2VudGVyWm9vbWVkT3V0KSk7XG4gICAgcmV0dXJuIGJvdW5kcztcbn07XG4vKipcbiAqIEtlZXBzIHZhbHVlIGJldHdlZW4gZ2l2ZW4gYm91bmRzLCB1c2VkIGZvciBsaW1pdGluZyB2aWV3IHRvIGdpdmVuIGJvdW5kYXJpZXNcbiAqIDEjIGVnLiBib3VuZExpbWl0ZXIoMiwgMCwgMywgdHJ1ZSkgPT4gMlxuICogMiMgZWcuIGJvdW5kTGltaXRlcig0LCAwLCAzLCB0cnVlKSA9PiAzXG4gKiAzIyBlZy4gYm91bmRMaW1pdGVyKC0yLCAwLCAzLCB0cnVlKSA9PiAwXG4gKiA0IyBlZy4gYm91bmRMaW1pdGVyKDEwLCAwLCAzLCBmYWxzZSkgPT4gMTBcbiAqL1xudmFyIGJvdW5kTGltaXRlciA9IGZ1bmN0aW9uICh2YWx1ZSwgbWluQm91bmQsIG1heEJvdW5kLCBpc0FjdGl2ZSkge1xuICAgIGlmICghaXNBY3RpdmUpXG4gICAgICAgIHJldHVybiByb3VuZE51bWJlcih2YWx1ZSwgMik7XG4gICAgaWYgKHZhbHVlIDwgbWluQm91bmQpXG4gICAgICAgIHJldHVybiByb3VuZE51bWJlcihtaW5Cb3VuZCwgMik7XG4gICAgaWYgKHZhbHVlID4gbWF4Qm91bmQpXG4gICAgICAgIHJldHVybiByb3VuZE51bWJlcihtYXhCb3VuZCwgMik7XG4gICAgcmV0dXJuIHJvdW5kTnVtYmVyKHZhbHVlLCAyKTtcbn07XG52YXIgaGFuZGxlQ2FsY3VsYXRlQm91bmRzID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgbmV3U2NhbGUpIHtcbiAgICB2YXIgYm91bmRzID0gY2FsY3VsYXRlQm91bmRzKGNvbnRleHRJbnN0YW5jZSwgbmV3U2NhbGUpO1xuICAgIC8vIFNhdmUgYm91bmRzXG4gICAgY29udGV4dEluc3RhbmNlLmJvdW5kcyA9IGJvdW5kcztcbiAgICByZXR1cm4gYm91bmRzO1xufTtcbmZ1bmN0aW9uIGdldE1vdXNlQm91bmRlZFBvc2l0aW9uKHBvc2l0aW9uWCwgcG9zaXRpb25ZLCBib3VuZHMsIGxpbWl0VG9Cb3VuZHMsIHBhZGRpbmdWYWx1ZVgsIHBhZGRpbmdWYWx1ZVksIHdyYXBwZXJDb21wb25lbnQpIHtcbiAgICB2YXIgbWluUG9zaXRpb25YID0gYm91bmRzLm1pblBvc2l0aW9uWCwgbWluUG9zaXRpb25ZID0gYm91bmRzLm1pblBvc2l0aW9uWSwgbWF4UG9zaXRpb25YID0gYm91bmRzLm1heFBvc2l0aW9uWCwgbWF4UG9zaXRpb25ZID0gYm91bmRzLm1heFBvc2l0aW9uWTtcbiAgICB2YXIgcGFkZGluZ1ggPSAwO1xuICAgIHZhciBwYWRkaW5nWSA9IDA7XG4gICAgaWYgKHdyYXBwZXJDb21wb25lbnQpIHtcbiAgICAgICAgcGFkZGluZ1ggPSBwYWRkaW5nVmFsdWVYO1xuICAgICAgICBwYWRkaW5nWSA9IHBhZGRpbmdWYWx1ZVk7XG4gICAgfVxuICAgIHZhciB4ID0gYm91bmRMaW1pdGVyKHBvc2l0aW9uWCwgbWluUG9zaXRpb25YIC0gcGFkZGluZ1gsIG1heFBvc2l0aW9uWCArIHBhZGRpbmdYLCBsaW1pdFRvQm91bmRzKTtcbiAgICB2YXIgeSA9IGJvdW5kTGltaXRlcihwb3NpdGlvblksIG1pblBvc2l0aW9uWSAtIHBhZGRpbmdZLCBtYXhQb3NpdGlvblkgKyBwYWRkaW5nWSwgbGltaXRUb0JvdW5kcyk7XG4gICAgcmV0dXJuIHsgeDogeCwgeTogeSB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYWxjdWxhdGVab29tUG9zaXRpb25zKGNvbnRleHRJbnN0YW5jZSwgbW91c2VYLCBtb3VzZVksIG5ld1NjYWxlLCBib3VuZHMsIGxpbWl0VG9Cb3VuZHMpIHtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUsIHNjYWxlID0gX2Euc2NhbGUsIHBvc2l0aW9uWCA9IF9hLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gX2EucG9zaXRpb25ZO1xuICAgIHZhciBzY2FsZURpZmZlcmVuY2UgPSBuZXdTY2FsZSAtIHNjYWxlO1xuICAgIGlmICh0eXBlb2YgbW91c2VYICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBtb3VzZVkgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk1vdXNlIFggYW5kIFkgcG9zaXRpb24gd2VyZSBub3QgcHJvdmlkZWQhXCIpO1xuICAgICAgICByZXR1cm4geyB4OiBwb3NpdGlvblgsIHk6IHBvc2l0aW9uWSB9O1xuICAgIH1cbiAgICB2YXIgY2FsY3VsYXRlZFBvc2l0aW9uWCA9IHBvc2l0aW9uWCAtIG1vdXNlWCAqIHNjYWxlRGlmZmVyZW5jZTtcbiAgICB2YXIgY2FsY3VsYXRlZFBvc2l0aW9uWSA9IHBvc2l0aW9uWSAtIG1vdXNlWSAqIHNjYWxlRGlmZmVyZW5jZTtcbiAgICAvLyBkbyBub3QgbGltaXQgdG8gYm91bmRzIHdoZW4gdGhlcmUgaXMgcGFkZGluZyBhbmltYXRpb24sXG4gICAgLy8gaXQgY2F1c2VzIGFuaW1hdGlvbiBzdHJhbmdlIGJlaGF2aW91clxuICAgIHZhciBuZXdQb3NpdGlvbnMgPSBnZXRNb3VzZUJvdW5kZWRQb3NpdGlvbihjYWxjdWxhdGVkUG9zaXRpb25YLCBjYWxjdWxhdGVkUG9zaXRpb25ZLCBib3VuZHMsIGxpbWl0VG9Cb3VuZHMsIDAsIDAsIG51bGwpO1xuICAgIHJldHVybiBuZXdQb3NpdGlvbnM7XG59XG5mdW5jdGlvbiBjaGVja1pvb21Cb3VuZHMoem9vbSwgbWluU2NhbGUsIG1heFNjYWxlLCB6b29tUGFkZGluZywgZW5hYmxlUGFkZGluZykge1xuICAgIHZhciBzY2FsZVBhZGRpbmcgPSBlbmFibGVQYWRkaW5nID8gem9vbVBhZGRpbmcgOiAwO1xuICAgIHZhciBtaW5TY2FsZVdpdGhQYWRkaW5nID0gbWluU2NhbGUgLSBzY2FsZVBhZGRpbmc7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4obWF4U2NhbGUpICYmIHpvb20gPj0gbWF4U2NhbGUpXG4gICAgICAgIHJldHVybiBtYXhTY2FsZTtcbiAgICBpZiAoIU51bWJlci5pc05hTihtaW5TY2FsZSkgJiYgem9vbSA8PSBtaW5TY2FsZVdpdGhQYWRkaW5nKVxuICAgICAgICByZXR1cm4gbWluU2NhbGVXaXRoUGFkZGluZztcbiAgICByZXR1cm4gem9vbTtcbn1cblxudmFyIGlzUGFubmluZ1N0YXJ0QWxsb3dlZCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIGV4Y2x1ZGVkID0gY29udGV4dEluc3RhbmNlLnNldHVwLnBhbm5pbmcuZXhjbHVkZWQ7XG4gICAgdmFyIGlzSW5pdGlhbGl6ZWQgPSBjb250ZXh0SW5zdGFuY2UuaXNJbml0aWFsaXplZCwgd3JhcHBlckNvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS53cmFwcGVyQ29tcG9uZW50O1xuICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgdmFyIHRhcmdldElzU2hhZG93RG9tID0gXCJzaGFkb3dSb290XCIgaW4gdGFyZ2V0ICYmIFwiY29tcG9zZWRQYXRoXCIgaW4gZXZlbnQ7XG4gICAgdmFyIGlzV3JhcHBlckNoaWxkID0gdGFyZ2V0SXNTaGFkb3dEb21cbiAgICAgICAgPyBldmVudC5jb21wb3NlZFBhdGgoKS5zb21lKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyQ29tcG9uZW50ID09PSBudWxsIHx8IHdyYXBwZXJDb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdyYXBwZXJDb21wb25lbnQuY29udGFpbnMoZWwpO1xuICAgICAgICB9KVxuICAgICAgICA6IHdyYXBwZXJDb21wb25lbnQgPT09IG51bGwgfHwgd3JhcHBlckNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogd3JhcHBlckNvbXBvbmVudC5jb250YWlucyh0YXJnZXQpO1xuICAgIHZhciBpc0FsbG93ZWQgPSBpc0luaXRpYWxpemVkICYmIHRhcmdldCAmJiBpc1dyYXBwZXJDaGlsZDtcbiAgICBpZiAoIWlzQWxsb3dlZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBpc0V4Y2x1ZGVkID0gaXNFeGNsdWRlZE5vZGUodGFyZ2V0LCBleGNsdWRlZCk7XG4gICAgaWYgKGlzRXhjbHVkZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgaXNQYW5uaW5nQWxsb3dlZCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICB2YXIgaXNJbml0aWFsaXplZCA9IGNvbnRleHRJbnN0YW5jZS5pc0luaXRpYWxpemVkLCBpc1Bhbm5pbmcgPSBjb250ZXh0SW5zdGFuY2UuaXNQYW5uaW5nLCBzZXR1cCA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cDtcbiAgICB2YXIgZGlzYWJsZWQgPSBzZXR1cC5wYW5uaW5nLmRpc2FibGVkO1xuICAgIHZhciBpc0FsbG93ZWQgPSBpc0luaXRpYWxpemVkICYmIGlzUGFubmluZyAmJiAhZGlzYWJsZWQ7XG4gICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgaGFuZGxlUGFubmluZ1NldHVwID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQpIHtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUsIHBvc2l0aW9uWCA9IF9hLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gX2EucG9zaXRpb25ZO1xuICAgIGNvbnRleHRJbnN0YW5jZS5pc1Bhbm5pbmcgPSB0cnVlO1xuICAgIC8vIFBhbm5pbmcgd2l0aCBtb3VzZVxuICAgIHZhciB4ID0gZXZlbnQuY2xpZW50WDtcbiAgICB2YXIgeSA9IGV2ZW50LmNsaWVudFk7XG4gICAgY29udGV4dEluc3RhbmNlLnN0YXJ0Q29vcmRzID0geyB4OiB4IC0gcG9zaXRpb25YLCB5OiB5IC0gcG9zaXRpb25ZIH07XG59O1xudmFyIGhhbmRsZVRvdWNoUGFubmluZ1NldHVwID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQpIHtcbiAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXM7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLCBwb3NpdGlvblggPSBfYS5wb3NpdGlvblgsIHBvc2l0aW9uWSA9IF9hLnBvc2l0aW9uWTtcbiAgICBjb250ZXh0SW5zdGFuY2UuaXNQYW5uaW5nID0gdHJ1ZTtcbiAgICAvLyBQYW5uaW5nIHdpdGggdG91Y2hcbiAgICB2YXIgb25lRmluZ2VyVG91Y2ggPSB0b3VjaGVzLmxlbmd0aCA9PT0gMTtcbiAgICBpZiAob25lRmluZ2VyVG91Y2gpIHtcbiAgICAgICAgdmFyIHggPSB0b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgIHZhciB5ID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICBjb250ZXh0SW5zdGFuY2Uuc3RhcnRDb29yZHMgPSB7IHg6IHggLSBwb3NpdGlvblgsIHk6IHkgLSBwb3NpdGlvblkgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gaGFuZGxlUGFuVG9Cb3VuZHMoY29udGV4dEluc3RhbmNlKSB7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLCBwb3NpdGlvblggPSBfYS5wb3NpdGlvblgsIHBvc2l0aW9uWSA9IF9hLnBvc2l0aW9uWSwgc2NhbGUgPSBfYS5zY2FsZTtcbiAgICB2YXIgX2IgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAsIGRpc2FibGVkID0gX2IuZGlzYWJsZWQsIGxpbWl0VG9Cb3VuZHMgPSBfYi5saW1pdFRvQm91bmRzLCBjZW50ZXJab29tZWRPdXQgPSBfYi5jZW50ZXJab29tZWRPdXQ7XG4gICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudDtcbiAgICBpZiAoZGlzYWJsZWQgfHwgIXdyYXBwZXJDb21wb25lbnQgfHwgIWNvbnRleHRJbnN0YW5jZS5ib3VuZHMpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgX2MgPSBjb250ZXh0SW5zdGFuY2UuYm91bmRzLCBtYXhQb3NpdGlvblggPSBfYy5tYXhQb3NpdGlvblgsIG1pblBvc2l0aW9uWCA9IF9jLm1pblBvc2l0aW9uWCwgbWF4UG9zaXRpb25ZID0gX2MubWF4UG9zaXRpb25ZLCBtaW5Qb3NpdGlvblkgPSBfYy5taW5Qb3NpdGlvblk7XG4gICAgdmFyIHhDaGFuZ2VkID0gcG9zaXRpb25YID4gbWF4UG9zaXRpb25YIHx8IHBvc2l0aW9uWCA8IG1pblBvc2l0aW9uWDtcbiAgICB2YXIgeUNoYW5nZWQgPSBwb3NpdGlvblkgPiBtYXhQb3NpdGlvblkgfHwgcG9zaXRpb25ZIDwgbWluUG9zaXRpb25ZO1xuICAgIHZhciBtb3VzZVBvc1ggPSBwb3NpdGlvblggPiBtYXhQb3NpdGlvblhcbiAgICAgICAgPyB3cmFwcGVyQ29tcG9uZW50Lm9mZnNldFdpZHRoXG4gICAgICAgIDogY29udGV4dEluc3RhbmNlLnNldHVwLm1pblBvc2l0aW9uWCB8fCAwO1xuICAgIHZhciBtb3VzZVBvc1kgPSBwb3NpdGlvblkgPiBtYXhQb3NpdGlvbllcbiAgICAgICAgPyB3cmFwcGVyQ29tcG9uZW50Lm9mZnNldEhlaWdodFxuICAgICAgICA6IGNvbnRleHRJbnN0YW5jZS5zZXR1cC5taW5Qb3NpdGlvblkgfHwgMDtcbiAgICB2YXIgX2QgPSBoYW5kbGVDYWxjdWxhdGVab29tUG9zaXRpb25zKGNvbnRleHRJbnN0YW5jZSwgbW91c2VQb3NYLCBtb3VzZVBvc1ksIHNjYWxlLCBjb250ZXh0SW5zdGFuY2UuYm91bmRzLCBsaW1pdFRvQm91bmRzIHx8IGNlbnRlclpvb21lZE91dCksIHggPSBfZC54LCB5ID0gX2QueTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzY2FsZTogc2NhbGUsXG4gICAgICAgIHBvc2l0aW9uWDogeENoYW5nZWQgPyB4IDogcG9zaXRpb25YLFxuICAgICAgICBwb3NpdGlvblk6IHlDaGFuZ2VkID8geSA6IHBvc2l0aW9uWSxcbiAgICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zaXRpb24oY29udGV4dEluc3RhbmNlLCBuZXdQb3NpdGlvblgsIG5ld1Bvc2l0aW9uWSwgcGFkZGluZ1ZhbHVlWCwgcGFkZGluZ1ZhbHVlWSkge1xuICAgIHZhciBsaW1pdFRvQm91bmRzID0gY29udGV4dEluc3RhbmNlLnNldHVwLmxpbWl0VG9Cb3VuZHM7XG4gICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgYm91bmRzID0gY29udGV4dEluc3RhbmNlLmJvdW5kcztcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUsIHNjYWxlID0gX2Euc2NhbGUsIHBvc2l0aW9uWCA9IF9hLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gX2EucG9zaXRpb25ZO1xuICAgIGlmICh3cmFwcGVyQ29tcG9uZW50ID09PSBudWxsIHx8XG4gICAgICAgIGJvdW5kcyA9PT0gbnVsbCB8fFxuICAgICAgICAobmV3UG9zaXRpb25YID09PSBwb3NpdGlvblggJiYgbmV3UG9zaXRpb25ZID09PSBwb3NpdGlvblkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIF9iID0gZ2V0TW91c2VCb3VuZGVkUG9zaXRpb24obmV3UG9zaXRpb25YLCBuZXdQb3NpdGlvblksIGJvdW5kcywgbGltaXRUb0JvdW5kcywgcGFkZGluZ1ZhbHVlWCwgcGFkZGluZ1ZhbHVlWSwgd3JhcHBlckNvbXBvbmVudCksIHggPSBfYi54LCB5ID0gX2IueTtcbiAgICBjb250ZXh0SW5zdGFuY2Uuc2V0VHJhbnNmb3JtU3RhdGUoc2NhbGUsIHgsIHkpO1xufVxudmFyIGdldFBhbm5pbmdDbGllbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGNsaWVudFgsIGNsaWVudFkpIHtcbiAgICB2YXIgc3RhcnRDb29yZHMgPSBjb250ZXh0SW5zdGFuY2Uuc3RhcnRDb29yZHMsIHRyYW5zZm9ybVN0YXRlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlO1xuICAgIHZhciBwYW5uaW5nID0gY29udGV4dEluc3RhbmNlLnNldHVwLnBhbm5pbmc7XG4gICAgdmFyIGxvY2tBeGlzWCA9IHBhbm5pbmcubG9ja0F4aXNYLCBsb2NrQXhpc1kgPSBwYW5uaW5nLmxvY2tBeGlzWTtcbiAgICB2YXIgcG9zaXRpb25YID0gdHJhbnNmb3JtU3RhdGUucG9zaXRpb25YLCBwb3NpdGlvblkgPSB0cmFuc2Zvcm1TdGF0ZS5wb3NpdGlvblk7XG4gICAgaWYgKCFzdGFydENvb3Jkcykge1xuICAgICAgICByZXR1cm4geyB4OiBwb3NpdGlvblgsIHk6IHBvc2l0aW9uWSB9O1xuICAgIH1cbiAgICB2YXIgbW91c2VYID0gY2xpZW50WCAtIHN0YXJ0Q29vcmRzLng7XG4gICAgdmFyIG1vdXNlWSA9IGNsaWVudFkgLSBzdGFydENvb3Jkcy55O1xuICAgIHZhciBuZXdQb3NpdGlvblggPSBsb2NrQXhpc1ggPyBwb3NpdGlvblggOiBtb3VzZVg7XG4gICAgdmFyIG5ld1Bvc2l0aW9uWSA9IGxvY2tBeGlzWSA/IHBvc2l0aW9uWSA6IG1vdXNlWTtcbiAgICByZXR1cm4geyB4OiBuZXdQb3NpdGlvblgsIHk6IG5ld1Bvc2l0aW9uWSB9O1xufTtcbnZhciBnZXRQYWRkaW5nVmFsdWUgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlLCBzaXplKSB7XG4gICAgdmFyIHNldHVwID0gY29udGV4dEluc3RhbmNlLnNldHVwLCB0cmFuc2Zvcm1TdGF0ZSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZTtcbiAgICB2YXIgc2NhbGUgPSB0cmFuc2Zvcm1TdGF0ZS5zY2FsZTtcbiAgICB2YXIgbWluU2NhbGUgPSBzZXR1cC5taW5TY2FsZSwgZGlzYWJsZVBhZGRpbmcgPSBzZXR1cC5kaXNhYmxlUGFkZGluZztcbiAgICBpZiAoc2l6ZSA+IDAgJiYgc2NhbGUgPj0gbWluU2NhbGUgJiYgIWRpc2FibGVQYWRkaW5nKSB7XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbn07XG5cbnZhciBpc1ZlbG9jaXR5Q2FsY3VsYXRpb25BbGxvd2VkID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSkge1xuICAgIHZhciBtb3VudGVkID0gY29udGV4dEluc3RhbmNlLm1vdW50ZWQ7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnNldHVwLCBkaXNhYmxlZCA9IF9hLmRpc2FibGVkLCB2ZWxvY2l0eUFuaW1hdGlvbiA9IF9hLnZlbG9jaXR5QW5pbWF0aW9uO1xuICAgIHZhciBzY2FsZSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5zY2FsZTtcbiAgICB2YXIgZGlzYWJsZWRWZWxvY2l0eSA9IHZlbG9jaXR5QW5pbWF0aW9uLmRpc2FibGVkO1xuICAgIHZhciBpc0FsbG93ZWQgPSAhZGlzYWJsZWRWZWxvY2l0eSB8fCBzY2FsZSA+IDEgfHwgIWRpc2FibGVkIHx8IG1vdW50ZWQ7XG4gICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgaXNWZWxvY2l0eUFsbG93ZWQgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlKSB7XG4gICAgdmFyIG1vdW50ZWQgPSBjb250ZXh0SW5zdGFuY2UubW91bnRlZCwgdmVsb2NpdHkgPSBjb250ZXh0SW5zdGFuY2UudmVsb2NpdHksIGJvdW5kcyA9IGNvbnRleHRJbnN0YW5jZS5ib3VuZHM7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnNldHVwLCBkaXNhYmxlZCA9IF9hLmRpc2FibGVkLCB2ZWxvY2l0eUFuaW1hdGlvbiA9IF9hLnZlbG9jaXR5QW5pbWF0aW9uO1xuICAgIHZhciBzY2FsZSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5zY2FsZTtcbiAgICB2YXIgZGlzYWJsZWRWZWxvY2l0eSA9IHZlbG9jaXR5QW5pbWF0aW9uLmRpc2FibGVkO1xuICAgIHZhciBpc0FsbG93ZWQgPSAhZGlzYWJsZWRWZWxvY2l0eSB8fCBzY2FsZSA+IDEgfHwgIWRpc2FibGVkIHx8IG1vdW50ZWQ7XG4gICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXZlbG9jaXR5IHx8ICFib3VuZHMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBnZXRWZWxvY2l0eU1vdmVUaW1lKGNvbnRleHRJbnN0YW5jZSwgdmVsb2NpdHkpIHtcbiAgICB2YXIgdmVsb2NpdHlBbmltYXRpb24gPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAudmVsb2NpdHlBbmltYXRpb247XG4gICAgdmFyIGVxdWFsVG9Nb3ZlID0gdmVsb2NpdHlBbmltYXRpb24uZXF1YWxUb01vdmUsIGFuaW1hdGlvblRpbWUgPSB2ZWxvY2l0eUFuaW1hdGlvbi5hbmltYXRpb25UaW1lLCBzZW5zaXRpdml0eSA9IHZlbG9jaXR5QW5pbWF0aW9uLnNlbnNpdGl2aXR5O1xuICAgIGlmIChlcXVhbFRvTW92ZSkge1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uVGltZSAqIHZlbG9jaXR5ICogc2Vuc2l0aXZpdHk7XG4gICAgfVxuICAgIHJldHVybiBhbmltYXRpb25UaW1lO1xufVxuZnVuY3Rpb24gZ2V0VmVsb2NpdHlQb3NpdGlvbihuZXdQb3NpdGlvbiwgc3RhcnRQb3NpdGlvbiwgY3VycmVudFBvc2l0aW9uLCBpc0xvY2tlZCwgbGltaXRUb0JvdW5kcywgbWluUG9zaXRpb24sIG1heFBvc2l0aW9uLCBtaW5UYXJnZXQsIG1heFRhcmdldCwgc3RlcCkge1xuICAgIGlmIChsaW1pdFRvQm91bmRzKSB7XG4gICAgICAgIGlmIChzdGFydFBvc2l0aW9uID4gbWF4UG9zaXRpb24gJiYgY3VycmVudFBvc2l0aW9uID4gbWF4UG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBjYWxjdWxhdGVkUG9zaXRpb24gPSBtYXhQb3NpdGlvbiArIChuZXdQb3NpdGlvbiAtIG1heFBvc2l0aW9uKSAqIHN0ZXA7XG4gICAgICAgICAgICBpZiAoY2FsY3VsYXRlZFBvc2l0aW9uID4gbWF4VGFyZ2V0KVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXhUYXJnZXQ7XG4gICAgICAgICAgICBpZiAoY2FsY3VsYXRlZFBvc2l0aW9uIDwgbWF4UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heFBvc2l0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZWRQb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRQb3NpdGlvbiA8IG1pblBvc2l0aW9uICYmIGN1cnJlbnRQb3NpdGlvbiA8IG1pblBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY2FsY3VsYXRlZFBvc2l0aW9uID0gbWluUG9zaXRpb24gKyAobmV3UG9zaXRpb24gLSBtaW5Qb3NpdGlvbikgKiBzdGVwO1xuICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZWRQb3NpdGlvbiA8IG1pblRhcmdldClcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluVGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZWRQb3NpdGlvbiA+IG1pblBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBtaW5Qb3NpdGlvbjtcbiAgICAgICAgICAgIHJldHVybiBjYWxjdWxhdGVkUG9zaXRpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzTG9ja2VkKVxuICAgICAgICByZXR1cm4gc3RhcnRQb3NpdGlvbjtcbiAgICByZXR1cm4gYm91bmRMaW1pdGVyKG5ld1Bvc2l0aW9uLCBtaW5Qb3NpdGlvbiwgbWF4UG9zaXRpb24sIGxpbWl0VG9Cb3VuZHMpO1xufVxuXG5mdW5jdGlvbiBnZXRTaXplTXVsdGlwbGllcih3cmFwcGVyQ29tcG9uZW50LCBlcXVhbFRvTW92ZSkge1xuICAgIHZhciBkZWZhdWx0TXVsdGlwbGllciA9IDE7XG4gICAgaWYgKGVxdWFsVG9Nb3ZlKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihkZWZhdWx0TXVsdGlwbGllciwgd3JhcHBlckNvbXBvbmVudC5vZmZzZXRXaWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRNdWx0aXBsaWVyO1xufVxuZnVuY3Rpb24gaGFuZGxlQ2FsY3VsYXRlVmVsb2NpdHkoY29udGV4dEluc3RhbmNlLCBwb3NpdGlvbikge1xuICAgIHZhciBpc0FsbG93ZWQgPSBpc1ZlbG9jaXR5Q2FsY3VsYXRpb25BbGxvd2VkKGNvbnRleHRJbnN0YW5jZSk7XG4gICAgaWYgKCFpc0FsbG93ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgbGFzdE1vdXNlUG9zaXRpb24gPSBjb250ZXh0SW5zdGFuY2UubGFzdE1vdXNlUG9zaXRpb24sIHZlbG9jaXR5VGltZSA9IGNvbnRleHRJbnN0YW5jZS52ZWxvY2l0eVRpbWUsIHNldHVwID0gY29udGV4dEluc3RhbmNlLnNldHVwO1xuICAgIHZhciB3cmFwcGVyQ29tcG9uZW50ID0gY29udGV4dEluc3RhbmNlLndyYXBwZXJDb21wb25lbnQ7XG4gICAgdmFyIGVxdWFsVG9Nb3ZlID0gc2V0dXAudmVsb2NpdHlBbmltYXRpb24uZXF1YWxUb01vdmU7XG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKGxhc3RNb3VzZVBvc2l0aW9uICYmIHZlbG9jaXR5VGltZSAmJiB3cmFwcGVyQ29tcG9uZW50KSB7XG4gICAgICAgIHZhciBzaXplTXVsdGlwbGllciA9IGdldFNpemVNdWx0aXBsaWVyKHdyYXBwZXJDb21wb25lbnQsIGVxdWFsVG9Nb3ZlKTtcbiAgICAgICAgdmFyIGRpc3RhbmNlWCA9IHBvc2l0aW9uLnggLSBsYXN0TW91c2VQb3NpdGlvbi54O1xuICAgICAgICB2YXIgZGlzdGFuY2VZID0gcG9zaXRpb24ueSAtIGxhc3RNb3VzZVBvc2l0aW9uLnk7XG4gICAgICAgIHZhciB2ZWxvY2l0eVggPSBkaXN0YW5jZVggLyBzaXplTXVsdGlwbGllcjtcbiAgICAgICAgdmFyIHZlbG9jaXR5WSA9IGRpc3RhbmNlWSAvIHNpemVNdWx0aXBsaWVyO1xuICAgICAgICB2YXIgaW50ZXJ2YWwgPSBub3cgLSB2ZWxvY2l0eVRpbWU7XG4gICAgICAgIHZhciBzcGVlZCA9IGRpc3RhbmNlWCAqIGRpc3RhbmNlWCArIGRpc3RhbmNlWSAqIGRpc3RhbmNlWTtcbiAgICAgICAgdmFyIHZlbG9jaXR5ID0gTWF0aC5zcXJ0KHNwZWVkKSAvIGludGVydmFsO1xuICAgICAgICBjb250ZXh0SW5zdGFuY2UudmVsb2NpdHkgPSB7IHZlbG9jaXR5WDogdmVsb2NpdHlYLCB2ZWxvY2l0eVk6IHZlbG9jaXR5WSwgdG90YWw6IHZlbG9jaXR5IH07XG4gICAgfVxuICAgIGNvbnRleHRJbnN0YW5jZS5sYXN0TW91c2VQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIGNvbnRleHRJbnN0YW5jZS52ZWxvY2l0eVRpbWUgPSBub3c7XG59XG5mdW5jdGlvbiBoYW5kbGVWZWxvY2l0eVBhbm5pbmcoY29udGV4dEluc3RhbmNlKSB7XG4gICAgdmFyIHZlbG9jaXR5ID0gY29udGV4dEluc3RhbmNlLnZlbG9jaXR5LCBib3VuZHMgPSBjb250ZXh0SW5zdGFuY2UuYm91bmRzLCBzZXR1cCA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cCwgd3JhcHBlckNvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS53cmFwcGVyQ29tcG9uZW50O1xuICAgIHZhciBpc0FsbG93ZWQgPSBpc1ZlbG9jaXR5QWxsb3dlZChjb250ZXh0SW5zdGFuY2UpO1xuICAgIGlmICghaXNBbGxvd2VkIHx8ICF2ZWxvY2l0eSB8fCAhYm91bmRzIHx8ICF3cmFwcGVyQ29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHZlbG9jaXR5WCA9IHZlbG9jaXR5LnZlbG9jaXR5WCwgdmVsb2NpdHlZID0gdmVsb2NpdHkudmVsb2NpdHlZLCB0b3RhbCA9IHZlbG9jaXR5LnRvdGFsO1xuICAgIHZhciBtYXhQb3NpdGlvblggPSBib3VuZHMubWF4UG9zaXRpb25YLCBtaW5Qb3NpdGlvblggPSBib3VuZHMubWluUG9zaXRpb25YLCBtYXhQb3NpdGlvblkgPSBib3VuZHMubWF4UG9zaXRpb25ZLCBtaW5Qb3NpdGlvblkgPSBib3VuZHMubWluUG9zaXRpb25ZO1xuICAgIHZhciBsaW1pdFRvQm91bmRzID0gc2V0dXAubGltaXRUb0JvdW5kcywgYWxpZ25tZW50QW5pbWF0aW9uID0gc2V0dXAuYWxpZ25tZW50QW5pbWF0aW9uO1xuICAgIHZhciB6b29tQW5pbWF0aW9uID0gc2V0dXAuem9vbUFuaW1hdGlvbiwgcGFubmluZyA9IHNldHVwLnBhbm5pbmc7XG4gICAgdmFyIGxvY2tBeGlzWSA9IHBhbm5pbmcubG9ja0F4aXNZLCBsb2NrQXhpc1ggPSBwYW5uaW5nLmxvY2tBeGlzWDtcbiAgICB2YXIgYW5pbWF0aW9uVHlwZSA9IHpvb21BbmltYXRpb24uYW5pbWF0aW9uVHlwZTtcbiAgICB2YXIgc2l6ZVggPSBhbGlnbm1lbnRBbmltYXRpb24uc2l6ZVgsIHNpemVZID0gYWxpZ25tZW50QW5pbWF0aW9uLnNpemVZLCB2ZWxvY2l0eUFsaWdubWVudFRpbWUgPSBhbGlnbm1lbnRBbmltYXRpb24udmVsb2NpdHlBbGlnbm1lbnRUaW1lO1xuICAgIHZhciBhbGlnbkFuaW1hdGlvblRpbWUgPSB2ZWxvY2l0eUFsaWdubWVudFRpbWU7XG4gICAgdmFyIG1vdmVBbmltYXRpb25UaW1lID0gZ2V0VmVsb2NpdHlNb3ZlVGltZShjb250ZXh0SW5zdGFuY2UsIHRvdGFsKTtcbiAgICB2YXIgZmluYWxBbmltYXRpb25UaW1lID0gTWF0aC5tYXgobW92ZUFuaW1hdGlvblRpbWUsIGFsaWduQW5pbWF0aW9uVGltZSk7XG4gICAgdmFyIHBhZGRpbmdWYWx1ZVggPSBnZXRQYWRkaW5nVmFsdWUoY29udGV4dEluc3RhbmNlLCBzaXplWCk7XG4gICAgdmFyIHBhZGRpbmdWYWx1ZVkgPSBnZXRQYWRkaW5nVmFsdWUoY29udGV4dEluc3RhbmNlLCBzaXplWSk7XG4gICAgdmFyIHBhZGRpbmdYID0gKHBhZGRpbmdWYWx1ZVggKiB3cmFwcGVyQ29tcG9uZW50Lm9mZnNldFdpZHRoKSAvIDEwMDtcbiAgICB2YXIgcGFkZGluZ1kgPSAocGFkZGluZ1ZhbHVlWSAqIHdyYXBwZXJDb21wb25lbnQub2Zmc2V0SGVpZ2h0KSAvIDEwMDtcbiAgICB2YXIgbWF4VGFyZ2V0WCA9IG1heFBvc2l0aW9uWCArIHBhZGRpbmdYO1xuICAgIHZhciBtaW5UYXJnZXRYID0gbWluUG9zaXRpb25YIC0gcGFkZGluZ1g7XG4gICAgdmFyIG1heFRhcmdldFkgPSBtYXhQb3NpdGlvblkgKyBwYWRkaW5nWTtcbiAgICB2YXIgbWluVGFyZ2V0WSA9IG1pblBvc2l0aW9uWSAtIHBhZGRpbmdZO1xuICAgIHZhciBzdGFydFN0YXRlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlO1xuICAgIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBoYW5kbGVTZXR1cEFuaW1hdGlvbihjb250ZXh0SW5zdGFuY2UsIGFuaW1hdGlvblR5cGUsIGZpbmFsQW5pbWF0aW9uVGltZSwgZnVuY3Rpb24gKHN0ZXApIHtcbiAgICAgICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLCBzY2FsZSA9IF9hLnNjYWxlLCBwb3NpdGlvblggPSBfYS5wb3NpdGlvblgsIHBvc2l0aW9uWSA9IF9hLnBvc2l0aW9uWTtcbiAgICAgICAgdmFyIGZyYW1lVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lO1xuICAgICAgICB2YXIgYW5pbWF0aW9uUHJvZ3Jlc3MgPSBmcmFtZVRpbWUgLyBhbGlnbkFuaW1hdGlvblRpbWU7XG4gICAgICAgIHZhciBhbGlnbkFuaW1hdGlvbiA9IGFuaW1hdGlvbnNbYWxpZ25tZW50QW5pbWF0aW9uLmFuaW1hdGlvblR5cGVdO1xuICAgICAgICB2YXIgYWxpZ25TdGVwID0gMSAtIGFsaWduQW5pbWF0aW9uKE1hdGgubWluKDEsIGFuaW1hdGlvblByb2dyZXNzKSk7XG4gICAgICAgIHZhciBjdXN0b21TdGVwID0gMSAtIHN0ZXA7XG4gICAgICAgIHZhciBuZXdQb3NpdGlvblggPSBwb3NpdGlvblggKyB2ZWxvY2l0eVggKiBjdXN0b21TdGVwO1xuICAgICAgICB2YXIgbmV3UG9zaXRpb25ZID0gcG9zaXRpb25ZICsgdmVsb2NpdHlZICogY3VzdG9tU3RlcDtcbiAgICAgICAgdmFyIGN1cnJlbnRQb3NpdGlvblggPSBnZXRWZWxvY2l0eVBvc2l0aW9uKG5ld1Bvc2l0aW9uWCwgc3RhcnRTdGF0ZS5wb3NpdGlvblgsIHBvc2l0aW9uWCwgbG9ja0F4aXNYLCBsaW1pdFRvQm91bmRzLCBtaW5Qb3NpdGlvblgsIG1heFBvc2l0aW9uWCwgbWluVGFyZ2V0WCwgbWF4VGFyZ2V0WCwgYWxpZ25TdGVwKTtcbiAgICAgICAgdmFyIGN1cnJlbnRQb3NpdGlvblkgPSBnZXRWZWxvY2l0eVBvc2l0aW9uKG5ld1Bvc2l0aW9uWSwgc3RhcnRTdGF0ZS5wb3NpdGlvblksIHBvc2l0aW9uWSwgbG9ja0F4aXNZLCBsaW1pdFRvQm91bmRzLCBtaW5Qb3NpdGlvblksIG1heFBvc2l0aW9uWSwgbWluVGFyZ2V0WSwgbWF4VGFyZ2V0WSwgYWxpZ25TdGVwKTtcbiAgICAgICAgaWYgKHBvc2l0aW9uWCAhPT0gbmV3UG9zaXRpb25YIHx8IHBvc2l0aW9uWSAhPT0gbmV3UG9zaXRpb25ZKSB7XG4gICAgICAgICAgICBjb250ZXh0SW5zdGFuY2Uuc2V0VHJhbnNmb3JtU3RhdGUoc2NhbGUsIGN1cnJlbnRQb3NpdGlvblgsIGN1cnJlbnRQb3NpdGlvblkpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBhbm5pbmdTdGFydChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIHNjYWxlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlO1xuICAgIGhhbmRsZUNhbmNlbEFuaW1hdGlvbihjb250ZXh0SW5zdGFuY2UpO1xuICAgIGhhbmRsZUNhbGN1bGF0ZUJvdW5kcyhjb250ZXh0SW5zdGFuY2UsIHNjYWxlKTtcbiAgICBpZiAod2luZG93LlRvdWNoRXZlbnQgIT09IHVuZGVmaW5lZCAmJiBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcbiAgICAgICAgaGFuZGxlVG91Y2hQYW5uaW5nU2V0dXAoY29udGV4dEluc3RhbmNlLCBldmVudCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBoYW5kbGVQYW5uaW5nU2V0dXAoY29udGV4dEluc3RhbmNlLCBldmVudCk7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFuZGxlQWxpZ25Ub0JvdW5kcyhjb250ZXh0SW5zdGFuY2UsIGN1c3RvbUFuaW1hdGlvblRpbWUpIHtcbiAgICB2YXIgc2NhbGUgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUuc2NhbGU7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnNldHVwLCBtaW5TY2FsZSA9IF9hLm1pblNjYWxlLCBhbGlnbm1lbnRBbmltYXRpb24gPSBfYS5hbGlnbm1lbnRBbmltYXRpb247XG4gICAgdmFyIGRpc2FibGVkID0gYWxpZ25tZW50QW5pbWF0aW9uLmRpc2FibGVkLCBzaXplWCA9IGFsaWdubWVudEFuaW1hdGlvbi5zaXplWCwgc2l6ZVkgPSBhbGlnbm1lbnRBbmltYXRpb24uc2l6ZVksIGFuaW1hdGlvblRpbWUgPSBhbGlnbm1lbnRBbmltYXRpb24uYW5pbWF0aW9uVGltZSwgYW5pbWF0aW9uVHlwZSA9IGFsaWdubWVudEFuaW1hdGlvbi5hbmltYXRpb25UeXBlO1xuICAgIHZhciBpc0Rpc2FibGVkID0gZGlzYWJsZWQgfHwgc2NhbGUgPCBtaW5TY2FsZSB8fCAoIXNpemVYICYmICFzaXplWSk7XG4gICAgaWYgKGlzRGlzYWJsZWQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgdGFyZ2V0U3RhdGUgPSBoYW5kbGVQYW5Ub0JvdW5kcyhjb250ZXh0SW5zdGFuY2UpO1xuICAgIGlmICh0YXJnZXRTdGF0ZSkge1xuICAgICAgICBhbmltYXRlKGNvbnRleHRJbnN0YW5jZSwgdGFyZ2V0U3RhdGUsIGN1c3RvbUFuaW1hdGlvblRpbWUgIT09IG51bGwgJiYgY3VzdG9tQW5pbWF0aW9uVGltZSAhPT0gdm9pZCAwID8gY3VzdG9tQW5pbWF0aW9uVGltZSA6IGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVBhbm5pbmcoY29udGV4dEluc3RhbmNlLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHN0YXJ0Q29vcmRzID0gY29udGV4dEluc3RhbmNlLnN0YXJ0Q29vcmRzLCBzZXR1cCA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cDtcbiAgICB2YXIgX2EgPSBzZXR1cC5hbGlnbm1lbnRBbmltYXRpb24sIHNpemVYID0gX2Euc2l6ZVgsIHNpemVZID0gX2Euc2l6ZVk7XG4gICAgaWYgKCFzdGFydENvb3JkcylcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBfYiA9IGdldFBhbm5pbmdDbGllbnRQb3NpdGlvbihjb250ZXh0SW5zdGFuY2UsIGNsaWVudFgsIGNsaWVudFkpLCB4ID0gX2IueCwgeSA9IF9iLnk7XG4gICAgdmFyIHBhZGRpbmdWYWx1ZVggPSBnZXRQYWRkaW5nVmFsdWUoY29udGV4dEluc3RhbmNlLCBzaXplWCk7XG4gICAgdmFyIHBhZGRpbmdWYWx1ZVkgPSBnZXRQYWRkaW5nVmFsdWUoY29udGV4dEluc3RhbmNlLCBzaXplWSk7XG4gICAgaGFuZGxlQ2FsY3VsYXRlVmVsb2NpdHkoY29udGV4dEluc3RhbmNlLCB7IHg6IHgsIHk6IHkgfSk7XG4gICAgaGFuZGxlTmV3UG9zaXRpb24oY29udGV4dEluc3RhbmNlLCB4LCB5LCBwYWRkaW5nVmFsdWVYLCBwYWRkaW5nVmFsdWVZKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZVBhbm5pbmdFbmQoY29udGV4dEluc3RhbmNlKSB7XG4gICAgaWYgKGNvbnRleHRJbnN0YW5jZS5pc1Bhbm5pbmcpIHtcbiAgICAgICAgdmFyIHZlbG9jaXR5RGlzYWJsZWQgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAucGFubmluZy52ZWxvY2l0eURpc2FibGVkO1xuICAgICAgICB2YXIgdmVsb2NpdHkgPSBjb250ZXh0SW5zdGFuY2UudmVsb2NpdHksIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgY29udGVudENvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS5jb250ZW50Q29tcG9uZW50O1xuICAgICAgICBjb250ZXh0SW5zdGFuY2UuaXNQYW5uaW5nID0gZmFsc2U7XG4gICAgICAgIGNvbnRleHRJbnN0YW5jZS5hbmltYXRlID0gZmFsc2U7XG4gICAgICAgIGNvbnRleHRJbnN0YW5jZS5hbmltYXRpb24gPSBudWxsO1xuICAgICAgICB2YXIgd3JhcHBlclJlY3QgPSB3cmFwcGVyQ29tcG9uZW50ID09PSBudWxsIHx8IHdyYXBwZXJDb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdyYXBwZXJDb21wb25lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBjb250ZW50UmVjdCA9IGNvbnRlbnRDb21wb25lbnQgPT09IG51bGwgfHwgY29udGVudENvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudENvbXBvbmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHdyYXBwZXJXaWR0aCA9ICh3cmFwcGVyUmVjdCA9PT0gbnVsbCB8fCB3cmFwcGVyUmVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogd3JhcHBlclJlY3Qud2lkdGgpIHx8IDA7XG4gICAgICAgIHZhciB3cmFwcGVySGVpZ2h0ID0gKHdyYXBwZXJSZWN0ID09PSBudWxsIHx8IHdyYXBwZXJSZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3cmFwcGVyUmVjdC5oZWlnaHQpIHx8IDA7XG4gICAgICAgIHZhciBjb250ZW50V2lkdGggPSAoY29udGVudFJlY3QgPT09IG51bGwgfHwgY29udGVudFJlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRlbnRSZWN0LndpZHRoKSB8fCAwO1xuICAgICAgICB2YXIgY29udGVudEhlaWdodCA9IChjb250ZW50UmVjdCA9PT0gbnVsbCB8fCBjb250ZW50UmVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudFJlY3QuaGVpZ2h0KSB8fCAwO1xuICAgICAgICB2YXIgaXNab29tZWQgPSB3cmFwcGVyV2lkdGggPCBjb250ZW50V2lkdGggfHwgd3JhcHBlckhlaWdodCA8IGNvbnRlbnRIZWlnaHQ7XG4gICAgICAgIHZhciBzaG91bGRBbmltYXRlID0gIXZlbG9jaXR5RGlzYWJsZWQgJiYgdmVsb2NpdHkgJiYgKHZlbG9jaXR5ID09PSBudWxsIHx8IHZlbG9jaXR5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2ZWxvY2l0eS50b3RhbCkgPiAwLjEgJiYgaXNab29tZWQ7XG4gICAgICAgIGlmIChzaG91bGRBbmltYXRlKSB7XG4gICAgICAgICAgICBoYW5kbGVWZWxvY2l0eVBhbm5pbmcoY29udGV4dEluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZUFsaWduVG9Cb3VuZHMoY29udGV4dEluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlWm9vbVRvUG9pbnQoY29udGV4dEluc3RhbmNlLCBzY2FsZSwgbW91c2VYLCBtb3VzZVkpIHtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAsIG1pblNjYWxlID0gX2EubWluU2NhbGUsIG1heFNjYWxlID0gX2EubWF4U2NhbGUsIGxpbWl0VG9Cb3VuZHMgPSBfYS5saW1pdFRvQm91bmRzO1xuICAgIHZhciBuZXdTY2FsZSA9IGNoZWNrWm9vbUJvdW5kcyhyb3VuZE51bWJlcihzY2FsZSwgMiksIG1pblNjYWxlLCBtYXhTY2FsZSwgMCwgZmFsc2UpO1xuICAgIHZhciBib3VuZHMgPSBoYW5kbGVDYWxjdWxhdGVCb3VuZHMoY29udGV4dEluc3RhbmNlLCBuZXdTY2FsZSk7XG4gICAgdmFyIF9iID0gaGFuZGxlQ2FsY3VsYXRlWm9vbVBvc2l0aW9ucyhjb250ZXh0SW5zdGFuY2UsIG1vdXNlWCwgbW91c2VZLCBuZXdTY2FsZSwgYm91bmRzLCBsaW1pdFRvQm91bmRzKSwgeCA9IF9iLngsIHkgPSBfYi55O1xuICAgIHJldHVybiB7IHNjYWxlOiBuZXdTY2FsZSwgcG9zaXRpb25YOiB4LCBwb3NpdGlvblk6IHkgfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUFsaWduVG9TY2FsZUJvdW5kcyhjb250ZXh0SW5zdGFuY2UsIG1vdXNlUG9zaXRpb25YLCBtb3VzZVBvc2l0aW9uWSkge1xuICAgIHZhciBzY2FsZSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5zY2FsZTtcbiAgICB2YXIgd3JhcHBlckNvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS53cmFwcGVyQ29tcG9uZW50O1xuICAgIHZhciBfYSA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cCwgbWluU2NhbGUgPSBfYS5taW5TY2FsZSwgbGltaXRUb0JvdW5kcyA9IF9hLmxpbWl0VG9Cb3VuZHMsIHpvb21BbmltYXRpb24gPSBfYS56b29tQW5pbWF0aW9uO1xuICAgIHZhciBkaXNhYmxlZCA9IHpvb21BbmltYXRpb24uZGlzYWJsZWQsIGFuaW1hdGlvblRpbWUgPSB6b29tQW5pbWF0aW9uLmFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUgPSB6b29tQW5pbWF0aW9uLmFuaW1hdGlvblR5cGU7XG4gICAgdmFyIGlzRGlzYWJsZWQgPSBkaXNhYmxlZCB8fCBzY2FsZSA+PSBtaW5TY2FsZTtcbiAgICBpZiAoc2NhbGUgPj0gMSB8fCBsaW1pdFRvQm91bmRzKSB7XG4gICAgICAgIC8vIGZpcmUgZml0IHRvIGJvdW5kcyBhbmltYXRpb25cbiAgICAgICAgaGFuZGxlQWxpZ25Ub0JvdW5kcyhjb250ZXh0SW5zdGFuY2UpO1xuICAgIH1cbiAgICBpZiAoaXNEaXNhYmxlZCB8fCAhd3JhcHBlckNvbXBvbmVudCB8fCAhY29udGV4dEluc3RhbmNlLm1vdW50ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbW91c2VYID0gbW91c2VQb3NpdGlvblggfHwgd3JhcHBlckNvbXBvbmVudC5vZmZzZXRXaWR0aCAvIDI7XG4gICAgdmFyIG1vdXNlWSA9IG1vdXNlUG9zaXRpb25ZIHx8IHdyYXBwZXJDb21wb25lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcbiAgICB2YXIgdGFyZ2V0U3RhdGUgPSBoYW5kbGVab29tVG9Qb2ludChjb250ZXh0SW5zdGFuY2UsIG1pblNjYWxlLCBtb3VzZVgsIG1vdXNlWSk7XG4gICAgaWYgKHRhcmdldFN0YXRlKSB7XG4gICAgICAgIGFuaW1hdGUoY29udGV4dEluc3RhbmNlLCB0YXJnZXRTdGF0ZSwgYW5pbWF0aW9uVGltZSwgYW5pbWF0aW9uVHlwZSk7XG4gICAgfVxufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbnR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xuXG52YXIgaW5pdGlhbFN0YXRlID0ge1xuICAgIHByZXZpb3VzU2NhbGU6IDEsXG4gICAgc2NhbGU6IDEsXG4gICAgcG9zaXRpb25YOiAwLFxuICAgIHBvc2l0aW9uWTogMCxcbn07XG52YXIgaW5pdGlhbFNldHVwID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBtaW5Qb3NpdGlvblg6IG51bGwsXG4gICAgbWF4UG9zaXRpb25YOiBudWxsLFxuICAgIG1pblBvc2l0aW9uWTogbnVsbCxcbiAgICBtYXhQb3NpdGlvblk6IG51bGwsXG4gICAgbWluU2NhbGU6IDEsXG4gICAgbWF4U2NhbGU6IDgsXG4gICAgbGltaXRUb0JvdW5kczogdHJ1ZSxcbiAgICBjZW50ZXJab29tZWRPdXQ6IGZhbHNlLFxuICAgIGNlbnRlck9uSW5pdDogZmFsc2UsXG4gICAgZGlzYWJsZVBhZGRpbmc6IGZhbHNlLFxuICAgIHNtb290aDogdHJ1ZSxcbiAgICB3aGVlbDoge1xuICAgICAgICBzdGVwOiAwLjIsXG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgc21vb3RoU3RlcDogMC4wMDEsXG4gICAgICAgIHdoZWVsRGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICB0b3VjaFBhZERpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgYWN0aXZhdGlvbktleXM6IFtdLFxuICAgICAgICBleGNsdWRlZDogW10sXG4gICAgfSxcbiAgICBwYW5uaW5nOiB7XG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgdmVsb2NpdHlEaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIGxvY2tBeGlzWDogZmFsc2UsXG4gICAgICAgIGxvY2tBeGlzWTogZmFsc2UsXG4gICAgICAgIGFsbG93TGVmdENsaWNrUGFuOiB0cnVlLFxuICAgICAgICBhbGxvd01pZGRsZUNsaWNrUGFuOiB0cnVlLFxuICAgICAgICBhbGxvd1JpZ2h0Q2xpY2tQYW46IHRydWUsXG4gICAgICAgIHdoZWVsUGFubmluZzogZmFsc2UsXG4gICAgICAgIGFjdGl2YXRpb25LZXlzOiBbXSxcbiAgICAgICAgZXhjbHVkZWQ6IFtdLFxuICAgIH0sXG4gICAgcGluY2g6IHtcbiAgICAgICAgc3RlcDogNSxcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICBleGNsdWRlZDogW10sXG4gICAgfSxcbiAgICBkb3VibGVDbGljazoge1xuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIHN0ZXA6IDAuNyxcbiAgICAgICAgbW9kZTogXCJ6b29tSW5cIixcbiAgICAgICAgYW5pbWF0aW9uVHlwZTogXCJlYXNlT3V0XCIsXG4gICAgICAgIGFuaW1hdGlvblRpbWU6IDIwMCxcbiAgICAgICAgZXhjbHVkZWQ6IFtdLFxuICAgIH0sXG4gICAgem9vbUFuaW1hdGlvbjoge1xuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIHNpemU6IDAuNCxcbiAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxuICAgICAgICBhbmltYXRpb25UeXBlOiBcImVhc2VPdXRcIixcbiAgICB9LFxuICAgIGFsaWdubWVudEFuaW1hdGlvbjoge1xuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIHNpemVYOiAxMDAsXG4gICAgICAgIHNpemVZOiAxMDAsXG4gICAgICAgIGFuaW1hdGlvblRpbWU6IDIwMCxcbiAgICAgICAgdmVsb2NpdHlBbGlnbm1lbnRUaW1lOiA0MDAsXG4gICAgICAgIGFuaW1hdGlvblR5cGU6IFwiZWFzZU91dFwiLFxuICAgIH0sXG4gICAgdmVsb2NpdHlBbmltYXRpb246IHtcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICBzZW5zaXRpdml0eTogMSxcbiAgICAgICAgYW5pbWF0aW9uVGltZTogNDAwLFxuICAgICAgICBhbmltYXRpb25UeXBlOiBcImVhc2VPdXRcIixcbiAgICAgICAgZXF1YWxUb01vdmU6IHRydWUsXG4gICAgfSxcbn07XG52YXIgYmFzZUNsYXNzZXMgPSB7XG4gICAgd3JhcHBlckNsYXNzOiBcInJlYWN0LXRyYW5zZm9ybS13cmFwcGVyXCIsXG4gICAgY29udGVudENsYXNzOiBcInJlYWN0LXRyYW5zZm9ybS1jb21wb25lbnRcIixcbn07XG5cbnZhciBjcmVhdGVTdGF0ZSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcmV2aW91c1NjYWxlOiAoX2EgPSBwcm9wcy5pbml0aWFsU2NhbGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGluaXRpYWxTdGF0ZS5zY2FsZSxcbiAgICAgICAgc2NhbGU6IChfYiA9IHByb3BzLmluaXRpYWxTY2FsZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogaW5pdGlhbFN0YXRlLnNjYWxlLFxuICAgICAgICBwb3NpdGlvblg6IChfYyA9IHByb3BzLmluaXRpYWxQb3NpdGlvblgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGluaXRpYWxTdGF0ZS5wb3NpdGlvblgsXG4gICAgICAgIHBvc2l0aW9uWTogKF9kID0gcHJvcHMuaW5pdGlhbFBvc2l0aW9uWSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogaW5pdGlhbFN0YXRlLnBvc2l0aW9uWSxcbiAgICB9O1xufTtcbnZhciBjcmVhdGVTZXR1cCA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHZhciBuZXdTZXR1cCA9IF9fYXNzaWduKHt9LCBpbml0aWFsU2V0dXApO1xuICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbGlkVmFsdWUgPSB0eXBlb2YgcHJvcHNba2V5XSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgdmFyIHZhbGlkUGFyYW1ldGVyID0gdHlwZW9mIGluaXRpYWxTZXR1cFtrZXldICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgICBpZiAodmFsaWRQYXJhbWV0ZXIgJiYgdmFsaWRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGFUeXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGluaXRpYWxTZXR1cFtrZXldKTtcbiAgICAgICAgICAgIHZhciBpc09iamVjdCA9IGRhdGFUeXBlID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xuICAgICAgICAgICAgdmFyIGlzQXJyYXkgPSBkYXRhVHlwZSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgbmV3U2V0dXBba2V5XSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbml0aWFsU2V0dXBba2V5XSksIHByb3BzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgICAgIG5ld1NldHVwW2tleV0gPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIGluaXRpYWxTZXR1cFtrZXldLCB0cnVlKSwgcHJvcHNba2V5XSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdTZXR1cFtrZXldID0gcHJvcHNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBuZXdTZXR1cDtcbn07XG5cbnZhciBoYW5kbGVDYWxjdWxhdGVCdXR0b25ab29tID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgZGVsdGEsIHN0ZXApIHtcbiAgICB2YXIgc2NhbGUgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUuc2NhbGU7XG4gICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgc2V0dXAgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXA7XG4gICAgdmFyIG1heFNjYWxlID0gc2V0dXAubWF4U2NhbGUsIG1pblNjYWxlID0gc2V0dXAubWluU2NhbGUsIHpvb21BbmltYXRpb24gPSBzZXR1cC56b29tQW5pbWF0aW9uLCBzbW9vdGggPSBzZXR1cC5zbW9vdGg7XG4gICAgdmFyIHNpemUgPSB6b29tQW5pbWF0aW9uLnNpemU7XG4gICAgaWYgKCF3cmFwcGVyQ29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyYXBwZXIgaXMgbm90IG1vdW50ZWRcIik7XG4gICAgfVxuICAgIHZhciB0YXJnZXRTY2FsZSA9IHNtb290aFxuICAgICAgICA/IHNjYWxlICogTWF0aC5leHAoZGVsdGEgKiBzdGVwKVxuICAgICAgICA6IHNjYWxlICsgZGVsdGEgKiBzdGVwO1xuICAgIHZhciBuZXdTY2FsZSA9IGNoZWNrWm9vbUJvdW5kcyhyb3VuZE51bWJlcih0YXJnZXRTY2FsZSwgMyksIG1pblNjYWxlLCBtYXhTY2FsZSwgc2l6ZSwgZmFsc2UpO1xuICAgIHJldHVybiBuZXdTY2FsZTtcbn07XG5mdW5jdGlvbiBoYW5kbGVab29tVG9WaWV3Q2VudGVyKGNvbnRleHRJbnN0YW5jZSwgZGVsdGEsIHN0ZXAsIGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUpIHtcbiAgICB2YXIgd3JhcHBlckNvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS53cmFwcGVyQ29tcG9uZW50O1xuICAgIHZhciBfYSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZSwgc2NhbGUgPSBfYS5zY2FsZSwgcG9zaXRpb25YID0gX2EucG9zaXRpb25YLCBwb3NpdGlvblkgPSBfYS5wb3NpdGlvblk7XG4gICAgaWYgKCF3cmFwcGVyQ29tcG9uZW50KVxuICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIk5vIFdyYXBwZXJDb21wb25lbnQgZm91bmRcIik7XG4gICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXJDb21wb25lbnQub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHdyYXBwZXJIZWlnaHQgPSB3cmFwcGVyQ29tcG9uZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgbW91c2VYID0gKHdyYXBwZXJXaWR0aCAvIDIgLSBwb3NpdGlvblgpIC8gc2NhbGU7XG4gICAgdmFyIG1vdXNlWSA9ICh3cmFwcGVySGVpZ2h0IC8gMiAtIHBvc2l0aW9uWSkgLyBzY2FsZTtcbiAgICB2YXIgbmV3U2NhbGUgPSBoYW5kbGVDYWxjdWxhdGVCdXR0b25ab29tKGNvbnRleHRJbnN0YW5jZSwgZGVsdGEsIHN0ZXApO1xuICAgIHZhciB0YXJnZXRTdGF0ZSA9IGhhbmRsZVpvb21Ub1BvaW50KGNvbnRleHRJbnN0YW5jZSwgbmV3U2NhbGUsIG1vdXNlWCwgbW91c2VZKTtcbiAgICBpZiAoIXRhcmdldFN0YXRlKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIHpvb20gZXZlbnQuIE5ldyB0cmFuc2Zvcm1hdGlvbiBzdGF0ZSB3YXMgbm90IGNhbGN1bGF0ZWQuXCIpO1xuICAgIH1cbiAgICBhbmltYXRlKGNvbnRleHRJbnN0YW5jZSwgdGFyZ2V0U3RhdGUsIGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUpO1xufVxuZnVuY3Rpb24gcmVzZXRUcmFuc2Zvcm1hdGlvbnMoY29udGV4dEluc3RhbmNlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlLCBvblJlc2V0VHJhbnNmb3JtYXRpb24pIHtcbiAgICB2YXIgc2V0dXAgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAsIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudDtcbiAgICB2YXIgbGltaXRUb0JvdW5kcyA9IHNldHVwLmxpbWl0VG9Cb3VuZHM7XG4gICAgdmFyIGluaXRpYWxUcmFuc2Zvcm1hdGlvbiA9IGNyZWF0ZVN0YXRlKGNvbnRleHRJbnN0YW5jZS5wcm9wcyk7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLCBzY2FsZSA9IF9hLnNjYWxlLCBwb3NpdGlvblggPSBfYS5wb3NpdGlvblgsIHBvc2l0aW9uWSA9IF9hLnBvc2l0aW9uWTtcbiAgICBpZiAoIXdyYXBwZXJDb21wb25lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbmV3Qm91bmRzID0gY2FsY3VsYXRlQm91bmRzKGNvbnRleHRJbnN0YW5jZSwgaW5pdGlhbFRyYW5zZm9ybWF0aW9uLnNjYWxlKTtcbiAgICB2YXIgYm91bmRlZFBvc2l0aW9ucyA9IGdldE1vdXNlQm91bmRlZFBvc2l0aW9uKGluaXRpYWxUcmFuc2Zvcm1hdGlvbi5wb3NpdGlvblgsIGluaXRpYWxUcmFuc2Zvcm1hdGlvbi5wb3NpdGlvblksIG5ld0JvdW5kcywgbGltaXRUb0JvdW5kcywgMCwgMCwgd3JhcHBlckNvbXBvbmVudCk7XG4gICAgdmFyIG5ld1N0YXRlID0ge1xuICAgICAgICBzY2FsZTogaW5pdGlhbFRyYW5zZm9ybWF0aW9uLnNjYWxlLFxuICAgICAgICBwb3NpdGlvblg6IGJvdW5kZWRQb3NpdGlvbnMueCxcbiAgICAgICAgcG9zaXRpb25ZOiBib3VuZGVkUG9zaXRpb25zLnksXG4gICAgfTtcbiAgICBpZiAoc2NhbGUgPT09IGluaXRpYWxUcmFuc2Zvcm1hdGlvbi5zY2FsZSAmJlxuICAgICAgICBwb3NpdGlvblggPT09IGluaXRpYWxUcmFuc2Zvcm1hdGlvbi5wb3NpdGlvblggJiZcbiAgICAgICAgcG9zaXRpb25ZID09PSBpbml0aWFsVHJhbnNmb3JtYXRpb24ucG9zaXRpb25ZKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb25SZXNldFRyYW5zZm9ybWF0aW9uID09PSBudWxsIHx8IG9uUmVzZXRUcmFuc2Zvcm1hdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25SZXNldFRyYW5zZm9ybWF0aW9uKCk7XG4gICAgYW5pbWF0ZShjb250ZXh0SW5zdGFuY2UsIG5ld1N0YXRlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKTtcbn1cbmZ1bmN0aW9uIGdldE9mZnNldChlbGVtZW50LCB3cmFwcGVyLCBjb250ZW50LCBzdGF0ZSkge1xuICAgIHZhciBvZmZzZXQgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciB3cmFwcGVyT2Zmc2V0ID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgY29udGVudE9mZnNldCA9IGNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHhPZmYgPSB3cmFwcGVyT2Zmc2V0LnggKiBzdGF0ZS5zY2FsZTtcbiAgICB2YXIgeU9mZiA9IHdyYXBwZXJPZmZzZXQueSAqIHN0YXRlLnNjYWxlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IChvZmZzZXQueCAtIGNvbnRlbnRPZmZzZXQueCArIHhPZmYpIC8gc3RhdGUuc2NhbGUsXG4gICAgICAgIHk6IChvZmZzZXQueSAtIGNvbnRlbnRPZmZzZXQueSArIHlPZmYpIC8gc3RhdGUuc2NhbGUsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZVpvb21Ub05vZGUoY29udGV4dEluc3RhbmNlLCBub2RlLCBjdXN0b21ab29tKSB7XG4gICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgY29udGVudENvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS5jb250ZW50Q29tcG9uZW50LCB0cmFuc2Zvcm1TdGF0ZSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZTtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAsIGxpbWl0VG9Cb3VuZHMgPSBfYS5saW1pdFRvQm91bmRzLCBtaW5TY2FsZSA9IF9hLm1pblNjYWxlLCBtYXhTY2FsZSA9IF9hLm1heFNjYWxlO1xuICAgIGlmICghd3JhcHBlckNvbXBvbmVudCB8fCAhY29udGVudENvbXBvbmVudClcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVN0YXRlO1xuICAgIHZhciB3cmFwcGVyUmVjdCA9IHdyYXBwZXJDb21wb25lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIG5vZGVSZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgbm9kZU9mZnNldCA9IGdldE9mZnNldChub2RlLCB3cmFwcGVyQ29tcG9uZW50LCBjb250ZW50Q29tcG9uZW50LCB0cmFuc2Zvcm1TdGF0ZSk7XG4gICAgdmFyIG5vZGVMZWZ0ID0gbm9kZU9mZnNldC54O1xuICAgIHZhciBub2RlVG9wID0gbm9kZU9mZnNldC55O1xuICAgIHZhciBub2RlV2lkdGggPSBub2RlUmVjdC53aWR0aCAvIHRyYW5zZm9ybVN0YXRlLnNjYWxlO1xuICAgIHZhciBub2RlSGVpZ2h0ID0gbm9kZVJlY3QuaGVpZ2h0IC8gdHJhbnNmb3JtU3RhdGUuc2NhbGU7XG4gICAgdmFyIHNjYWxlWCA9IHdyYXBwZXJDb21wb25lbnQub2Zmc2V0V2lkdGggLyBub2RlV2lkdGg7XG4gICAgdmFyIHNjYWxlWSA9IHdyYXBwZXJDb21wb25lbnQub2Zmc2V0SGVpZ2h0IC8gbm9kZUhlaWdodDtcbiAgICB2YXIgbmV3U2NhbGUgPSBjaGVja1pvb21Cb3VuZHMoY3VzdG9tWm9vbSB8fCBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSksIG1pblNjYWxlLCBtYXhTY2FsZSwgMCwgZmFsc2UpO1xuICAgIHZhciBvZmZzZXRYID0gKHdyYXBwZXJSZWN0LndpZHRoIC0gbm9kZVdpZHRoICogbmV3U2NhbGUpIC8gMjtcbiAgICB2YXIgb2Zmc2V0WSA9ICh3cmFwcGVyUmVjdC5oZWlnaHQgLSBub2RlSGVpZ2h0ICogbmV3U2NhbGUpIC8gMjtcbiAgICB2YXIgbmV3UG9zaXRpb25YID0gKHdyYXBwZXJSZWN0LmxlZnQgLSBub2RlTGVmdCkgKiBuZXdTY2FsZSArIG9mZnNldFg7XG4gICAgdmFyIG5ld1Bvc2l0aW9uWSA9ICh3cmFwcGVyUmVjdC50b3AgLSBub2RlVG9wKSAqIG5ld1NjYWxlICsgb2Zmc2V0WTtcbiAgICB2YXIgYm91bmRzID0gY2FsY3VsYXRlQm91bmRzKGNvbnRleHRJbnN0YW5jZSwgbmV3U2NhbGUpO1xuICAgIHZhciBfYiA9IGdldE1vdXNlQm91bmRlZFBvc2l0aW9uKG5ld1Bvc2l0aW9uWCwgbmV3UG9zaXRpb25ZLCBib3VuZHMsIGxpbWl0VG9Cb3VuZHMsIDAsIDAsIHdyYXBwZXJDb21wb25lbnQpLCB4ID0gX2IueCwgeSA9IF9iLnk7XG4gICAgcmV0dXJuIHsgcG9zaXRpb25YOiB4LCBwb3NpdGlvblk6IHksIHNjYWxlOiBuZXdTY2FsZSB9O1xufVxuXG52YXIgem9vbUluID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RlcCwgYW5pbWF0aW9uVGltZSwgYW5pbWF0aW9uVHlwZSkge1xuICAgICAgICBpZiAoc3RlcCA9PT0gdm9pZCAwKSB7IHN0ZXAgPSAwLjU7IH1cbiAgICAgICAgaWYgKGFuaW1hdGlvblRpbWUgPT09IHZvaWQgMCkgeyBhbmltYXRpb25UaW1lID0gMzAwOyB9XG4gICAgICAgIGlmIChhbmltYXRpb25UeXBlID09PSB2b2lkIDApIHsgYW5pbWF0aW9uVHlwZSA9IFwiZWFzZU91dFwiOyB9XG4gICAgICAgIGhhbmRsZVpvb21Ub1ZpZXdDZW50ZXIoY29udGV4dEluc3RhbmNlLCAxLCBzdGVwLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKTtcbiAgICB9O1xufTtcbnZhciB6b29tT3V0ID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RlcCwgYW5pbWF0aW9uVGltZSwgYW5pbWF0aW9uVHlwZSkge1xuICAgICAgICBpZiAoc3RlcCA9PT0gdm9pZCAwKSB7IHN0ZXAgPSAwLjU7IH1cbiAgICAgICAgaWYgKGFuaW1hdGlvblRpbWUgPT09IHZvaWQgMCkgeyBhbmltYXRpb25UaW1lID0gMzAwOyB9XG4gICAgICAgIGlmIChhbmltYXRpb25UeXBlID09PSB2b2lkIDApIHsgYW5pbWF0aW9uVHlwZSA9IFwiZWFzZU91dFwiOyB9XG4gICAgICAgIGhhbmRsZVpvb21Ub1ZpZXdDZW50ZXIoY29udGV4dEluc3RhbmNlLCAtMSwgc3RlcCwgYW5pbWF0aW9uVGltZSwgYW5pbWF0aW9uVHlwZSk7XG4gICAgfTtcbn07XG52YXIgc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobmV3UG9zaXRpb25YLCBuZXdQb3NpdGlvblksIG5ld1NjYWxlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25UaW1lID09PSB2b2lkIDApIHsgYW5pbWF0aW9uVGltZSA9IDMwMDsgfVxuICAgICAgICBpZiAoYW5pbWF0aW9uVHlwZSA9PT0gdm9pZCAwKSB7IGFuaW1hdGlvblR5cGUgPSBcImVhc2VPdXRcIjsgfVxuICAgICAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUsIHBvc2l0aW9uWCA9IF9hLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gX2EucG9zaXRpb25ZLCBzY2FsZSA9IF9hLnNjYWxlO1xuICAgICAgICB2YXIgd3JhcHBlckNvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS53cmFwcGVyQ29tcG9uZW50LCBjb250ZW50Q29tcG9uZW50ID0gY29udGV4dEluc3RhbmNlLmNvbnRlbnRDb21wb25lbnQ7XG4gICAgICAgIHZhciBkaXNhYmxlZCA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cC5kaXNhYmxlZDtcbiAgICAgICAgaWYgKGRpc2FibGVkIHx8ICF3cmFwcGVyQ29tcG9uZW50IHx8ICFjb250ZW50Q29tcG9uZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB7XG4gICAgICAgICAgICBwb3NpdGlvblg6IE51bWJlci5pc05hTihuZXdQb3NpdGlvblgpID8gcG9zaXRpb25YIDogbmV3UG9zaXRpb25YLFxuICAgICAgICAgICAgcG9zaXRpb25ZOiBOdW1iZXIuaXNOYU4obmV3UG9zaXRpb25ZKSA/IHBvc2l0aW9uWSA6IG5ld1Bvc2l0aW9uWSxcbiAgICAgICAgICAgIHNjYWxlOiBOdW1iZXIuaXNOYU4obmV3U2NhbGUpID8gc2NhbGUgOiBuZXdTY2FsZSxcbiAgICAgICAgfTtcbiAgICAgICAgYW5pbWF0ZShjb250ZXh0SW5zdGFuY2UsIHRhcmdldFN0YXRlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKTtcbiAgICB9O1xufTtcbnZhciByZXNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvblRpbWUgPT09IHZvaWQgMCkgeyBhbmltYXRpb25UaW1lID0gMjAwOyB9XG4gICAgICAgIGlmIChhbmltYXRpb25UeXBlID09PSB2b2lkIDApIHsgYW5pbWF0aW9uVHlwZSA9IFwiZWFzZU91dFwiOyB9XG4gICAgICAgIHJlc2V0VHJhbnNmb3JtYXRpb25zKGNvbnRleHRJbnN0YW5jZSwgYW5pbWF0aW9uVGltZSwgYW5pbWF0aW9uVHlwZSk7XG4gICAgfTtcbn07XG52YXIgY2VudGVyVmlldyA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjYWxlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25UaW1lID09PSB2b2lkIDApIHsgYW5pbWF0aW9uVGltZSA9IDIwMDsgfVxuICAgICAgICBpZiAoYW5pbWF0aW9uVHlwZSA9PT0gdm9pZCAwKSB7IGFuaW1hdGlvblR5cGUgPSBcImVhc2VPdXRcIjsgfVxuICAgICAgICB2YXIgdHJhbnNmb3JtU3RhdGUgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUsIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgY29udGVudENvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS5jb250ZW50Q29tcG9uZW50O1xuICAgICAgICBpZiAod3JhcHBlckNvbXBvbmVudCAmJiBjb250ZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSBnZXRDZW50ZXJQb3NpdGlvbihzY2FsZSB8fCB0cmFuc2Zvcm1TdGF0ZS5zY2FsZSwgd3JhcHBlckNvbXBvbmVudCwgY29udGVudENvbXBvbmVudCk7XG4gICAgICAgICAgICBhbmltYXRlKGNvbnRleHRJbnN0YW5jZSwgdGFyZ2V0U3RhdGUsIGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG52YXIgem9vbVRvRWxlbWVudCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5vZGUsIHNjYWxlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25UaW1lID09PSB2b2lkIDApIHsgYW5pbWF0aW9uVGltZSA9IDYwMDsgfVxuICAgICAgICBpZiAoYW5pbWF0aW9uVHlwZSA9PT0gdm9pZCAwKSB7IGFuaW1hdGlvblR5cGUgPSBcImVhc2VPdXRcIjsgfVxuICAgICAgICBoYW5kbGVDYW5jZWxBbmltYXRpb24oY29udGV4dEluc3RhbmNlKTtcbiAgICAgICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudDtcbiAgICAgICAgdmFyIHRhcmdldCA9IHR5cGVvZiBub2RlID09PSBcInN0cmluZ1wiID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm9kZSkgOiBub2RlO1xuICAgICAgICBpZiAod3JhcHBlckNvbXBvbmVudCAmJiB0YXJnZXQgJiYgd3JhcHBlckNvbXBvbmVudC5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSBjYWxjdWxhdGVab29tVG9Ob2RlKGNvbnRleHRJbnN0YW5jZSwgdGFyZ2V0LCBzY2FsZSk7XG4gICAgICAgICAgICBhbmltYXRlKGNvbnRleHRJbnN0YW5jZSwgdGFyZ2V0U3RhdGUsIGFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbnZhciBnZXRDb250cm9scyA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnN0YW5jZTogY29udGV4dEluc3RhbmNlLFxuICAgICAgICB6b29tSW46IHpvb21Jbihjb250ZXh0SW5zdGFuY2UpLFxuICAgICAgICB6b29tT3V0OiB6b29tT3V0KGNvbnRleHRJbnN0YW5jZSksXG4gICAgICAgIHNldFRyYW5zZm9ybTogc2V0VHJhbnNmb3JtKGNvbnRleHRJbnN0YW5jZSksXG4gICAgICAgIHJlc2V0VHJhbnNmb3JtOiByZXNldFRyYW5zZm9ybShjb250ZXh0SW5zdGFuY2UpLFxuICAgICAgICBjZW50ZXJWaWV3OiBjZW50ZXJWaWV3KGNvbnRleHRJbnN0YW5jZSksXG4gICAgICAgIHpvb21Ub0VsZW1lbnQ6IHpvb21Ub0VsZW1lbnQoY29udGV4dEluc3RhbmNlKSxcbiAgICB9O1xufTtcbnZhciBnZXRTdGF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnN0YW5jZTogY29udGV4dEluc3RhbmNlLFxuICAgICAgICBzdGF0ZTogY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLFxuICAgIH07XG59O1xudmFyIGdldENvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlKSB7XG4gICAgdmFyIHJlZiA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ocmVmLCBnZXRTdGF0ZShjb250ZXh0SW5zdGFuY2UpKTtcbiAgICBPYmplY3QuYXNzaWduKHJlZiwgZ2V0Q29udHJvbHMoY29udGV4dEluc3RhbmNlKSk7XG4gICAgcmV0dXJuIHJlZjtcbn07XG5cbi8vIFdlIHdhbnQgdG8gbWFrZSBldmVudCBsaXN0ZW5lcnMgbm9uLXBhc3NpdmUsIGFuZCB0byBkbyBzbyBoYXZlIHRvIGNoZWNrXG4vLyB0aGF0IGJyb3dzZXJzIHN1cHBvcnQgRXZlbnRMaXN0ZW5lck9wdGlvbnMgaW4gdGhlIGZpcnN0IHBsYWNlLlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0V2ZW50VGFyZ2V0L2FkZEV2ZW50TGlzdGVuZXIjU2FmZWx5X2RldGVjdGluZ19vcHRpb25fc3VwcG9ydFxudmFyIHBhc3NpdmVTdXBwb3J0ZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIG1ha2VQYXNzaXZlRXZlbnRPcHRpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBnZXQgcGFzc2l2ZSgpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyAgIGF0dGVtcHRzIHRvIGFjY2VzcyB0aGUgcGFzc2l2ZSBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICBwYXNzaXZlU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBwYXNzaXZlU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBwYXNzaXZlU3VwcG9ydGVkO1xuICAgIH1cbn1cblxudmFyIG1hdGNoUHJlZml4ID0gXCIuXCIuY29uY2F0KGJhc2VDbGFzc2VzLndyYXBwZXJDbGFzcyk7XG52YXIgaXNFeGNsdWRlZE5vZGUgPSBmdW5jdGlvbiAobm9kZSwgZXhjbHVkZWQpIHtcbiAgICByZXR1cm4gZXhjbHVkZWQuc29tZShmdW5jdGlvbiAoZXhjbHVkZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5tYXRjaGVzKFwiXCIuY29uY2F0KG1hdGNoUHJlZml4LCBcIiBcIikuY29uY2F0KGV4Y2x1ZGUsIFwiLCBcIikuY29uY2F0KG1hdGNoUHJlZml4LCBcIiAuXCIpLmNvbmNhdChleGNsdWRlLCBcIiwgXCIpLmNvbmNhdChtYXRjaFByZWZpeCwgXCIgXCIpLmNvbmNhdChleGNsdWRlLCBcIiAqLCBcIikuY29uY2F0KG1hdGNoUHJlZml4LCBcIiAuXCIpLmNvbmNhdChleGNsdWRlLCBcIiAqXCIpKTtcbiAgICB9KTtcbn07XG52YXIgY2FuY2VsVGltZW91dCA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH1cbn07XG5cbnZhciBnZXRUcmFuc2Zvcm1TdHlsZXMgPSBmdW5jdGlvbiAoeCwgeSwgc2NhbGUpIHtcbiAgICAvLyBTdGFuZGFyZCB0cmFuc2xhdGUgcHJldmVudHMgYmx1cnJ5IHN2ZyBvbiB0aGUgc2FmYXJpXG4gICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiLmNvbmNhdCh4LCBcInB4LCBcIikuY29uY2F0KHksIFwicHgpIHNjYWxlKFwiKS5jb25jYXQoc2NhbGUsIFwiKVwiKTtcbn07XG52YXIgZ2V0TWF0cml4VHJhbnNmb3JtU3R5bGVzID0gZnVuY3Rpb24gKHgsIHksIHNjYWxlKSB7XG4gICAgLy8gVGhlIHNob3J0aGFuZCBmb3IgbWF0cml4IGRvZXMgbm90IHdvcmsgZm9yIFNhZmFyaSBoZW5jZSB0aGUgbmVlZCB0byBleHBsaWNpdGx5IHVzZSBtYXRyaXgzZFxuICAgIC8vIFJlZmVyIHRvIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy90cmFuc2Zvcm0tZnVuY3Rpb24vbWF0cml4XG4gICAgdmFyIGEgPSBzY2FsZTtcbiAgICB2YXIgYiA9IDA7XG4gICAgdmFyIGMgPSAwO1xuICAgIHZhciBkID0gc2NhbGU7XG4gICAgdmFyIHR4ID0geDtcbiAgICB2YXIgdHkgPSB5O1xuICAgIHJldHVybiBcIm1hdHJpeDNkKFwiLmNvbmNhdChhLCBcIiwgXCIpLmNvbmNhdChiLCBcIiwgMCwgMCwgXCIpLmNvbmNhdChjLCBcIiwgXCIpLmNvbmNhdChkLCBcIiwgMCwgMCwgMCwgMCwgMSwgMCwgXCIpLmNvbmNhdCh0eCwgXCIsIFwiKS5jb25jYXQodHksIFwiLCAwLCAxKVwiKTtcbn07XG52YXIgZ2V0Q2VudGVyUG9zaXRpb24gPSBmdW5jdGlvbiAoc2NhbGUsIHdyYXBwZXJDb21wb25lbnQsIGNvbnRlbnRDb21wb25lbnQpIHtcbiAgICB2YXIgY29udGVudFdpZHRoID0gY29udGVudENvbXBvbmVudC5vZmZzZXRXaWR0aCAqIHNjYWxlO1xuICAgIHZhciBjb250ZW50SGVpZ2h0ID0gY29udGVudENvbXBvbmVudC5vZmZzZXRIZWlnaHQgKiBzY2FsZTtcbiAgICB2YXIgY2VudGVyUG9zaXRpb25YID0gKHdyYXBwZXJDb21wb25lbnQub2Zmc2V0V2lkdGggLSBjb250ZW50V2lkdGgpIC8gMjtcbiAgICB2YXIgY2VudGVyUG9zaXRpb25ZID0gKHdyYXBwZXJDb21wb25lbnQub2Zmc2V0SGVpZ2h0IC0gY29udGVudEhlaWdodCkgLyAyO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNjYWxlOiBzY2FsZSxcbiAgICAgICAgcG9zaXRpb25YOiBjZW50ZXJQb3NpdGlvblgsXG4gICAgICAgIHBvc2l0aW9uWTogY2VudGVyUG9zaXRpb25ZLFxuICAgIH07XG59O1xuXG5mdW5jdGlvbiBtZXJnZVJlZnMocmVmcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmVmcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZWYodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG52YXIgaXNXaGVlbEFsbG93ZWQgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlLCBldmVudCkge1xuICAgIHZhciBfYSA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cC53aGVlbCwgZGlzYWJsZWQgPSBfYS5kaXNhYmxlZCwgd2hlZWxEaXNhYmxlZCA9IF9hLndoZWVsRGlzYWJsZWQsIHRvdWNoUGFkRGlzYWJsZWQgPSBfYS50b3VjaFBhZERpc2FibGVkLCBleGNsdWRlZCA9IF9hLmV4Y2x1ZGVkO1xuICAgIHZhciBpc0luaXRpYWxpemVkID0gY29udGV4dEluc3RhbmNlLmlzSW5pdGlhbGl6ZWQsIGlzUGFubmluZyA9IGNvbnRleHRJbnN0YW5jZS5pc1Bhbm5pbmc7XG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICB2YXIgaXNBbGxvd2VkID0gaXNJbml0aWFsaXplZCAmJiAhaXNQYW5uaW5nICYmICFkaXNhYmxlZCAmJiB0YXJnZXQ7XG4gICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBFdmVudCBjdHJsS2V5IGRldGVjdHMgaWYgdG91Y2hwYWQgYWN0aW9uIGlzIGV4ZWN1dGluZyB3aGVlbCBvciBwaW5jaCBnZXN0dXJlXG4gICAgaWYgKHdoZWVsRGlzYWJsZWQgJiYgIWV2ZW50LmN0cmxLZXkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAodG91Y2hQYWREaXNhYmxlZCAmJiBldmVudC5jdHJsS2V5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGlzRXhjbHVkZWQgPSBpc0V4Y2x1ZGVkTm9kZSh0YXJnZXQsIGV4Y2x1ZGVkKTtcbiAgICBpZiAoaXNFeGNsdWRlZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufTtcbnZhciBnZXREZWx0YVkgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LmRlbHRhWSA8IDAgPyAxIDogLTE7XG4gICAgfVxuICAgIHJldHVybiAwO1xufTtcbmZ1bmN0aW9uIGdldERlbHRhKGV2ZW50LCBjdXN0b21EZWx0YSkge1xuICAgIHZhciBkZWx0YVkgPSBnZXREZWx0YVkoZXZlbnQpO1xuICAgIHZhciBkZWx0YSA9IGNoZWNrSXNOdW1iZXIoY3VzdG9tRGVsdGEsIGRlbHRhWSk7XG4gICAgcmV0dXJuIGRlbHRhO1xufVxuZnVuY3Rpb24gZ2V0TW91c2VQb3NpdGlvbihldmVudCwgY29udGVudENvbXBvbmVudCwgc2NhbGUpIHtcbiAgICB2YXIgY29udGVudFJlY3QgPSBjb250ZW50Q29tcG9uZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBtb3VzZVggPSAwO1xuICAgIHZhciBtb3VzZVkgPSAwO1xuICAgIGlmIChcImNsaWVudFhcIiBpbiBldmVudCkge1xuICAgICAgICAvLyBtb3VzZSBwb3NpdGlvbiB4LCB5IG92ZXIgd3JhcHBlciBjb21wb25lbnRcbiAgICAgICAgbW91c2VYID0gKGV2ZW50LmNsaWVudFggLSBjb250ZW50UmVjdC5sZWZ0KSAvIHNjYWxlO1xuICAgICAgICBtb3VzZVkgPSAoZXZlbnQuY2xpZW50WSAtIGNvbnRlbnRSZWN0LnRvcCkgLyBzY2FsZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF07XG4gICAgICAgIG1vdXNlWCA9ICh0b3VjaC5jbGllbnRYIC0gY29udGVudFJlY3QubGVmdCkgLyBzY2FsZTtcbiAgICAgICAgbW91c2VZID0gKHRvdWNoLmNsaWVudFkgLSBjb250ZW50UmVjdC50b3ApIC8gc2NhbGU7XG4gICAgfVxuICAgIGlmIChOdW1iZXIuaXNOYU4obW91c2VYKSB8fCBOdW1iZXIuaXNOYU4obW91c2VZKSlcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIG1vdXNlIG9yIHRvdWNoIG9mZnNldCBmb3VuZFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBtb3VzZVgsXG4gICAgICAgIHk6IG1vdXNlWSxcbiAgICB9O1xufVxudmFyIGhhbmRsZUNhbGN1bGF0ZVdoZWVsWm9vbSA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGRlbHRhLCBzdGVwLCBkaXNhYmxlLCBnZXRUYXJnZXQpIHtcbiAgICB2YXIgc2NhbGUgPSBjb250ZXh0SW5zdGFuY2UudHJhbnNmb3JtU3RhdGUuc2NhbGU7XG4gICAgdmFyIHdyYXBwZXJDb21wb25lbnQgPSBjb250ZXh0SW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCwgc2V0dXAgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXA7XG4gICAgdmFyIG1heFNjYWxlID0gc2V0dXAubWF4U2NhbGUsIG1pblNjYWxlID0gc2V0dXAubWluU2NhbGUsIHpvb21BbmltYXRpb24gPSBzZXR1cC56b29tQW5pbWF0aW9uLCBkaXNhYmxlUGFkZGluZyA9IHNldHVwLmRpc2FibGVQYWRkaW5nO1xuICAgIHZhciBzaXplID0gem9vbUFuaW1hdGlvbi5zaXplLCBkaXNhYmxlZCA9IHpvb21BbmltYXRpb24uZGlzYWJsZWQ7XG4gICAgaWYgKCF3cmFwcGVyQ29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyYXBwZXIgaXMgbm90IG1vdW50ZWRcIik7XG4gICAgfVxuICAgIHZhciB0YXJnZXRTY2FsZSA9IHNjYWxlICsgZGVsdGEgKiBzdGVwO1xuICAgIGlmIChnZXRUYXJnZXQpXG4gICAgICAgIHJldHVybiB0YXJnZXRTY2FsZTtcbiAgICB2YXIgcGFkZGluZ0VuYWJsZWQgPSBkaXNhYmxlID8gZmFsc2UgOiAhZGlzYWJsZWQ7XG4gICAgdmFyIG5ld1NjYWxlID0gY2hlY2tab29tQm91bmRzKHJvdW5kTnVtYmVyKHRhcmdldFNjYWxlLCAzKSwgbWluU2NhbGUsIG1heFNjYWxlLCBzaXplLCBwYWRkaW5nRW5hYmxlZCAmJiAhZGlzYWJsZVBhZGRpbmcpO1xuICAgIHJldHVybiBuZXdTY2FsZTtcbn07XG52YXIgaGFuZGxlV2hlZWxab29tU3RvcCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIHByZXZpb3VzV2hlZWxFdmVudCA9IGNvbnRleHRJbnN0YW5jZS5wcmV2aW91c1doZWVsRXZlbnQ7XG4gICAgdmFyIHNjYWxlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlO1xuICAgIHZhciBfYSA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cCwgbWF4U2NhbGUgPSBfYS5tYXhTY2FsZSwgbWluU2NhbGUgPSBfYS5taW5TY2FsZTtcbiAgICBpZiAoIXByZXZpb3VzV2hlZWxFdmVudClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChzY2FsZSA8IG1heFNjYWxlIHx8IHNjYWxlID4gbWluU2NhbGUpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChNYXRoLnNpZ24ocHJldmlvdXNXaGVlbEV2ZW50LmRlbHRhWSkgIT09IE1hdGguc2lnbihldmVudC5kZWx0YVkpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAocHJldmlvdXNXaGVlbEV2ZW50LmRlbHRhWSA+IDAgJiYgcHJldmlvdXNXaGVlbEV2ZW50LmRlbHRhWSA8IGV2ZW50LmRlbHRhWSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKHByZXZpb3VzV2hlZWxFdmVudC5kZWx0YVkgPCAwICYmIHByZXZpb3VzV2hlZWxFdmVudC5kZWx0YVkgPiBldmVudC5kZWx0YVkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChNYXRoLnNpZ24ocHJldmlvdXNXaGVlbEV2ZW50LmRlbHRhWSkgIT09IE1hdGguc2lnbihldmVudC5kZWx0YVkpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG52YXIgaXNQaW5jaFN0YXJ0QWxsb3dlZCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnNldHVwLnBpbmNoLCBkaXNhYmxlZCA9IF9hLmRpc2FibGVkLCBleGNsdWRlZCA9IF9hLmV4Y2x1ZGVkO1xuICAgIHZhciBpc0luaXRpYWxpemVkID0gY29udGV4dEluc3RhbmNlLmlzSW5pdGlhbGl6ZWQ7XG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICB2YXIgaXNBbGxvd2VkID0gaXNJbml0aWFsaXplZCAmJiAhZGlzYWJsZWQgJiYgdGFyZ2V0O1xuICAgIGlmICghaXNBbGxvd2VkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGlzRXhjbHVkZWQgPSBpc0V4Y2x1ZGVkTm9kZSh0YXJnZXQsIGV4Y2x1ZGVkKTtcbiAgICBpZiAoaXNFeGNsdWRlZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufTtcbnZhciBpc1BpbmNoQWxsb3dlZCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UpIHtcbiAgICB2YXIgZGlzYWJsZWQgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAucGluY2guZGlzYWJsZWQ7XG4gICAgdmFyIGlzSW5pdGlhbGl6ZWQgPSBjb250ZXh0SW5zdGFuY2UuaXNJbml0aWFsaXplZCwgcGluY2hTdGFydERpc3RhbmNlID0gY29udGV4dEluc3RhbmNlLnBpbmNoU3RhcnREaXN0YW5jZTtcbiAgICB2YXIgaXNBbGxvd2VkID0gaXNJbml0aWFsaXplZCAmJiAhZGlzYWJsZWQgJiYgcGluY2hTdGFydERpc3RhbmNlO1xuICAgIGlmICghaXNBbGxvd2VkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59O1xudmFyIGNhbGN1bGF0ZVRvdWNoTWlkUG9pbnQgPSBmdW5jdGlvbiAoZXZlbnQsIHNjYWxlLCBjb250ZW50Q29tcG9uZW50KSB7XG4gICAgdmFyIGNvbnRlbnRSZWN0ID0gY29udGVudENvbXBvbmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXM7XG4gICAgdmFyIGZpcnN0UG9pbnRYID0gcm91bmROdW1iZXIodG91Y2hlc1swXS5jbGllbnRYIC0gY29udGVudFJlY3QubGVmdCwgNSk7XG4gICAgdmFyIGZpcnN0UG9pbnRZID0gcm91bmROdW1iZXIodG91Y2hlc1swXS5jbGllbnRZIC0gY29udGVudFJlY3QudG9wLCA1KTtcbiAgICB2YXIgc2Vjb25kUG9pbnRYID0gcm91bmROdW1iZXIodG91Y2hlc1sxXS5jbGllbnRYIC0gY29udGVudFJlY3QubGVmdCwgNSk7XG4gICAgdmFyIHNlY29uZFBvaW50WSA9IHJvdW5kTnVtYmVyKHRvdWNoZXNbMV0uY2xpZW50WSAtIGNvbnRlbnRSZWN0LnRvcCwgNSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogKGZpcnN0UG9pbnRYICsgc2Vjb25kUG9pbnRYKSAvIDIgLyBzY2FsZSxcbiAgICAgICAgeTogKGZpcnN0UG9pbnRZICsgc2Vjb25kUG9pbnRZKSAvIDIgLyBzY2FsZSxcbiAgICB9O1xufTtcbnZhciBnZXRUb3VjaERpc3RhbmNlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdygoZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVgpLCAyKSArXG4gICAgICAgIE1hdGgucG93KChldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWSksIDIpKTtcbn07XG52YXIgY2FsY3VsYXRlUGluY2hab29tID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgY3VycmVudERpc3RhbmNlKSB7XG4gICAgdmFyIHBpbmNoU3RhcnRTY2FsZSA9IGNvbnRleHRJbnN0YW5jZS5waW5jaFN0YXJ0U2NhbGUsIHBpbmNoU3RhcnREaXN0YW5jZSA9IGNvbnRleHRJbnN0YW5jZS5waW5jaFN0YXJ0RGlzdGFuY2UsIHNldHVwID0gY29udGV4dEluc3RhbmNlLnNldHVwO1xuICAgIHZhciBtYXhTY2FsZSA9IHNldHVwLm1heFNjYWxlLCBtaW5TY2FsZSA9IHNldHVwLm1pblNjYWxlLCB6b29tQW5pbWF0aW9uID0gc2V0dXAuem9vbUFuaW1hdGlvbiwgZGlzYWJsZVBhZGRpbmcgPSBzZXR1cC5kaXNhYmxlUGFkZGluZztcbiAgICB2YXIgc2l6ZSA9IHpvb21BbmltYXRpb24uc2l6ZSwgZGlzYWJsZWQgPSB6b29tQW5pbWF0aW9uLmRpc2FibGVkO1xuICAgIGlmICghcGluY2hTdGFydFNjYWxlIHx8IHBpbmNoU3RhcnREaXN0YW5jZSA9PT0gbnVsbCB8fCAhY3VycmVudERpc3RhbmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBpbmNoIHRvdWNoZXMgZGlzdGFuY2Ugd2FzIG5vdCBwcm92aWRlZFwiKTtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnREaXN0YW5jZSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5zY2FsZTtcbiAgICB9XG4gICAgdmFyIHRvdWNoUHJvcG9ydGlvbiA9IGN1cnJlbnREaXN0YW5jZSAvIHBpbmNoU3RhcnREaXN0YW5jZTtcbiAgICB2YXIgc2NhbGVEaWZmZXJlbmNlID0gdG91Y2hQcm9wb3J0aW9uICogcGluY2hTdGFydFNjYWxlO1xuICAgIHJldHVybiBjaGVja1pvb21Cb3VuZHMocm91bmROdW1iZXIoc2NhbGVEaWZmZXJlbmNlLCAyKSwgbWluU2NhbGUsIG1heFNjYWxlLCBzaXplLCAhZGlzYWJsZWQgJiYgIWRpc2FibGVQYWRkaW5nKTtcbn07XG5cbnZhciB3aGVlbFN0b3BFdmVudFRpbWUgPSAxNjA7XG52YXIgd2hlZWxBbmltYXRpb25UaW1lID0gMTAwO1xudmFyIGhhbmRsZVdoZWVsU3RhcnQgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlLCBldmVudCkge1xuICAgIHZhciBfYSA9IGNvbnRleHRJbnN0YW5jZS5wcm9wcywgb25XaGVlbFN0YXJ0ID0gX2Eub25XaGVlbFN0YXJ0LCBvblpvb21TdGFydCA9IF9hLm9uWm9vbVN0YXJ0O1xuICAgIGlmICghY29udGV4dEluc3RhbmNlLndoZWVsU3RvcEV2ZW50VGltZXIpIHtcbiAgICAgICAgaGFuZGxlQ2FuY2VsQW5pbWF0aW9uKGNvbnRleHRJbnN0YW5jZSk7XG4gICAgICAgIGhhbmRsZUNhbGxiYWNrKGdldENvbnRleHQoY29udGV4dEluc3RhbmNlKSwgZXZlbnQsIG9uV2hlZWxTdGFydCk7XG4gICAgICAgIGhhbmRsZUNhbGxiYWNrKGdldENvbnRleHQoY29udGV4dEluc3RhbmNlKSwgZXZlbnQsIG9uWm9vbVN0YXJ0KTtcbiAgICB9XG59O1xudmFyIGhhbmRsZVdoZWVsWm9vbSA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnByb3BzLCBvbldoZWVsID0gX2Eub25XaGVlbCwgb25ab29tID0gX2Eub25ab29tO1xuICAgIHZhciBjb250ZW50Q29tcG9uZW50ID0gY29udGV4dEluc3RhbmNlLmNvbnRlbnRDb21wb25lbnQsIHNldHVwID0gY29udGV4dEluc3RhbmNlLnNldHVwLCB0cmFuc2Zvcm1TdGF0ZSA9IGNvbnRleHRJbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZTtcbiAgICB2YXIgc2NhbGUgPSB0cmFuc2Zvcm1TdGF0ZS5zY2FsZTtcbiAgICB2YXIgbGltaXRUb0JvdW5kcyA9IHNldHVwLmxpbWl0VG9Cb3VuZHMsIGNlbnRlclpvb21lZE91dCA9IHNldHVwLmNlbnRlclpvb21lZE91dCwgem9vbUFuaW1hdGlvbiA9IHNldHVwLnpvb21BbmltYXRpb24sIHdoZWVsID0gc2V0dXAud2hlZWwsIGRpc2FibGVQYWRkaW5nID0gc2V0dXAuZGlzYWJsZVBhZGRpbmcsIHNtb290aCA9IHNldHVwLnNtb290aDtcbiAgICB2YXIgc2l6ZSA9IHpvb21BbmltYXRpb24uc2l6ZSwgZGlzYWJsZWQgPSB6b29tQW5pbWF0aW9uLmRpc2FibGVkO1xuICAgIHZhciBzdGVwID0gd2hlZWwuc3RlcCwgc21vb3RoU3RlcCA9IHdoZWVsLnNtb290aFN0ZXA7XG4gICAgaWYgKCFjb250ZW50Q29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBub3QgbW91bnRlZFwiKTtcbiAgICB9XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgZGVsdGEgPSBnZXREZWx0YShldmVudCwgbnVsbCk7XG4gICAgdmFyIHpvb21TdGVwID0gc21vb3RoID8gc21vb3RoU3RlcCAqIE1hdGguYWJzKGV2ZW50LmRlbHRhWSkgOiBzdGVwO1xuICAgIHZhciBuZXdTY2FsZSA9IGhhbmRsZUNhbGN1bGF0ZVdoZWVsWm9vbShjb250ZXh0SW5zdGFuY2UsIGRlbHRhLCB6b29tU3RlcCwgIWV2ZW50LmN0cmxLZXkpO1xuICAgIC8vIGlmIHNjYWxlIG5vdCBjaGFuZ2VcbiAgICBpZiAoc2NhbGUgPT09IG5ld1NjYWxlKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGJvdW5kcyA9IGhhbmRsZUNhbGN1bGF0ZUJvdW5kcyhjb250ZXh0SW5zdGFuY2UsIG5ld1NjYWxlKTtcbiAgICB2YXIgbW91c2VQb3NpdGlvbiA9IGdldE1vdXNlUG9zaXRpb24oZXZlbnQsIGNvbnRlbnRDb21wb25lbnQsIHNjYWxlKTtcbiAgICB2YXIgaXNQYWRkaW5nRGlzYWJsZWQgPSBkaXNhYmxlZCB8fCBzaXplID09PSAwIHx8IGNlbnRlclpvb21lZE91dCB8fCBkaXNhYmxlUGFkZGluZztcbiAgICB2YXIgaXNMaW1pdGVkVG9Cb3VuZHMgPSBsaW1pdFRvQm91bmRzICYmIGlzUGFkZGluZ0Rpc2FibGVkO1xuICAgIHZhciBfYiA9IGhhbmRsZUNhbGN1bGF0ZVpvb21Qb3NpdGlvbnMoY29udGV4dEluc3RhbmNlLCBtb3VzZVBvc2l0aW9uLngsIG1vdXNlUG9zaXRpb24ueSwgbmV3U2NhbGUsIGJvdW5kcywgaXNMaW1pdGVkVG9Cb3VuZHMpLCB4ID0gX2IueCwgeSA9IF9iLnk7XG4gICAgY29udGV4dEluc3RhbmNlLnByZXZpb3VzV2hlZWxFdmVudCA9IGV2ZW50O1xuICAgIGNvbnRleHRJbnN0YW5jZS5zZXRUcmFuc2Zvcm1TdGF0ZShuZXdTY2FsZSwgeCwgeSk7XG4gICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChjb250ZXh0SW5zdGFuY2UpLCBldmVudCwgb25XaGVlbCk7XG4gICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChjb250ZXh0SW5zdGFuY2UpLCBldmVudCwgb25ab29tKTtcbn07XG52YXIgaGFuZGxlV2hlZWxTdG9wID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQpIHtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UucHJvcHMsIG9uV2hlZWxTdG9wID0gX2Eub25XaGVlbFN0b3AsIG9uWm9vbVN0b3AgPSBfYS5vblpvb21TdG9wO1xuICAgIC8vIGZpcmUgYW5pbWF0aW9uXG4gICAgY2FuY2VsVGltZW91dChjb250ZXh0SW5zdGFuY2Uud2hlZWxBbmltYXRpb25UaW1lcik7XG4gICAgY29udGV4dEluc3RhbmNlLndoZWVsQW5pbWF0aW9uVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFjb250ZXh0SW5zdGFuY2UubW91bnRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaGFuZGxlQWxpZ25Ub1NjYWxlQm91bmRzKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQueCwgZXZlbnQueSk7XG4gICAgICAgIGNvbnRleHRJbnN0YW5jZS53aGVlbEFuaW1hdGlvblRpbWVyID0gbnVsbDtcbiAgICB9LCB3aGVlbEFuaW1hdGlvblRpbWUpO1xuICAgIC8vIFdoZWVsIHN0b3AgZXZlbnRcbiAgICB2YXIgaGFzU3RvcHBlZFpvb21pbmcgPSBoYW5kbGVXaGVlbFpvb21TdG9wKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQpO1xuICAgIGlmIChoYXNTdG9wcGVkWm9vbWluZykge1xuICAgICAgICBjYW5jZWxUaW1lb3V0KGNvbnRleHRJbnN0YW5jZS53aGVlbFN0b3BFdmVudFRpbWVyKTtcbiAgICAgICAgY29udGV4dEluc3RhbmNlLndoZWVsU3RvcEV2ZW50VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghY29udGV4dEluc3RhbmNlLm1vdW50ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29udGV4dEluc3RhbmNlLndoZWVsU3RvcEV2ZW50VGltZXIgPSBudWxsO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChjb250ZXh0SW5zdGFuY2UpLCBldmVudCwgb25XaGVlbFN0b3ApO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChjb250ZXh0SW5zdGFuY2UpLCBldmVudCwgb25ab29tU3RvcCk7XG4gICAgICAgIH0sIHdoZWVsU3RvcEV2ZW50VGltZSk7XG4gICAgfVxufTtcblxudmFyIGdldFRvdWNoQ2VudGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHRvdGFsWCA9IDA7XG4gICAgdmFyIHRvdGFsWSA9IDA7XG4gICAgLy8gU3VtIHVwIHRoZSBwb3NpdGlvbnMgb2YgYWxsIHRvdWNoZXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkgKz0gMSkge1xuICAgICAgICB0b3RhbFggKz0gZXZlbnQudG91Y2hlc1tpXS5jbGllbnRYO1xuICAgICAgICB0b3RhbFkgKz0gZXZlbnQudG91Y2hlc1tpXS5jbGllbnRZO1xuICAgIH1cbiAgICAvLyBDYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgcG9zaXRpb25cbiAgICB2YXIgeCA9IHRvdGFsWCAvIDI7XG4gICAgdmFyIHkgPSB0b3RhbFkgLyAyO1xuICAgIHJldHVybiB7IHg6IHgsIHk6IHkgfTtcbn07XG52YXIgaGFuZGxlUGluY2hTdGFydCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIGRpc3RhbmNlID0gZ2V0VG91Y2hEaXN0YW5jZShldmVudCk7XG4gICAgY29udGV4dEluc3RhbmNlLnBpbmNoU3RhcnREaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIGNvbnRleHRJbnN0YW5jZS5sYXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICBjb250ZXh0SW5zdGFuY2UucGluY2hTdGFydFNjYWxlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlO1xuICAgIGNvbnRleHRJbnN0YW5jZS5pc1Bhbm5pbmcgPSBmYWxzZTtcbiAgICB2YXIgY2VudGVyID0gZ2V0VG91Y2hDZW50ZXIoZXZlbnQpO1xuICAgIGNvbnRleHRJbnN0YW5jZS5waW5jaExhc3RDZW50ZXJYID0gY2VudGVyLng7XG4gICAgY29udGV4dEluc3RhbmNlLnBpbmNoTGFzdENlbnRlclkgPSBjZW50ZXIueTtcbiAgICBoYW5kbGVDYW5jZWxBbmltYXRpb24oY29udGV4dEluc3RhbmNlKTtcbn07XG52YXIgaGFuZGxlUGluY2hab29tID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQpIHtcbiAgICB2YXIgY29udGVudENvbXBvbmVudCA9IGNvbnRleHRJbnN0YW5jZS5jb250ZW50Q29tcG9uZW50LCBwaW5jaFN0YXJ0RGlzdGFuY2UgPSBjb250ZXh0SW5zdGFuY2UucGluY2hTdGFydERpc3RhbmNlLCB3cmFwcGVyQ29tcG9uZW50ID0gY29udGV4dEluc3RhbmNlLndyYXBwZXJDb21wb25lbnQ7XG4gICAgdmFyIHNjYWxlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlO1xuICAgIHZhciBfYSA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cCwgbGltaXRUb0JvdW5kcyA9IF9hLmxpbWl0VG9Cb3VuZHMsIGNlbnRlclpvb21lZE91dCA9IF9hLmNlbnRlclpvb21lZE91dCwgem9vbUFuaW1hdGlvbiA9IF9hLnpvb21BbmltYXRpb24sIGFsaWdubWVudEFuaW1hdGlvbiA9IF9hLmFsaWdubWVudEFuaW1hdGlvbjtcbiAgICB2YXIgZGlzYWJsZWQgPSB6b29tQW5pbWF0aW9uLmRpc2FibGVkLCBzaXplID0gem9vbUFuaW1hdGlvbi5zaXplO1xuICAgIC8vIGlmIG9uZSBmaW5nZXIgc3RhcnRzIGZyb20gb3V0c2lkZSBvZiB3cmFwcGVyXG4gICAgaWYgKHBpbmNoU3RhcnREaXN0YW5jZSA9PT0gbnVsbCB8fCAhY29udGVudENvbXBvbmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBtaWRQb2ludCA9IGNhbGN1bGF0ZVRvdWNoTWlkUG9pbnQoZXZlbnQsIHNjYWxlLCBjb250ZW50Q29tcG9uZW50KTtcbiAgICAvLyBpZiB0b3VjaGVzIGdvZXMgb2ZmIG9mIHRoZSB3cmFwcGVyIGVsZW1lbnRcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShtaWRQb2ludC54KSB8fCAhTnVtYmVyLmlzRmluaXRlKG1pZFBvaW50LnkpKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGN1cnJlbnREaXN0YW5jZSA9IGdldFRvdWNoRGlzdGFuY2UoZXZlbnQpO1xuICAgIHZhciBuZXdTY2FsZSA9IGNhbGN1bGF0ZVBpbmNoWm9vbShjb250ZXh0SW5zdGFuY2UsIGN1cnJlbnREaXN0YW5jZSk7XG4gICAgdmFyIGNlbnRlciA9IGdldFRvdWNoQ2VudGVyKGV2ZW50KTtcbiAgICAvLyBwYW4gc2hvdWxkIGJlIHNjYWxlIGludmFyaWFudC5cbiAgICB2YXIgcGFuWCA9IGNlbnRlci54IC0gKGNvbnRleHRJbnN0YW5jZS5waW5jaExhc3RDZW50ZXJYIHx8IDApO1xuICAgIHZhciBwYW5ZID0gY2VudGVyLnkgLSAoY29udGV4dEluc3RhbmNlLnBpbmNoTGFzdENlbnRlclkgfHwgMCk7XG4gICAgaWYgKG5ld1NjYWxlID09PSBzY2FsZSAmJiBwYW5YID09PSAwICYmIHBhblkgPT09IDApXG4gICAgICAgIHJldHVybjtcbiAgICBjb250ZXh0SW5zdGFuY2UucGluY2hMYXN0Q2VudGVyWCA9IGNlbnRlci54O1xuICAgIGNvbnRleHRJbnN0YW5jZS5waW5jaExhc3RDZW50ZXJZID0gY2VudGVyLnk7XG4gICAgdmFyIGJvdW5kcyA9IGhhbmRsZUNhbGN1bGF0ZUJvdW5kcyhjb250ZXh0SW5zdGFuY2UsIG5ld1NjYWxlKTtcbiAgICB2YXIgaXNQYWRkaW5nRGlzYWJsZWQgPSBkaXNhYmxlZCB8fCBzaXplID09PSAwIHx8IGNlbnRlclpvb21lZE91dDtcbiAgICB2YXIgaXNMaW1pdGVkVG9Cb3VuZHMgPSBsaW1pdFRvQm91bmRzICYmIGlzUGFkZGluZ0Rpc2FibGVkO1xuICAgIHZhciBfYiA9IGhhbmRsZUNhbGN1bGF0ZVpvb21Qb3NpdGlvbnMoY29udGV4dEluc3RhbmNlLCBtaWRQb2ludC54LCBtaWRQb2ludC55LCBuZXdTY2FsZSwgYm91bmRzLCBpc0xpbWl0ZWRUb0JvdW5kcyksIHggPSBfYi54LCB5ID0gX2IueTtcbiAgICBjb250ZXh0SW5zdGFuY2UucGluY2hNaWRwb2ludCA9IG1pZFBvaW50O1xuICAgIGNvbnRleHRJbnN0YW5jZS5sYXN0RGlzdGFuY2UgPSBjdXJyZW50RGlzdGFuY2U7XG4gICAgdmFyIHNpemVYID0gYWxpZ25tZW50QW5pbWF0aW9uLnNpemVYLCBzaXplWSA9IGFsaWdubWVudEFuaW1hdGlvbi5zaXplWTtcbiAgICB2YXIgcGFkZGluZ1ZhbHVlWCA9IGdldFBhZGRpbmdWYWx1ZShjb250ZXh0SW5zdGFuY2UsIHNpemVYKTtcbiAgICB2YXIgcGFkZGluZ1ZhbHVlWSA9IGdldFBhZGRpbmdWYWx1ZShjb250ZXh0SW5zdGFuY2UsIHNpemVZKTtcbiAgICB2YXIgbmV3UG9zaXRpb25YID0geCArIHBhblg7XG4gICAgdmFyIG5ld1Bvc2l0aW9uWSA9IHkgKyBwYW5ZO1xuICAgIHZhciBfYyA9IGdldE1vdXNlQm91bmRlZFBvc2l0aW9uKG5ld1Bvc2l0aW9uWCwgbmV3UG9zaXRpb25ZLCBib3VuZHMsIGxpbWl0VG9Cb3VuZHMsIHBhZGRpbmdWYWx1ZVgsIHBhZGRpbmdWYWx1ZVksIHdyYXBwZXJDb21wb25lbnQpLCBmaW5hbFggPSBfYy54LCBmaW5hbFkgPSBfYy55O1xuICAgIGNvbnRleHRJbnN0YW5jZS5zZXRUcmFuc2Zvcm1TdGF0ZShuZXdTY2FsZSwgZmluYWxYLCBmaW5hbFkpO1xufTtcbnZhciBoYW5kbGVQaW5jaFN0b3AgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlKSB7XG4gICAgdmFyIHBpbmNoTWlkcG9pbnQgPSBjb250ZXh0SW5zdGFuY2UucGluY2hNaWRwb2ludDtcbiAgICBjb250ZXh0SW5zdGFuY2UudmVsb2NpdHkgPSBudWxsO1xuICAgIGNvbnRleHRJbnN0YW5jZS5sYXN0RGlzdGFuY2UgPSBudWxsO1xuICAgIGNvbnRleHRJbnN0YW5jZS5waW5jaE1pZHBvaW50ID0gbnVsbDtcbiAgICBjb250ZXh0SW5zdGFuY2UucGluY2hTdGFydFNjYWxlID0gbnVsbDtcbiAgICBjb250ZXh0SW5zdGFuY2UucGluY2hTdGFydERpc3RhbmNlID0gbnVsbDtcbiAgICBoYW5kbGVBbGlnblRvU2NhbGVCb3VuZHMoY29udGV4dEluc3RhbmNlLCBwaW5jaE1pZHBvaW50ID09PSBudWxsIHx8IHBpbmNoTWlkcG9pbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBpbmNoTWlkcG9pbnQueCwgcGluY2hNaWRwb2ludCA9PT0gbnVsbCB8fCBwaW5jaE1pZHBvaW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaW5jaE1pZHBvaW50LnkpO1xufTtcblxudmFyIGhhbmRsZURvdWJsZUNsaWNrU3RvcCA9IGZ1bmN0aW9uIChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIG9uWm9vbVN0b3AgPSBjb250ZXh0SW5zdGFuY2UucHJvcHMub25ab29tU3RvcDtcbiAgICB2YXIgYW5pbWF0aW9uVGltZSA9IGNvbnRleHRJbnN0YW5jZS5zZXR1cC5kb3VibGVDbGljay5hbmltYXRpb25UaW1lO1xuICAgIGNhbmNlbFRpbWVvdXQoY29udGV4dEluc3RhbmNlLmRvdWJsZUNsaWNrU3RvcEV2ZW50VGltZXIpO1xuICAgIGNvbnRleHRJbnN0YW5jZS5kb3VibGVDbGlja1N0b3BFdmVudFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHRJbnN0YW5jZS5kb3VibGVDbGlja1N0b3BFdmVudFRpbWVyID0gbnVsbDtcbiAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChjb250ZXh0SW5zdGFuY2UpLCBldmVudCwgb25ab29tU3RvcCk7XG4gICAgfSwgYW5pbWF0aW9uVGltZSk7XG59O1xudmFyIGhhbmRsZURvdWJsZUNsaWNrUmVzZXRNb2RlID0gZnVuY3Rpb24gKGNvbnRleHRJbnN0YW5jZSwgZXZlbnQpIHtcbiAgICB2YXIgX2EgPSBjb250ZXh0SW5zdGFuY2UucHJvcHMsIG9uWm9vbVN0YXJ0ID0gX2Eub25ab29tU3RhcnQsIG9uWm9vbSA9IF9hLm9uWm9vbTtcbiAgICB2YXIgX2IgPSBjb250ZXh0SW5zdGFuY2Uuc2V0dXAuZG91YmxlQ2xpY2ssIGFuaW1hdGlvblRpbWUgPSBfYi5hbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlID0gX2IuYW5pbWF0aW9uVHlwZTtcbiAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KGNvbnRleHRJbnN0YW5jZSksIGV2ZW50LCBvblpvb21TdGFydCk7XG4gICAgcmVzZXRUcmFuc2Zvcm1hdGlvbnMoY29udGV4dEluc3RhbmNlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KGNvbnRleHRJbnN0YW5jZSksIGV2ZW50LCBvblpvb20pO1xuICAgIH0pO1xuICAgIGhhbmRsZURvdWJsZUNsaWNrU3RvcChjb250ZXh0SW5zdGFuY2UsIGV2ZW50KTtcbn07XG5mdW5jdGlvbiBnZXREb3VibGVDbGlja1NjYWxlKG1vZGUsIHNjYWxlKSB7XG4gICAgaWYgKG1vZGUgPT09IFwidG9nZ2xlXCIpIHtcbiAgICAgICAgcmV0dXJuIHNjYWxlID09PSAxID8gMSA6IC0xO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZSA9PT0gXCJ6b29tT3V0XCIgPyAtMSA6IDE7XG59XG5mdW5jdGlvbiBoYW5kbGVEb3VibGVDbGljayhjb250ZXh0SW5zdGFuY2UsIGV2ZW50KSB7XG4gICAgdmFyIHNldHVwID0gY29udGV4dEluc3RhbmNlLnNldHVwLCBkb3VibGVDbGlja1N0b3BFdmVudFRpbWVyID0gY29udGV4dEluc3RhbmNlLmRvdWJsZUNsaWNrU3RvcEV2ZW50VGltZXIsIHRyYW5zZm9ybVN0YXRlID0gY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLCBjb250ZW50Q29tcG9uZW50ID0gY29udGV4dEluc3RhbmNlLmNvbnRlbnRDb21wb25lbnQ7XG4gICAgdmFyIHNjYWxlID0gdHJhbnNmb3JtU3RhdGUuc2NhbGU7XG4gICAgdmFyIF9hID0gY29udGV4dEluc3RhbmNlLnByb3BzLCBvblpvb21TdGFydCA9IF9hLm9uWm9vbVN0YXJ0LCBvblpvb20gPSBfYS5vblpvb207XG4gICAgdmFyIF9iID0gc2V0dXAuZG91YmxlQ2xpY2ssIGRpc2FibGVkID0gX2IuZGlzYWJsZWQsIG1vZGUgPSBfYi5tb2RlLCBzdGVwID0gX2Iuc3RlcCwgYW5pbWF0aW9uVGltZSA9IF9iLmFuaW1hdGlvblRpbWUsIGFuaW1hdGlvblR5cGUgPSBfYi5hbmltYXRpb25UeXBlO1xuICAgIGlmIChkaXNhYmxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChkb3VibGVDbGlja1N0b3BFdmVudFRpbWVyKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKG1vZGUgPT09IFwicmVzZXRcIikge1xuICAgICAgICByZXR1cm4gaGFuZGxlRG91YmxlQ2xpY2tSZXNldE1vZGUoY29udGV4dEluc3RhbmNlLCBldmVudCk7XG4gICAgfVxuICAgIGlmICghY29udGVudENvbXBvbmVudClcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJObyBDb250ZW50Q29tcG9uZW50IGZvdW5kXCIpO1xuICAgIHZhciBkZWx0YSA9IGdldERvdWJsZUNsaWNrU2NhbGUobW9kZSwgY29udGV4dEluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlKTtcbiAgICB2YXIgbmV3U2NhbGUgPSBoYW5kbGVDYWxjdWxhdGVCdXR0b25ab29tKGNvbnRleHRJbnN0YW5jZSwgZGVsdGEsIHN0ZXApO1xuICAgIC8vIHN0b3AgZXhlY3V0aW9uIHdoZW4gc2NhbGUgZGlkbid0IGNoYW5nZVxuICAgIGlmIChzY2FsZSA9PT0gbmV3U2NhbGUpXG4gICAgICAgIHJldHVybjtcbiAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KGNvbnRleHRJbnN0YW5jZSksIGV2ZW50LCBvblpvb21TdGFydCk7XG4gICAgdmFyIG1vdXNlUG9zaXRpb24gPSBnZXRNb3VzZVBvc2l0aW9uKGV2ZW50LCBjb250ZW50Q29tcG9uZW50LCBzY2FsZSk7XG4gICAgdmFyIHRhcmdldFN0YXRlID0gaGFuZGxlWm9vbVRvUG9pbnQoY29udGV4dEluc3RhbmNlLCBuZXdTY2FsZSwgbW91c2VQb3NpdGlvbi54LCBtb3VzZVBvc2l0aW9uLnkpO1xuICAgIGlmICghdGFyZ2V0U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgem9vbSBldmVudC4gTmV3IHRyYW5zZm9ybWF0aW9uIHN0YXRlIHdhcyBub3QgY2FsY3VsYXRlZC5cIik7XG4gICAgfVxuICAgIGhhbmRsZUNhbGxiYWNrKGdldENvbnRleHQoY29udGV4dEluc3RhbmNlKSwgZXZlbnQsIG9uWm9vbSk7XG4gICAgYW5pbWF0ZShjb250ZXh0SW5zdGFuY2UsIHRhcmdldFN0YXRlLCBhbmltYXRpb25UaW1lLCBhbmltYXRpb25UeXBlKTtcbiAgICBoYW5kbGVEb3VibGVDbGlja1N0b3AoY29udGV4dEluc3RhbmNlLCBldmVudCk7XG59XG52YXIgaXNEb3VibGVDbGlja0FsbG93ZWQgPSBmdW5jdGlvbiAoY29udGV4dEluc3RhbmNlLCBldmVudCkge1xuICAgIHZhciBpc0luaXRpYWxpemVkID0gY29udGV4dEluc3RhbmNlLmlzSW5pdGlhbGl6ZWQsIHNldHVwID0gY29udGV4dEluc3RhbmNlLnNldHVwLCB3cmFwcGVyQ29tcG9uZW50ID0gY29udGV4dEluc3RhbmNlLndyYXBwZXJDb21wb25lbnQ7XG4gICAgdmFyIF9hID0gc2V0dXAuZG91YmxlQ2xpY2ssIGRpc2FibGVkID0gX2EuZGlzYWJsZWQsIGV4Y2x1ZGVkID0gX2EuZXhjbHVkZWQ7XG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICB2YXIgaXNXcmFwcGVyQ2hpbGQgPSB3cmFwcGVyQ29tcG9uZW50ID09PSBudWxsIHx8IHdyYXBwZXJDb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdyYXBwZXJDb21wb25lbnQuY29udGFpbnModGFyZ2V0KTtcbiAgICB2YXIgaXNBbGxvd2VkID0gaXNJbml0aWFsaXplZCAmJiB0YXJnZXQgJiYgaXNXcmFwcGVyQ2hpbGQgJiYgIWRpc2FibGVkO1xuICAgIGlmICghaXNBbGxvd2VkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGlzRXhjbHVkZWQgPSBpc0V4Y2x1ZGVkTm9kZSh0YXJnZXQsIGV4Y2x1ZGVkKTtcbiAgICBpZiAoaXNFeGNsdWRlZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxudmFyIFpvb21QYW5QaW5jaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBab29tUGFuUGluY2gocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5waW5jaExhc3RDZW50ZXJYID0gbnVsbDtcbiAgICAgICAgdGhpcy5waW5jaExhc3RDZW50ZXJZID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8vIENvbXBvbmVudHNcbiAgICAgICAgdGhpcy53cmFwcGVyQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb250ZW50Q29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb25cbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYm91bmRzID0gbnVsbDtcbiAgICAgICAgLy8gd2hlZWwgaGVscGVyc1xuICAgICAgICB0aGlzLnByZXZpb3VzV2hlZWxFdmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMud2hlZWxTdG9wRXZlbnRUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMud2hlZWxBbmltYXRpb25UaW1lciA9IG51bGw7XG4gICAgICAgIC8vIHBhbm5pbmcgaGVscGVyc1xuICAgICAgICB0aGlzLmlzUGFubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzV2hlZWxQYW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhcnRDb29yZHMgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RUb3VjaCA9IG51bGw7XG4gICAgICAgIC8vIHBpbmNoIGhlbHBlcnNcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdERpc3RhbmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5waW5jaFN0YXJ0RGlzdGFuY2UgPSBudWxsO1xuICAgICAgICB0aGlzLnBpbmNoU3RhcnRTY2FsZSA9IG51bGw7XG4gICAgICAgIHRoaXMucGluY2hNaWRwb2ludCA9IG51bGw7XG4gICAgICAgIC8vIGRvdWJsZSBjbGljayBoZWxwZXJzXG4gICAgICAgIHRoaXMuZG91YmxlQ2xpY2tTdG9wRXZlbnRUaW1lciA9IG51bGw7XG4gICAgICAgIC8vIHZlbG9jaXR5IGhlbHBlcnNcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG51bGw7XG4gICAgICAgIHRoaXMudmVsb2NpdHlUaW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0TW91c2VQb3NpdGlvbiA9IG51bGw7XG4gICAgICAgIC8vIGFuaW1hdGlvbnMgaGVscGVyc1xuICAgICAgICB0aGlzLmFuaW1hdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLm1heEJvdW5kcyA9IG51bGw7XG4gICAgICAgIC8vIGtleSBwcmVzc1xuICAgICAgICB0aGlzLnByZXNzZWRLZXlzID0ge307XG4gICAgICAgIHRoaXMubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5pbml0aWFsaXplV2luZG93RXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmNsZWFudXBXaW5kb3dFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAobmV3UHJvcHMpIHtcbiAgICAgICAgICAgIF90aGlzLnByb3BzID0gbmV3UHJvcHM7XG4gICAgICAgICAgICBoYW5kbGVDYWxjdWxhdGVCb3VuZHMoX3RoaXMsIF90aGlzLnRyYW5zZm9ybVN0YXRlLnNjYWxlKTtcbiAgICAgICAgICAgIF90aGlzLnNldHVwID0gY3JlYXRlU2V0dXAobmV3UHJvcHMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluaXRpYWxpemVXaW5kb3dFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgdmFyIHBhc3NpdmUgPSBtYWtlUGFzc2l2ZUV2ZW50T3B0aW9uKCk7XG4gICAgICAgICAgICB2YXIgY3VycmVudERvY3VtZW50ID0gKF9hID0gX3RoaXMud3JhcHBlckNvbXBvbmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgICAgICB2YXIgY3VycmVudFdpbmRvdyA9IGN1cnJlbnREb2N1bWVudCA9PT0gbnVsbCB8fCBjdXJyZW50RG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnREb2N1bWVudC5kZWZhdWx0VmlldztcbiAgICAgICAgICAgIChfYiA9IF90aGlzLndyYXBwZXJDb21wb25lbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgX3RoaXMub25XaGVlbFBhbm5pbmcsIHBhc3NpdmUpO1xuICAgICAgICAgICAgLy8gUGFubmluZyBvbiB3aW5kb3cgdG8gYWxsb3cgcGFubmluZyB3aGVuIG1vdXNlIGlzIG91dCBvZiBjb21wb25lbnQgd3JhcHBlclxuICAgICAgICAgICAgY3VycmVudFdpbmRvdyA9PT0gbnVsbCB8fCBjdXJyZW50V2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgX3RoaXMub25QYW5uaW5nU3RhcnQsIHBhc3NpdmUpO1xuICAgICAgICAgICAgY3VycmVudFdpbmRvdyA9PT0gbnVsbCB8fCBjdXJyZW50V2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgX3RoaXMub25QYW5uaW5nLCBwYXNzaXZlKTtcbiAgICAgICAgICAgIGN1cnJlbnRXaW5kb3cgPT09IG51bGwgfHwgY3VycmVudFdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBfdGhpcy5vblBhbm5pbmdTdG9wLCBwYXNzaXZlKTtcbiAgICAgICAgICAgIGN1cnJlbnREb2N1bWVudCA9PT0gbnVsbCB8fCBjdXJyZW50RG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnREb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBfdGhpcy5jbGVhclBhbm5pbmcsIHBhc3NpdmUpO1xuICAgICAgICAgICAgY3VycmVudFdpbmRvdyA9PT0gbnVsbCB8fCBjdXJyZW50V2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBfdGhpcy5zZXRLZXlVblByZXNzZWQsIHBhc3NpdmUpO1xuICAgICAgICAgICAgY3VycmVudFdpbmRvdyA9PT0gbnVsbCB8fCBjdXJyZW50V2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIF90aGlzLnNldEtleVByZXNzZWQsIHBhc3NpdmUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsZWFudXBXaW5kb3dFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgdmFyIHBhc3NpdmUgPSBtYWtlUGFzc2l2ZUV2ZW50T3B0aW9uKCk7XG4gICAgICAgICAgICB2YXIgY3VycmVudERvY3VtZW50ID0gKF9hID0gX3RoaXMud3JhcHBlckNvbXBvbmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgICAgICB2YXIgY3VycmVudFdpbmRvdyA9IGN1cnJlbnREb2N1bWVudCA9PT0gbnVsbCB8fCBjdXJyZW50RG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnREb2N1bWVudC5kZWZhdWx0VmlldztcbiAgICAgICAgICAgIGN1cnJlbnRXaW5kb3cgPT09IG51bGwgfHwgY3VycmVudFdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIF90aGlzLm9uUGFubmluZ1N0YXJ0LCBwYXNzaXZlKTtcbiAgICAgICAgICAgIGN1cnJlbnRXaW5kb3cgPT09IG51bGwgfHwgY3VycmVudFdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIF90aGlzLm9uUGFubmluZywgcGFzc2l2ZSk7XG4gICAgICAgICAgICBjdXJyZW50V2luZG93ID09PSBudWxsIHx8IGN1cnJlbnRXaW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRXaW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgX3RoaXMub25QYW5uaW5nU3RvcCwgcGFzc2l2ZSk7XG4gICAgICAgICAgICBjdXJyZW50RG9jdW1lbnQgPT09IG51bGwgfHwgY3VycmVudERvY3VtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50RG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgX3RoaXMuY2xlYXJQYW5uaW5nLCBwYXNzaXZlKTtcbiAgICAgICAgICAgIGN1cnJlbnRXaW5kb3cgPT09IG51bGwgfHwgY3VycmVudFdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgX3RoaXMuc2V0S2V5VW5QcmVzc2VkLCBwYXNzaXZlKTtcbiAgICAgICAgICAgIGN1cnJlbnRXaW5kb3cgPT09IG51bGwgfHwgY3VycmVudFdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBfdGhpcy5zZXRLZXlQcmVzc2VkLCBwYXNzaXZlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIF90aGlzLmNsZWFyUGFubmluZywgcGFzc2l2ZSk7XG4gICAgICAgICAgICBoYW5kbGVDYW5jZWxBbmltYXRpb24oX3RoaXMpO1xuICAgICAgICAgICAgKF9iID0gX3RoaXMub2JzZXJ2ZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5kaXNjb25uZWN0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlSW5pdGlhbGl6ZVdyYXBwZXJFdmVudHMgPSBmdW5jdGlvbiAod3JhcHBlcikge1xuICAgICAgICAgICAgLy8gWm9vbWluZyBldmVudHMgb24gd3JhcHBlclxuICAgICAgICAgICAgdmFyIHBhc3NpdmUgPSBtYWtlUGFzc2l2ZUV2ZW50T3B0aW9uKCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBfdGhpcy5vbldoZWVsWm9vbSwgcGFzc2l2ZSk7XG4gICAgICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBfdGhpcy5vbkRvdWJsZUNsaWNrLCBwYXNzaXZlKTtcbiAgICAgICAgICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgX3RoaXMub25Ub3VjaFBhbm5pbmdTdGFydCwgcGFzc2l2ZSk7XG4gICAgICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgX3RoaXMub25Ub3VjaFBhbm5pbmcsIHBhc3NpdmUpO1xuICAgICAgICAgICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgX3RoaXMub25Ub3VjaFBhbm5pbmdTdG9wLCBwYXNzaXZlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVJbml0aWFsaXplID0gZnVuY3Rpb24gKHdyYXBwZXIsIGNvbnRlbnRDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHZhciBpc0NlbnRlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY2VudGVyT25Jbml0ID0gX3RoaXMuc2V0dXAuY2VudGVyT25Jbml0O1xuICAgICAgICAgICAgdmFyIGhhc1RhcmdldCA9IGZ1bmN0aW9uIChlbnRyaWVzLCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9pIDwgZW50cmllc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkudGFyZ2V0ID09PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5hcHBseVRyYW5zZm9ybWF0aW9uKCk7XG4gICAgICAgICAgICBfdGhpcy5vbkluaXRDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhnZXRDb250ZXh0KF90aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1RhcmdldChlbnRyaWVzLCB3cmFwcGVyKSB8fCBoYXNUYXJnZXQoZW50cmllcywgY29udGVudENvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlck9uSW5pdCAmJiAhaXNDZW50ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IGNvbnRlbnRDb21wb25lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEhlaWdodCA9IGNvbnRlbnRDb21wb25lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRXaWR0aCA+IDAgfHwgY3VycmVudEhlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NlbnRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRDZW50ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUNhbmNlbEFuaW1hdGlvbihfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDYWxjdWxhdGVCb3VuZHMoX3RoaXMsIF90aGlzLnRyYW5zZm9ybVN0YXRlLnNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUFsaWduVG9Cb3VuZHMoX3RoaXMsIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTdGFydCBvYnNlcnZpbmcgdGhlIHRhcmdldCBub2RlIGZvciBjb25maWd1cmVkIG11dGF0aW9uc1xuICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh3cmFwcGVyKTtcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmVyLm9ic2VydmUoY29udGVudENvbXBvbmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vLyAvLy8vLy8vXG4gICAgICAgIC8vIFpvb21cbiAgICAgICAgLy8vIC8vLy8vLy9cbiAgICAgICAgdGhpcy5vbldoZWVsWm9vbSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gX3RoaXMuc2V0dXAuZGlzYWJsZWQ7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGlzQWxsb3dlZCA9IGlzV2hlZWxBbGxvd2VkKF90aGlzLCBldmVudCk7XG4gICAgICAgICAgICBpZiAoIWlzQWxsb3dlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIga2V5c1ByZXNzZWQgPSBfdGhpcy5pc1ByZXNzaW5nS2V5cyhfdGhpcy5zZXR1cC53aGVlbC5hY3RpdmF0aW9uS2V5cyk7XG4gICAgICAgICAgICBpZiAoIWtleXNQcmVzc2VkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGhhbmRsZVdoZWVsU3RhcnQoX3RoaXMsIGV2ZW50KTtcbiAgICAgICAgICAgIGhhbmRsZVdoZWVsWm9vbShfdGhpcywgZXZlbnQpO1xuICAgICAgICAgICAgaGFuZGxlV2hlZWxTdG9wKF90aGlzLCBldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vLyAvLy8vLy8vXG4gICAgICAgIC8vIFBhblxuICAgICAgICAvLy8gLy8vLy8vL1xuICAgICAgICB0aGlzLm9uV2hlZWxQYW5uaW5nID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zZXR1cCwgZGlzYWJsZWQgPSBfYS5kaXNhYmxlZCwgd2hlZWwgPSBfYS53aGVlbCwgcGFubmluZyA9IF9hLnBhbm5pbmc7XG4gICAgICAgICAgICBpZiAoIV90aGlzLndyYXBwZXJDb21wb25lbnQgfHxcbiAgICAgICAgICAgICAgICAhX3RoaXMuY29udGVudENvbXBvbmVudCB8fFxuICAgICAgICAgICAgICAgIGRpc2FibGVkIHx8XG4gICAgICAgICAgICAgICAgIXdoZWVsLndoZWVsRGlzYWJsZWQgfHxcbiAgICAgICAgICAgICAgICBwYW5uaW5nLmRpc2FibGVkIHx8XG4gICAgICAgICAgICAgICAgIXBhbm5pbmcud2hlZWxQYW5uaW5nIHx8XG4gICAgICAgICAgICAgICAgZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnRyYW5zZm9ybVN0YXRlLCBwb3NpdGlvblggPSBfYi5wb3NpdGlvblgsIHBvc2l0aW9uWSA9IF9iLnBvc2l0aW9uWTtcbiAgICAgICAgICAgIHZhciBtb3VzZVggPSBwb3NpdGlvblggLSBldmVudC5kZWx0YVg7XG4gICAgICAgICAgICB2YXIgbW91c2VZID0gcG9zaXRpb25ZIC0gZXZlbnQuZGVsdGFZO1xuICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uWCA9IHBhbm5pbmcubG9ja0F4aXNYID8gcG9zaXRpb25YIDogbW91c2VYO1xuICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uWSA9IHBhbm5pbmcubG9ja0F4aXNZID8gcG9zaXRpb25ZIDogbW91c2VZO1xuICAgICAgICAgICAgdmFyIF9jID0gX3RoaXMuc2V0dXAuYWxpZ25tZW50QW5pbWF0aW9uLCBzaXplWCA9IF9jLnNpemVYLCBzaXplWSA9IF9jLnNpemVZO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmdWYWx1ZVggPSBnZXRQYWRkaW5nVmFsdWUoX3RoaXMsIHNpemVYKTtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nVmFsdWVZID0gZ2V0UGFkZGluZ1ZhbHVlKF90aGlzLCBzaXplWSk7XG4gICAgICAgICAgICBpZiAobmV3UG9zaXRpb25YID09PSBwb3NpdGlvblggJiYgbmV3UG9zaXRpb25ZID09PSBwb3NpdGlvblkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaGFuZGxlTmV3UG9zaXRpb24oX3RoaXMsIG5ld1Bvc2l0aW9uWCwgbmV3UG9zaXRpb25ZLCBwYWRkaW5nVmFsdWVYLCBwYWRkaW5nVmFsdWVZKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhbm5pbmdTdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gX3RoaXMuc2V0dXAuZGlzYWJsZWQ7XG4gICAgICAgICAgICB2YXIgb25QYW5uaW5nU3RhcnQgPSBfdGhpcy5wcm9wcy5vblBhbm5pbmdTdGFydDtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgaXNBbGxvd2VkID0gaXNQYW5uaW5nU3RhcnRBbGxvd2VkKF90aGlzLCBldmVudCk7XG4gICAgICAgICAgICBpZiAoIWlzQWxsb3dlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIga2V5c1ByZXNzZWQgPSBfdGhpcy5pc1ByZXNzaW5nS2V5cyhfdGhpcy5zZXR1cC5wYW5uaW5nLmFjdGl2YXRpb25LZXlzKTtcbiAgICAgICAgICAgIGlmICgha2V5c1ByZXNzZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCAmJiAhX3RoaXMuc2V0dXAucGFubmluZy5hbGxvd0xlZnRDbGlja1BhbilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAxICYmICFfdGhpcy5zZXR1cC5wYW5uaW5nLmFsbG93TWlkZGxlQ2xpY2tQYW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMiAmJiAhX3RoaXMuc2V0dXAucGFubmluZy5hbGxvd1JpZ2h0Q2xpY2tQYW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaGFuZGxlQ2FuY2VsQW5pbWF0aW9uKF90aGlzKTtcbiAgICAgICAgICAgIGhhbmRsZVBhbm5pbmdTdGFydChfdGhpcywgZXZlbnQpO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChfdGhpcyksIGV2ZW50LCBvblBhbm5pbmdTdGFydCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5uaW5nID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZWQgPSBfdGhpcy5zZXR1cC5kaXNhYmxlZDtcbiAgICAgICAgICAgIHZhciBvblBhbm5pbmcgPSBfdGhpcy5wcm9wcy5vblBhbm5pbmc7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGlzQWxsb3dlZCA9IGlzUGFubmluZ0FsbG93ZWQoX3RoaXMpO1xuICAgICAgICAgICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGtleXNQcmVzc2VkID0gX3RoaXMuaXNQcmVzc2luZ0tleXMoX3RoaXMuc2V0dXAucGFubmluZy5hY3RpdmF0aW9uS2V5cyk7XG4gICAgICAgICAgICBpZiAoIWtleXNQcmVzc2VkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGhhbmRsZVBhbm5pbmcoX3RoaXMsIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChfdGhpcyksIGV2ZW50LCBvblBhbm5pbmcpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFubmluZ1N0b3AgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBvblBhbm5pbmdTdG9wID0gX3RoaXMucHJvcHMub25QYW5uaW5nU3RvcDtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1Bhbm5pbmcpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVQYW5uaW5nRW5kKF90aGlzKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KF90aGlzKSwgZXZlbnQsIG9uUGFubmluZ1N0b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLy8gLy8vLy8vL1xuICAgICAgICAvLyBQaW5jaFxuICAgICAgICAvLy8gLy8vLy8vL1xuICAgICAgICB0aGlzLm9uUGluY2hTdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gX3RoaXMuc2V0dXAuZGlzYWJsZWQ7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgb25QaW5jaGluZ1N0YXJ0ID0gX2Eub25QaW5jaGluZ1N0YXJ0LCBvblpvb21TdGFydCA9IF9hLm9uWm9vbVN0YXJ0O1xuICAgICAgICAgICAgaWYgKGRpc2FibGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBpc0FsbG93ZWQgPSBpc1BpbmNoU3RhcnRBbGxvd2VkKF90aGlzLCBldmVudCk7XG4gICAgICAgICAgICBpZiAoIWlzQWxsb3dlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBoYW5kbGVQaW5jaFN0YXJ0KF90aGlzLCBldmVudCk7XG4gICAgICAgICAgICBoYW5kbGVDYW5jZWxBbmltYXRpb24oX3RoaXMpO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChfdGhpcyksIGV2ZW50LCBvblBpbmNoaW5nU3RhcnQpO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChfdGhpcyksIGV2ZW50LCBvblpvb21TdGFydCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QaW5jaCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gX3RoaXMuc2V0dXAuZGlzYWJsZWQ7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgb25QaW5jaGluZyA9IF9hLm9uUGluY2hpbmcsIG9uWm9vbSA9IF9hLm9uWm9vbTtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgaXNBbGxvd2VkID0gaXNQaW5jaEFsbG93ZWQoX3RoaXMpO1xuICAgICAgICAgICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaGFuZGxlUGluY2hab29tKF90aGlzLCBldmVudCk7XG4gICAgICAgICAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KF90aGlzKSwgZXZlbnQsIG9uUGluY2hpbmcpO1xuICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChfdGhpcyksIGV2ZW50LCBvblpvb20pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGluY2hTdG9wID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgb25QaW5jaGluZ1N0b3AgPSBfYS5vblBpbmNoaW5nU3RvcCwgb25ab29tU3RvcCA9IF9hLm9uWm9vbVN0b3A7XG4gICAgICAgICAgICBpZiAoX3RoaXMucGluY2hTdGFydFNjYWxlKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlUGluY2hTdG9wKF90aGlzKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KF90aGlzKSwgZXZlbnQsIG9uUGluY2hpbmdTdG9wKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KF90aGlzKSwgZXZlbnQsIG9uWm9vbVN0b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLy8gLy8vLy8vL1xuICAgICAgICAvLyBUb3VjaFxuICAgICAgICAvLy8gLy8vLy8vL1xuICAgICAgICB0aGlzLm9uVG91Y2hQYW5uaW5nU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IF90aGlzLnNldHVwLmRpc2FibGVkO1xuICAgICAgICAgICAgdmFyIG9uUGFubmluZ1N0YXJ0ID0gX3RoaXMucHJvcHMub25QYW5uaW5nU3RhcnQ7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGlzQWxsb3dlZCA9IGlzUGFubmluZ1N0YXJ0QWxsb3dlZChfdGhpcywgZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGlzRG91YmxlVGFwID0gX3RoaXMubGFzdFRvdWNoICYmXG4gICAgICAgICAgICAgICAgK25ldyBEYXRlKCkgLSBfdGhpcy5sYXN0VG91Y2ggPCAyMDAgJiZcbiAgICAgICAgICAgICAgICBldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgIGlmICghaXNEb3VibGVUYXApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5sYXN0VG91Y2ggPSArbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVDYW5jZWxBbmltYXRpb24oX3RoaXMpO1xuICAgICAgICAgICAgICAgIHZhciB0b3VjaGVzID0gZXZlbnQudG91Y2hlcztcbiAgICAgICAgICAgICAgICB2YXIgaXNQYW5uaW5nQWN0aW9uID0gdG91Y2hlcy5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICAgICAgdmFyIGlzUGluY2hBY3Rpb24gPSB0b3VjaGVzLmxlbmd0aCA9PT0gMjtcbiAgICAgICAgICAgICAgICBpZiAoaXNQYW5uaW5nQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUNhbmNlbEFuaW1hdGlvbihfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVBhbm5pbmdTdGFydChfdGhpcywgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDYWxsYmFjayhnZXRDb250ZXh0KF90aGlzKSwgZXZlbnQsIG9uUGFubmluZ1N0YXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzUGluY2hBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25QaW5jaFN0YXJ0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Ub3VjaFBhbm5pbmcgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IF90aGlzLnNldHVwLmRpc2FibGVkO1xuICAgICAgICAgICAgdmFyIG9uUGFubmluZyA9IF90aGlzLnByb3BzLm9uUGFubmluZztcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1Bhbm5pbmcgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgaXNBbGxvd2VkID0gaXNQYW5uaW5nQWxsb3dlZChfdGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FsbG93ZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgaGFuZGxlUGFubmluZyhfdGhpcywgdG91Y2guY2xpZW50WCwgdG91Y2guY2xpZW50WSk7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FsbGJhY2soZ2V0Q29udGV4dChfdGhpcyksIGV2ZW50LCBvblBhbm5pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25QaW5jaChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Ub3VjaFBhbm5pbmdTdG9wID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5vblBhbm5pbmdTdG9wKGV2ZW50KTtcbiAgICAgICAgICAgIF90aGlzLm9uUGluY2hTdG9wKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8vIC8vLy8vLy9cbiAgICAgICAgLy8gRG91YmxlIENsaWNrXG4gICAgICAgIC8vLyAvLy8vLy8vXG4gICAgICAgIHRoaXMub25Eb3VibGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gX3RoaXMuc2V0dXAuZGlzYWJsZWQ7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGlzQWxsb3dlZCA9IGlzRG91YmxlQ2xpY2tBbGxvd2VkKF90aGlzLCBldmVudCk7XG4gICAgICAgICAgICBpZiAoIWlzQWxsb3dlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBoYW5kbGVEb3VibGVDbGljayhfdGhpcywgZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICAvLy8gLy8vLy8vL1xuICAgICAgICAvLyBIZWxwZXJzXG4gICAgICAgIC8vLyAvLy8vLy8vXG4gICAgICAgIHRoaXMuY2xlYXJQYW5uaW5nID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNQYW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25QYW5uaW5nU3RvcChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0S2V5UHJlc3NlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfdGhpcy5wcmVzc2VkS2V5c1tlLmtleV0gPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEtleVVuUHJlc3NlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfdGhpcy5wcmVzc2VkS2V5c1tlLmtleV0gPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc1ByZXNzaW5nS2V5cyA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICBpZiAoIWtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihrZXlzLmZpbmQoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMucHJlc3NlZEtleXNba2V5XTsgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFRyYW5zZm9ybVN0YXRlID0gZnVuY3Rpb24gKHNjYWxlLCBwb3NpdGlvblgsIHBvc2l0aW9uWSkge1xuICAgICAgICAgICAgdmFyIG9uVHJhbnNmb3JtZWQgPSBfdGhpcy5wcm9wcy5vblRyYW5zZm9ybWVkO1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oc2NhbGUpICYmXG4gICAgICAgICAgICAgICAgIU51bWJlci5pc05hTihwb3NpdGlvblgpICYmXG4gICAgICAgICAgICAgICAgIU51bWJlci5pc05hTihwb3NpdGlvblkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlICE9PSBfdGhpcy50cmFuc2Zvcm1TdGF0ZS5zY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmFuc2Zvcm1TdGF0ZS5wcmV2aW91c1NjYWxlID0gX3RoaXMudHJhbnNmb3JtU3RhdGUuc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyYW5zZm9ybVN0YXRlLnNjYWxlID0gc2NhbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnRyYW5zZm9ybVN0YXRlLnBvc2l0aW9uWCA9IHBvc2l0aW9uWDtcbiAgICAgICAgICAgICAgICBfdGhpcy50cmFuc2Zvcm1TdGF0ZS5wb3NpdGlvblkgPSBwb3NpdGlvblk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXBwbHlUcmFuc2Zvcm1hdGlvbigpO1xuICAgICAgICAgICAgICAgIHZhciBjdHhfMSA9IGdldENvbnRleHQoX3RoaXMpO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uQ2hhbmdlQ2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHJldHVybiBjYWxsYmFjayhjdHhfMSk7IH0pO1xuICAgICAgICAgICAgICAgIGhhbmRsZUNhbGxiYWNrKGN0eF8xLCB7IHNjYWxlOiBzY2FsZSwgcG9zaXRpb25YOiBwb3NpdGlvblgsIHBvc2l0aW9uWTogcG9zaXRpb25ZIH0sIG9uVHJhbnNmb3JtZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRldGVjdGVkIE5hTiBzZXQgc3RhdGUgdmFsdWVzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy53cmFwcGVyQ29tcG9uZW50ICYmIF90aGlzLmNvbnRlbnRDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSBnZXRDZW50ZXJQb3NpdGlvbihfdGhpcy50cmFuc2Zvcm1TdGF0ZS5zY2FsZSwgX3RoaXMud3JhcHBlckNvbXBvbmVudCwgX3RoaXMuY29udGVudENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0VHJhbnNmb3JtU3RhdGUodGFyZ2V0U3RhdGUuc2NhbGUsIHRhcmdldFN0YXRlLnBvc2l0aW9uWCwgdGFyZ2V0U3RhdGUucG9zaXRpb25ZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVUcmFuc2Zvcm1TdHlsZXMgPSBmdW5jdGlvbiAoeCwgeSwgc2NhbGUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy5jdXN0b21UcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMuY3VzdG9tVHJhbnNmb3JtKHgsIHksIHNjYWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRUcmFuc2Zvcm1TdHlsZXMoeCwgeSwgc2NhbGUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLm1vdW50ZWQgfHwgIV90aGlzLmNvbnRlbnRDb21wb25lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMudHJhbnNmb3JtU3RhdGUsIHNjYWxlID0gX2Euc2NhbGUsIHBvc2l0aW9uWCA9IF9hLnBvc2l0aW9uWCwgcG9zaXRpb25ZID0gX2EucG9zaXRpb25ZO1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IF90aGlzLmhhbmRsZVRyYW5zZm9ybVN0eWxlcyhwb3NpdGlvblgsIHBvc2l0aW9uWSwgc2NhbGUpO1xuICAgICAgICAgICAgX3RoaXMuY29udGVudENvbXBvbmVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRDb250ZXh0KF90aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvb2tzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLm9uQ2hhbmdlQ2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkNoYW5nZUNhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkNoYW5nZUNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkluaXQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMub25Jbml0Q2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkluaXRDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25Jbml0Q2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6YXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICh3cmFwcGVyQ29tcG9uZW50LCBjb250ZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5jbGVhbnVwV2luZG93RXZlbnRzKCk7XG4gICAgICAgICAgICBfdGhpcy53cmFwcGVyQ29tcG9uZW50ID0gd3JhcHBlckNvbXBvbmVudDtcbiAgICAgICAgICAgIF90aGlzLmNvbnRlbnRDb21wb25lbnQgPSBjb250ZW50Q29tcG9uZW50O1xuICAgICAgICAgICAgaGFuZGxlQ2FsY3VsYXRlQm91bmRzKF90aGlzLCBfdGhpcy50cmFuc2Zvcm1TdGF0ZS5zY2FsZSk7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVJbml0aWFsaXplV3JhcHBlckV2ZW50cyh3cmFwcGVyQ29tcG9uZW50KTtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZUluaXRpYWxpemUod3JhcHBlckNvbXBvbmVudCwgY29udGVudENvbXBvbmVudCk7XG4gICAgICAgICAgICBfdGhpcy5pbml0aWFsaXplV2luZG93RXZlbnRzKCk7XG4gICAgICAgICAgICBfdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBjdHggPSBnZXRDb250ZXh0KF90aGlzKTtcbiAgICAgICAgICAgIGhhbmRsZUNhbGxiYWNrKGN0eCwgdW5kZWZpbmVkLCBfdGhpcy5wcm9wcy5vbkluaXQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMuc2V0dXAgPSBjcmVhdGVTZXR1cCh0aGlzLnByb3BzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1TdGF0ZSA9IGNyZWF0ZVN0YXRlKHRoaXMucHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gWm9vbVBhblBpbmNoO1xufSgpKTtcblxudmFyIENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xudmFyIGdldENvbnRlbnQgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIGN0eCkge1xuICAgIGlmICh0eXBlb2YgY2hpbGRyZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gY2hpbGRyZW4oY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xufTtcbnZhciBUcmFuc2Zvcm1XcmFwcGVyID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICAgIHZhciBpbnN0YW5jZSA9IHVzZVJlZihuZXcgWm9vbVBhblBpbmNoKHByb3BzKSkuY3VycmVudDtcbiAgICB2YXIgY29udGVudCA9IGdldENvbnRlbnQocHJvcHMuY2hpbGRyZW4sIGdldENvbnRyb2xzKGluc3RhbmNlKSk7XG4gICAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldENvbnRyb2xzKGluc3RhbmNlKTsgfSwgW2luc3RhbmNlXSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW5zdGFuY2UudXBkYXRlKHByb3BzKTtcbiAgICB9LCBbaW5zdGFuY2UsIHByb3BzXSk7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogaW5zdGFuY2UgfSwgY29udGVudCk7XG59KTtcblxudmFyIEtlZXBTY2FsZSA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgICB2YXIgbG9jYWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgdmFyIGluc3RhbmNlID0gdXNlQ29udGV4dChDb250ZXh0KTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2Uub25DaGFuZ2UoZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25YID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25ZID0gMDtcbiAgICAgICAgICAgICAgICBsb2NhbFJlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybSA9IGluc3RhbmNlLmhhbmRsZVRyYW5zZm9ybVN0eWxlcyhwb3NpdGlvblgsIHBvc2l0aW9uWSwgMSAvIGN0eC5pbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5zY2FsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIFtpbnN0YW5jZV0pO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fYXNzaWduKHt9LCBwcm9wcywgeyByZWY6IG1lcmdlUmVmcyhbbG9jYWxSZWYsIHJlZl0pIH0pKTtcbn0pO1xuXG52YXIgaW5pdGlhbEVsZW1lbnRSZWN0ID0ge1xuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMCxcbiAgICB5OiAwLFxuICAgIHg6IDAsXG4gICAgdG9wOiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAwLFxufTtcbnZhciB1c2VSZXNpemUgPSBmdW5jdGlvbiAocmVmLCBvblJlc2l6ZSwgZGVwZW5kZW5jaWVzKSB7XG4gICAgdmFyIHJlc2l6ZU9ic2VydmVyUmVmID0gdXNlUmVmKCk7XG4gICAgdmFyIHJlY3RSZWYgPSB1c2VSZWYoaW5pdGlhbEVsZW1lbnRSZWN0KTtcbiAgICB2YXIgZGlkVW5tb3VudCA9IHVzZVJlZihmYWxzZSk7XG4gICAgdXNlTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBkaWRVbm1vdW50LmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKCEoXCJSZXNpemVPYnNlcnZlclwiIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmKSB7XG4gICAgICAgICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1NpemUgPSByZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGVudHJpZXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICFlbnRyaWVzLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgICAgICBkaWRVbm1vdW50LmN1cnJlbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgKG5ld1NpemUud2lkdGggPT09IHJlY3RSZWYuY3VycmVudC53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZS5oZWlnaHQgPT09IHJlY3RSZWYuY3VycmVudC5oZWlnaHQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgb25SZXNpemUobmV3U2l6ZSwgcmVmKTtcbiAgICAgICAgICAgICAgICByZWN0UmVmLmN1cnJlbnQgPSBuZXdTaXplO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAoX2EgPSByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub2JzZXJ2ZShyZWYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBkaWRVbm1vdW50LmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHJlZikge1xuICAgICAgICAgICAgICAgIChfYSA9IHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51bm9ic2VydmUocmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIF9fc3ByZWFkQXJyYXkoW29uUmVzaXplLCByZWZdLCBkZXBlbmRlbmNpZXMsIHRydWUpKTtcbn07XG5cbnZhciBwcmV2aWV3U3R5bGVzID0ge1xuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgekluZGV4OiAyLFxuICAgIHRvcDogXCIwcHhcIixcbiAgICBsZWZ0OiBcIjBweFwiLFxuICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgYm9yZGVyOiBcIjNweCBzb2xpZCByZWRcIixcbiAgICB0cmFuc2Zvcm1PcmlnaW46IFwiMCUgMCVcIixcbiAgICBib3hTaGFkb3c6IFwicmdiYSgwLDAsMCwwLjIpIDAgMCAwIDEwMDAwMDAwcHhcIixcbn07XG52YXIgTWluaU1hcCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IF9hLndpZHRoLCB3aWR0aCA9IF9iID09PSB2b2lkIDAgPyAyMDAgOiBfYiwgX2MgPSBfYS5oZWlnaHQsIGhlaWdodCA9IF9jID09PSB2b2lkIDAgPyAyMDAgOiBfYywgX2QgPSBfYS5ib3JkZXJDb2xvciwgYm9yZGVyQ29sb3IgPSBfZCA9PT0gdm9pZCAwID8gXCJyZWRcIiA6IF9kLCBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCByZXN0ID0gX19yZXN0KF9hLCBbXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcImJvcmRlckNvbG9yXCIsIFwiY2hpbGRyZW5cIl0pO1xuICAgIHZhciBfZSA9IHVzZVN0YXRlKGZhbHNlKSwgaW5pdGlhbGl6ZWQgPSBfZVswXSwgc2V0SW5pdGlhbGl6ZWQgPSBfZVsxXTtcbiAgICB2YXIgaW5zdGFuY2UgPSB1c2VUcmFuc2Zvcm1Db250ZXh0KCk7XG4gICAgdmFyIG1pbmlNYXBJbnN0YW5jZSA9IHVzZVJlZihudWxsKTtcbiAgICB2YXIgbWFpblJlZiA9IHVzZVJlZihudWxsKTtcbiAgICB2YXIgd3JhcHBlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgICB2YXIgcHJldmlld1JlZiA9IHVzZVJlZihudWxsKTtcbiAgICB2YXIgZ2V0Vmlld3BvcnRTaXplID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaW5zdGFuY2Uud3JhcHBlckNvbXBvbmVudCkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBpbnN0YW5jZS53cmFwcGVyQ29tcG9uZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIH07XG4gICAgfSwgW2luc3RhbmNlLndyYXBwZXJDb21wb25lbnRdKTtcbiAgICB2YXIgZ2V0Q29udGVudFNpemUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZS5jb250ZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGluc3RhbmNlLmNvbnRlbnRDb21wb25lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0LndpZHRoIC8gaW5zdGFuY2UudHJhbnNmb3JtU3RhdGUuc2NhbGUsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCAvIGluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIH07XG4gICAgfSwgW2luc3RhbmNlLmNvbnRlbnRDb21wb25lbnQsIGluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlXSk7XG4gICAgdmFyIGNvbXB1dGVNaW5pTWFwU2NhbGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZW50U2l6ZSA9IGdldENvbnRlbnRTaXplKCk7XG4gICAgICAgIHZhciBzY2FsZVggPSB3aWR0aCAvIGNvbnRlbnRTaXplLndpZHRoO1xuICAgICAgICB2YXIgc2NhbGVZID0gaGVpZ2h0IC8gY29udGVudFNpemUuaGVpZ2h0O1xuICAgICAgICB2YXIgc2NhbGUgPSBzY2FsZVkgPiBzY2FsZVggPyBzY2FsZVggOiBzY2FsZVk7XG4gICAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9LCBbZ2V0Q29udGVudFNpemUsIGhlaWdodCwgd2lkdGhdKTtcbiAgICB2YXIgY29tcHV0ZU1pbmlNYXBTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGVudFNpemUgPSBnZXRDb250ZW50U2l6ZSgpO1xuICAgICAgICB2YXIgc2NhbGVYID0gd2lkdGggLyBjb250ZW50U2l6ZS53aWR0aDtcbiAgICAgICAgdmFyIHNjYWxlWSA9IGhlaWdodCAvIGNvbnRlbnRTaXplLmhlaWdodDtcbiAgICAgICAgaWYgKHNjYWxlWSA+IHNjYWxlWCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGNvbnRlbnRTaXplLmhlaWdodCAqIHNjYWxlWCB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiBjb250ZW50U2l6ZS53aWR0aCAqIHNjYWxlWSwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICB9O1xuICAgIHZhciBjb21wdXRlTWluaU1hcFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NhbGUgPSBjb21wdXRlTWluaU1hcFNjYWxlKCk7XG4gICAgICAgIHZhciBzdHlsZSA9IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJzY2FsZShcIi5jb25jYXQoc2NhbGUgfHwgMSwgXCIpXCIpLFxuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBcIjAlIDAlXCIsXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgICAgIHpJbmRleDogMSxcbiAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICB9O1xuICAgICAgICBPYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAod3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlclJlZi5jdXJyZW50LnN0eWxlW2tleV0gPSBzdHlsZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciB0cmFuc2Zvcm1NaW5pTWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wdXRlTWluaU1hcFN0eWxlKCk7XG4gICAgICAgIHZhciBtaW5pU2l6ZSA9IGNvbXB1dGVNaW5pTWFwU2l6ZSgpO1xuICAgICAgICB2YXIgd3JhcFNpemUgPSBnZXRDb250ZW50U2l6ZSgpO1xuICAgICAgICBpZiAod3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICB3cmFwcGVyUmVmLmN1cnJlbnQuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdCh3cmFwU2l6ZS53aWR0aCwgXCJweFwiKTtcbiAgICAgICAgICAgIHdyYXBwZXJSZWYuY3VycmVudC5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdCh3cmFwU2l6ZS5oZWlnaHQsIFwicHhcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1haW5SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgbWFpblJlZi5jdXJyZW50LnN0eWxlLndpZHRoID0gXCJcIi5jb25jYXQobWluaVNpemUud2lkdGgsIFwicHhcIik7XG4gICAgICAgICAgICBtYWluUmVmLmN1cnJlbnQuc3R5bGUuaGVpZ2h0ID0gXCJcIi5jb25jYXQobWluaVNpemUuaGVpZ2h0LCBcInB4XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2aWV3UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gZ2V0Vmlld3BvcnRTaXplKCk7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSBjb21wdXRlTWluaU1hcFNjYWxlKCk7XG4gICAgICAgICAgICB2YXIgcHJldmlld1NjYWxlID0gc2NhbGUgKiAoMSAvIGluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlKTtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBpbnN0YW5jZS5oYW5kbGVUcmFuc2Zvcm1TdHlsZXMoLWluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnBvc2l0aW9uWCAqIHByZXZpZXdTY2FsZSwgLWluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnBvc2l0aW9uWSAqIHByZXZpZXdTY2FsZSwgMSk7XG4gICAgICAgICAgICBwcmV2aWV3UmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICAgICAgcHJldmlld1JlZi5jdXJyZW50LnN0eWxlLndpZHRoID0gXCJcIi5jb25jYXQoc2l6ZS53aWR0aCAqIHByZXZpZXdTY2FsZSwgXCJweFwiKTtcbiAgICAgICAgICAgIHByZXZpZXdSZWYuY3VycmVudC5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChzaXplLmhlaWdodCAqIHByZXZpZXdTY2FsZSwgXCJweFwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyYW5zZm9ybU1pbmlNYXAoKTtcbiAgICB9O1xuICAgIHVzZVRyYW5zZm9ybUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyYW5zZm9ybU1pbmlNYXAoKTtcbiAgICB9KTtcbiAgICB1c2VUcmFuc2Zvcm1Jbml0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW5pdGlhbGl6ZSgpO1xuICAgICAgICBzZXRJbml0aWFsaXplZCh0cnVlKTtcbiAgICB9KTtcbiAgICB1c2VSZXNpemUoaW5zdGFuY2UuY29udGVudENvbXBvbmVudCwgaW5pdGlhbGl6ZSwgW2luaXRpYWxpemVkXSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLm9uQ2hhbmdlKGZ1bmN0aW9uICh6cHApIHtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IGNvbXB1dGVNaW5pTWFwU2NhbGUoKTtcbiAgICAgICAgICAgIGlmIChtaW5pTWFwSW5zdGFuY2UuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIG1pbmlNYXBJbnN0YW5jZS5jdXJyZW50Lmluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlID1cbiAgICAgICAgICAgICAgICAgICAgenBwLmluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnNjYWxlO1xuICAgICAgICAgICAgICAgIG1pbmlNYXBJbnN0YW5jZS5jdXJyZW50Lmluc3RhbmNlLnRyYW5zZm9ybVN0YXRlLnBvc2l0aW9uWCA9XG4gICAgICAgICAgICAgICAgICAgIHpwcC5pbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5wb3NpdGlvblggKiBzY2FsZTtcbiAgICAgICAgICAgICAgICBtaW5pTWFwSW5zdGFuY2UuY3VycmVudC5pbnN0YW5jZS50cmFuc2Zvcm1TdGF0ZS5wb3NpdGlvblkgPVxuICAgICAgICAgICAgICAgICAgICB6cHAuaW5zdGFuY2UudHJhbnNmb3JtU3RhdGUucG9zaXRpb25ZICogc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIFtjb21wdXRlTWluaU1hcFNjYWxlLCBpbnN0YW5jZSwgbWluaU1hcEluc3RhbmNlXSk7XG4gICAgdmFyIHdyYXBwZXJTdHlsZSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgIHpJbmRleDogMixcbiAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oe30sIHJlc3QsIHsgcmVmOiBtYWluUmVmLCBzdHlsZTogd3JhcHBlclN0eWxlLCBjbGFzc05hbWU6IFwicnpwcC1taW5pLW1hcCBcIi5jb25jYXQocmVzdC5jbGFzc05hbWUgfHwgXCJcIikgfSksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oe30sIHJlc3QsIHsgcmVmOiB3cmFwcGVyUmVmLCBjbGFzc05hbWU6IFwicnpwcC13cmFwcGVyXCIgfSksIGNoaWxkcmVuKSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyenBwLXByZXZpZXdcIiwgcmVmOiBwcmV2aWV3UmVmLCBzdHlsZTogX19hc3NpZ24oX19hc3NpZ24oe30sIHByZXZpZXdTdHlsZXMpLCB7IGJvcmRlckNvbG9yOiBib3JkZXJDb2xvciB9KSB9KSkpO1xufTtcblxuZnVuY3Rpb24gc3R5bGVJbmplY3QoY3NzLCByZWYpIHtcbiAgaWYgKCByZWYgPT09IHZvaWQgMCApIHJlZiA9IHt9O1xuICB2YXIgaW5zZXJ0QXQgPSByZWYuaW5zZXJ0QXQ7XG5cbiAgaWYgKCFjc3MgfHwgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgeyByZXR1cm47IH1cblxuICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cbiAgaWYgKGluc2VydEF0ID09PSAndG9wJykge1xuICAgIGlmIChoZWFkLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgY3NzXzI0OHogPSBcIi50cmFuc2Zvcm0tY29tcG9uZW50LW1vZHVsZV93cmFwcGVyX19TUEI4NiB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICB3aWR0aDogLW1vei1maXQtY29udGVudDtcXG4gIHdpZHRoOiBmaXQtY29udGVudDtcXG4gIGhlaWdodDogLW1vei1maXQtY29udGVudDtcXG4gIGhlaWdodDogZml0LWNvbnRlbnQ7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOyAvKiBpT1MgU2FmYXJpICovXFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAvKiBTYWZhcmkgKi9cXG4gIC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTsgLyogS29ucXVlcm9yIEhUTUwgKi9cXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC8qIEZpcmVmb3ggKi9cXG4gIC1tcy11c2VyLXNlbGVjdDogbm9uZTsgLyogSW50ZXJuZXQgRXhwbG9yZXIvRWRnZSAqL1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcXG59XFxuLnRyYW5zZm9ybS1jb21wb25lbnQtbW9kdWxlX2NvbnRlbnRfX0ZCV3hvIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuICB3aWR0aDogLW1vei1maXQtY29udGVudDtcXG4gIHdpZHRoOiBmaXQtY29udGVudDtcXG4gIGhlaWdodDogLW1vei1maXQtY29udGVudDtcXG4gIGhlaWdodDogZml0LWNvbnRlbnQ7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgdHJhbnNmb3JtLW9yaWdpbjogMCUgMCU7XFxufVxcbi50cmFuc2Zvcm0tY29tcG9uZW50LW1vZHVsZV9jb250ZW50X19GQld4byBpbWcge1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcblwiO1xudmFyIHN0eWxlcyA9IHtcIndyYXBwZXJcIjpcInRyYW5zZm9ybS1jb21wb25lbnQtbW9kdWxlX3dyYXBwZXJfX1NQQjg2XCIsXCJjb250ZW50XCI6XCJ0cmFuc2Zvcm0tY29tcG9uZW50LW1vZHVsZV9jb250ZW50X19GQld4b1wifTtcbnN0eWxlSW5qZWN0KGNzc18yNDh6KTtcblxudmFyIFRyYW5zZm9ybUNvbXBvbmVudCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBfYiA9IF9hLndyYXBwZXJDbGFzcywgd3JhcHBlckNsYXNzID0gX2IgPT09IHZvaWQgMCA/IFwiXCIgOiBfYiwgX2MgPSBfYS5jb250ZW50Q2xhc3MsIGNvbnRlbnRDbGFzcyA9IF9jID09PSB2b2lkIDAgPyBcIlwiIDogX2MsIHdyYXBwZXJTdHlsZSA9IF9hLndyYXBwZXJTdHlsZSwgY29udGVudFN0eWxlID0gX2EuY29udGVudFN0eWxlLCBfZCA9IF9hLndyYXBwZXJQcm9wcywgd3JhcHBlclByb3BzID0gX2QgPT09IHZvaWQgMCA/IHt9IDogX2QsIF9lID0gX2EuY29udGVudFByb3BzLCBjb250ZW50UHJvcHMgPSBfZSA9PT0gdm9pZCAwID8ge30gOiBfZTtcbiAgICB2YXIgX2YgPSB1c2VDb250ZXh0KENvbnRleHQpLCBpbml0ID0gX2YuaW5pdCwgY2xlYW51cFdpbmRvd0V2ZW50cyA9IF9mLmNsZWFudXBXaW5kb3dFdmVudHM7XG4gICAgdmFyIHdyYXBwZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgdmFyIGNvbnRlbnRSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB3cmFwcGVyUmVmLmN1cnJlbnQ7XG4gICAgICAgIHZhciBjb250ZW50ID0gY29udGVudFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAod3JhcHBlciAhPT0gbnVsbCAmJiBjb250ZW50ICE9PSBudWxsICYmIGluaXQpIHtcbiAgICAgICAgICAgIGluaXQgPT09IG51bGwgfHwgaW5pdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5pdCh3cmFwcGVyLCBjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhbnVwV2luZG93RXZlbnRzID09PSBudWxsIHx8IGNsZWFudXBXaW5kb3dFdmVudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsZWFudXBXaW5kb3dFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fYXNzaWduKHt9LCB3cmFwcGVyUHJvcHMsIHsgcmVmOiB3cmFwcGVyUmVmLCBjbGFzc05hbWU6IFwiXCIuY29uY2F0KGJhc2VDbGFzc2VzLndyYXBwZXJDbGFzcywgXCIgXCIpLmNvbmNhdChzdHlsZXMud3JhcHBlciwgXCIgXCIpLmNvbmNhdCh3cmFwcGVyQ2xhc3MpLCBzdHlsZTogd3JhcHBlclN0eWxlIH0pLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fYXNzaWduKHt9LCBjb250ZW50UHJvcHMsIHsgcmVmOiBjb250ZW50UmVmLCBjbGFzc05hbWU6IFwiXCIuY29uY2F0KGJhc2VDbGFzc2VzLmNvbnRlbnRDbGFzcywgXCIgXCIpLmNvbmNhdChzdHlsZXMuY29udGVudCwgXCIgXCIpLmNvbmNhdChjb250ZW50Q2xhc3MpLCBzdHlsZTogY29udGVudFN0eWxlIH0pLCBjaGlsZHJlbikpKTtcbn07XG5cbnZhciB1c2VUcmFuc2Zvcm1Db250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsaWJyYXJ5Q29udGV4dCA9IHVzZUNvbnRleHQoQ29udGV4dCk7XG4gICAgaWYgKCFsaWJyYXJ5Q29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2Zvcm0gY29udGV4dCBtdXN0IGJlIHBsYWNlZCBpbnNpZGUgVHJhbnNmb3JtV3JhcHBlclwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpYnJhcnlDb250ZXh0O1xufTtcblxudmFyIHVzZUNvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsaWJyYXJ5Q29udGV4dCA9IHVzZVRyYW5zZm9ybUNvbnRleHQoKTtcbiAgICByZXR1cm4gZ2V0Q29udHJvbHMobGlicmFyeUNvbnRleHQpO1xufTtcblxudmFyIHVzZVRyYW5zZm9ybUluaXQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICB2YXIgbGlicmFyeUNvbnRleHQgPSB1c2VUcmFuc2Zvcm1Db250ZXh0KCk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVubW91bnRDYWxsYmFjaztcbiAgICAgICAgdmFyIHVubW91bnQ7XG4gICAgICAgIGlmIChsaWJyYXJ5Q29udGV4dC5jb250ZW50Q29tcG9uZW50ICYmIGxpYnJhcnlDb250ZXh0LndyYXBwZXJDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHVubW91bnRDYWxsYmFjayA9IGNhbGxiYWNrKGdldFN0YXRlKGxpYnJhcnlDb250ZXh0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1bm1vdW50ID0gbGlicmFyeUNvbnRleHQub25Jbml0KGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2FsbGJhY2sgPSBjYWxsYmFjayhnZXRTdGF0ZShyZWYuaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1bm1vdW50ID09PSBudWxsIHx8IHVubW91bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVubW91bnQoKTtcbiAgICAgICAgICAgIHVubW91bnRDYWxsYmFjayA9PT0gbnVsbCB8fCB1bm1vdW50Q2FsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVubW91bnRDYWxsYmFjaygpO1xuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbn07XG5cbnZhciB1c2VUcmFuc2Zvcm1FZmZlY3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICB2YXIgbGlicmFyeUNvbnRleHQgPSB1c2VUcmFuc2Zvcm1Db250ZXh0KCk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVubW91bnRDYWxsYmFjaztcbiAgICAgICAgdmFyIHVubW91bnQgPSBsaWJyYXJ5Q29udGV4dC5vbkNoYW5nZShmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgICAgICB1bm1vdW50Q2FsbGJhY2sgPSBjYWxsYmFjayhnZXRTdGF0ZShyZWYuaW5zdGFuY2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgICAgICB1bm1vdW50Q2FsbGJhY2sgPT09IG51bGwgfHwgdW5tb3VudENhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1bm1vdW50Q2FsbGJhY2soKTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2FsbGJhY2ssIGxpYnJhcnlDb250ZXh0XSk7XG59O1xuXG5mdW5jdGlvbiB1c2VUcmFuc2Zvcm1Db21wb25lbnQoY2FsbGJhY2spIHtcbiAgICB2YXIgbGlicmFyeUNvbnRleHQgPSB1c2VUcmFuc2Zvcm1Db250ZXh0KCk7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoY2FsbGJhY2soZ2V0U3RhdGUobGlicmFyeUNvbnRleHQpKSksIHRyYW5zZm9ybVJlbmRlciA9IF9hWzBdLCBzZXRUcmFuc2Zvcm1SZW5kZXIgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbW91bnRlZCA9IHRydWU7XG4gICAgICAgIHZhciB1bm1vdW50ID0gbGlicmFyeUNvbnRleHQub25DaGFuZ2UoZnVuY3Rpb24gKHJlZikge1xuICAgICAgICAgICAgaWYgKG1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBzZXRUcmFuc2Zvcm1SZW5kZXIoY2FsbGJhY2soZ2V0U3RhdGUocmVmLmluc3RhbmNlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgICAgIG1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2FsbGJhY2ssIGxpYnJhcnlDb250ZXh0XSk7XG4gICAgcmV0dXJuIHRyYW5zZm9ybVJlbmRlcjtcbn1cblxuZXhwb3J0IHsgQ29udGV4dCwgS2VlcFNjYWxlLCBNaW5pTWFwLCBUcmFuc2Zvcm1Db21wb25lbnQsIFRyYW5zZm9ybVdyYXBwZXIsIGdldENlbnRlclBvc2l0aW9uLCBnZXRNYXRyaXhUcmFuc2Zvcm1TdHlsZXMsIGdldFRyYW5zZm9ybVN0eWxlcywgdXNlQ29udHJvbHMsIHVzZVRyYW5zZm9ybUNvbXBvbmVudCwgdXNlVHJhbnNmb3JtQ29udGV4dCwgdXNlVHJhbnNmb3JtRWZmZWN0LCB1c2VUcmFuc2Zvcm1Jbml0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/react-zoom-pan-pinch/dist/index.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/showroom/[slug]/page.tsx":
/*!******************************************!*\
  !*** ./src/app/showroom/[slug]/page.tsx ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProductDetail)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var react_zoom_pan_pinch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-zoom-pan-pinch */ \"(app-pages-browser)/./node_modules/react-zoom-pan-pinch/dist/index.esm.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\nfunction ProductDetail() {\n    _s();\n    const { slug } = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useParams)();\n    const [product, setProduct] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [related, setRelated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [mainImgIdx, setMainImgIdx] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [modalOpen, setModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ProductDetail.useEffect\": ()=>{\n            async function fetchProduct() {\n                const res = await fetch(\"/api/products/\".concat(slug));\n                const data = await res.json();\n                setProduct(data.product);\n                setRelated(data.related || []);\n                setLoading(false);\n            }\n            fetchProduct();\n        }\n    }[\"ProductDetail.useEffect\"], [\n        slug\n    ]);\n    function formatPrice(value) {\n        if (value === null || value === undefined) return '';\n        const num = typeof value === 'number' ? value : parseFloat(value.toString().replace(/,/g, ''));\n        if (isNaN(num)) return '';\n        return num.toLocaleString('en-GB');\n    }\n    if (loading) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"text-center py-16\",\n        children: \"Loading...\"\n    }, void 0, false, {\n        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n        lineNumber: 32,\n        columnNumber: 23\n    }, this);\n    if (!product) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"text-center py-16\",\n        children: \"Product not found.\"\n    }, void 0, false, {\n        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n        lineNumber: 33,\n        columnNumber: 24\n    }, this);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n        className: \"max-w-5xl mx-auto py-12 px-4 md:px-0\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                className: \"flex flex-col md:flex-row gap-10 mb-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 flex flex-col items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full aspect-square bg-sand rounded-lg mb-4 flex items-center justify-center overflow-hidden cursor-zoom-in relative group\",\n                                onClick: ()=>setModalOpen(true),\n                                children: [\n                                    product.images && product.images[mainImgIdx] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: product.images[mainImgIdx].url,\n                                        alt: product.images[mainImgIdx].alt || product.title,\n                                        className: \"object-cover w-full h-full transition-transform duration-200 group-hover:scale-105\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 42,\n                                        columnNumber: 15\n                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-6xl text-espresso\",\n                                        children: \"\\uD83E\\uDE91\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 44,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"absolute bottom-2 right-2 bg-espresso/80 text-ivory text-xs px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition\",\n                                        children: \"Click to enlarge\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 46,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 40,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-2 justify-center mt-2\",\n                                children: product.images && product.images.map((img, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-16 h-16 rounded border-2 \".concat(mainImgIdx === i ? 'border-brass' : 'border-sand', \" overflow-hidden focus:outline-none\"),\n                                        onClick: ()=>setMainImgIdx(i),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: img.url,\n                                            alt: img.alt || product.title,\n                                            className: \"object-cover w-full h-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 51,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, i, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 50,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 48,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                        lineNumber: 39,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 flex flex-col justify-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-3 mb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                        className: \"font-heading text-3xl md:text-4xl font-bold uppercase text-espresso tracking-tight\",\n                                        children: product.title\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 59,\n                                        columnNumber: 13\n                                    }, this),\n                                    product.featured && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"inline-block bg-brass text-espresso text-xs rounded px-2 py-0.5 uppercase font-bold\",\n                                        children: \"Featured\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 60,\n                                        columnNumber: 34\n                                    }, this),\n                                    product.status === 'sold' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"inline-block bg-red-400 text-white text-xs rounded px-2 py-0.5 uppercase font-bold\",\n                                        children: \"SOLD\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 61,\n                                        columnNumber: 43\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 58,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"font-body text-2xl text-brass font-bold mb-4\",\n                                children: [\n                                    \"\\xa3\",\n                                    formatPrice(product.price)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 63,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mb-6\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-body text-base text-sand mb-2 whitespace-pre-line\",\n                                        children: product.description\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 65,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                        className: \"text-sm text-sand space-y-1\",\n                                        children: [\n                                            product.dimensions && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                                        children: \"Dimensions:\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                        lineNumber: 67,\n                                                        columnNumber: 42\n                                                    }, this),\n                                                    \" \",\n                                                    product.dimensions\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 67,\n                                                columnNumber: 38\n                                            }, this),\n                                            product.condition && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                                        children: \"Condition:\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                        lineNumber: 68,\n                                                        columnNumber: 41\n                                                    }, this),\n                                                    \" \",\n                                                    product.condition\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 68,\n                                                columnNumber: 37\n                                            }, this),\n                                            product.origin && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                                        children: \"Origin:\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                        lineNumber: 69,\n                                                        columnNumber: 38\n                                                    }, this),\n                                                    \" \",\n                                                    product.origin\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 69,\n                                                columnNumber: 34\n                                            }, this),\n                                            product.period && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                                        children: \"Period:\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                        lineNumber: 70,\n                                                        columnNumber: 38\n                                                    }, this),\n                                                    \" \",\n                                                    product.period\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 70,\n                                                columnNumber: 34\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 66,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 64,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                                className: \"mb-4 bg-ivory/60 rounded p-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                                        className: \"cursor-pointer font-bold text-espresso\",\n                                        children: \"Delivery Information\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 75,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 text-sand text-sm\",\n                                        children: \"Delivery details and options will be shown here.\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 76,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 74,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-4 mb-6\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                        href: \"#\",\n                                        \"aria-label\": \"Share on Facebook\",\n                                        className: \"hover:text-brass\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            width: \"24\",\n                                            height: \"24\",\n                                            fill: \"currentColor\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M22 12c0-5.522-4.477-10-10-10S2 6.478 2 12c0 5 3.657 9.127 8.438 9.877v-6.987h-2.54v-2.89h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.242 0-1.632.771-1.632 1.562v1.875h2.773l-.443 2.89h-2.33v6.987C18.343 21.127 22 17 22 12\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 80,\n                                                columnNumber: 133\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 80,\n                                            columnNumber: 85\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 80,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                        href: \"#\",\n                                        \"aria-label\": \"Share on Twitter\",\n                                        className: \"hover:text-brass\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            width: \"24\",\n                                            height: \"24\",\n                                            fill: \"currentColor\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M22.46 5.924c-.793.352-1.645.59-2.54.698a4.48 4.48 0 0 0 1.963-2.475 8.94 8.94 0 0 1-2.828 1.082A4.48 4.48 0 0 0 16.11 4c-2.485 0-4.5 2.015-4.5 4.5 0 .353.04.697.116 1.026C7.728 9.37 4.1 7.575 1.67 4.905c-.387.664-.61 1.437-.61 2.26 0 1.56.794 2.936 2.003 3.744-.737-.023-1.43-.226-2.037-.563v.057c0 2.18 1.55 4.002 3.604 4.417-.377.103-.775.158-1.185.158-.29 0-.568-.028-.84-.08.568 1.772 2.217 3.062 4.175 3.096A8.98 8.98 0 0 1 2 19.54a12.68 12.68 0 0 0 6.88 2.017c8.253 0 12.77-6.833 12.77-12.76 0-.195-.004-.39-.013-.583A9.14 9.14 0 0 0 24 4.59a8.94 8.94 0 0 1-2.54.697z\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 81,\n                                                columnNumber: 132\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 81,\n                                            columnNumber: 84\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 81,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                        href: \"#\",\n                                        \"aria-label\": \"Share on Pinterest\",\n                                        className: \"hover:text-brass\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            width: \"24\",\n                                            height: \"24\",\n                                            fill: \"currentColor\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M12 2C6.477 2 2 6.477 2 12c0 4.084 2.438 7.563 5.938 8.938-.082-.76-.156-1.926.033-2.755.17-.73 1.09-4.646 1.09-4.646s-.277-.555-.277-1.375c0-1.29.748-2.254 1.68-2.254.793 0 1.176.596 1.176 1.312 0 .8-.51 1.995-.773 3.106-.22.93.468 1.688 1.39 1.688 1.668 0 2.953-1.76 2.953-4.297 0-2.25-1.62-3.825-3.936-3.825-2.684 0-4.26 2.012-4.26 4.09 0 .81.312 1.68.702 2.15.078.094.09.176.066.27-.072.293-.23.93-.26 1.06-.04.17-.13.207-.3.125-1.12-.52-1.82-2.15-1.82-3.463 0-2.82 2.05-6.06 6.11-6.06 3.21 0 5.7 2.29 5.7 5.35 0 3.18-1.99 5.74-4.76 5.74-1.01 0-1.96-.53-2.28-1.14l-.62 2.36c-.18.7-.67 1.58-1 2.12.75.23 1.54.36 2.37.36 5.523 0 10-4.477 10-10S17.523 2 12 2z\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 82,\n                                                columnNumber: 134\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 82,\n                                            columnNumber: 86\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 82,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 79,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"bg-brass text-espresso font-bold rounded px-8 py-3 border-2 border-brass shadow-lg transition-colors duration-200 hover:bg-espresso hover:text-ivory text-lg\",\n                                children: \"Enquire about this item\"\n                            }, void 0, false, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 84,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                        lineNumber: 57,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                lineNumber: 38,\n                columnNumber: 7\n            }, this),\n            modalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 z-50 bg-black/80 flex items-center justify-center\",\n                onClick: ()=>setModalOpen(false),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        onClick: (e)=>e.stopPropagation(),\n                        className: \"bg-white rounded shadow-lg p-2 max-w-4xl max-h-[90vh] flex flex-col items-center justify-center\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_zoom_pan_pinch__WEBPACK_IMPORTED_MODULE_3__.TransformWrapper, {\n                            initialScale: 1,\n                            minScale: 1,\n                            maxScale: 5,\n                            wheel: {\n                                step: 0.2\n                            },\n                            doubleClick: {\n                                disabled: false\n                            },\n                            children: (param)=>{\n                                let { zoomIn, zoomOut, resetTransform } = param;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex gap-2 mb-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: (e)=>{\n                                                        e.stopPropagation();\n                                                        zoomIn();\n                                                    },\n                                                    className: \"bg-brass text-espresso rounded px-3 py-1 font-bold text-lg shadow hover:bg-espresso hover:text-ivory transition\",\n                                                    children: \"+\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                    lineNumber: 95,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: (e)=>{\n                                                        e.stopPropagation();\n                                                        zoomOut();\n                                                    },\n                                                    className: \"bg-brass text-espresso rounded px-3 py-1 font-bold text-lg shadow hover:bg-espresso hover:text-ivory transition\",\n                                                    children: \"−\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                    lineNumber: 96,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: (e)=>{\n                                                        e.stopPropagation();\n                                                        resetTransform();\n                                                    },\n                                                    className: \"bg-sand text-espresso rounded px-3 py-1 font-bold text-lg shadow hover:bg-espresso hover:text-ivory transition\",\n                                                    children: \"Reset\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                    lineNumber: 97,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 94,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_zoom_pan_pinch__WEBPACK_IMPORTED_MODULE_3__.TransformComponent, {\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: product.images[mainImgIdx].url,\n                                                alt: product.images[mainImgIdx].alt || product.title,\n                                                className: \"max-w-3xl max-h-[80vh] rounded shadow-lg cursor-move\",\n                                                draggable: false\n                                            }, void 0, false, {\n                                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                                lineNumber: 100,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 99,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true);\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                            lineNumber: 91,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                        lineNumber: 90,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setModalOpen(false),\n                        className: \"absolute top-4 right-4 bg-espresso text-ivory rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold shadow-lg hover:bg-brass hover:text-espresso transition\",\n                        children: \"\\xd7\"\n                    }, void 0, false, {\n                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                        lineNumber: 111,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                lineNumber: 89,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                className: \"mt-16\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"font-heading text-2xl mb-6 text-espresso\",\n                        children: \"Related Products\"\n                    }, void 0, false, {\n                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                        lineNumber: 116,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8\",\n                        children: related.map((prod)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-sand rounded-card shadow-card p-4 flex flex-col items-center transition-transform duration-200 hover:scale-105 hover:shadow-lg\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-full h-32 bg-ivory rounded mb-4 flex items-center justify-center overflow-hidden\",\n                                        children: prod.images && prod.images[0] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: prod.images[0].url,\n                                            alt: prod.images[0].alt || prod.title,\n                                            className: \"object-cover h-full w-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 122,\n                                            columnNumber: 19\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-2xl text-sand\",\n                                            children: \"\\uD83E\\uDE91\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                            lineNumber: 124,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 120,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"font-heading text-lg text-espresso mb-1 text-center\",\n                                        children: prod.title\n                                    }, void 0, false, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 127,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-body text-brass font-bold mb-2\",\n                                        children: [\n                                            \"\\xa3\",\n                                            formatPrice(prod.price)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                        lineNumber: 128,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, prod.id, true, {\n                                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                                lineNumber: 119,\n                                columnNumber: 13\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                        lineNumber: 117,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n                lineNumber: 115,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/nickfiddes/Code/projects/traditio/traditio-next-site/src/app/showroom/[slug]/page.tsx\",\n        lineNumber: 36,\n        columnNumber: 5\n    }, this);\n}\n_s(ProductDetail, \"7rYTHScvylPc2Z562Jh4uWj9VdQ=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useParams\n    ];\n});\n_c = ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvc2hvd3Jvb20vW3NsdWddL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQzRDO0FBQ0E7QUFDNkM7QUFFMUUsU0FBU0s7O0lBQ3RCLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUdKLDBEQUFTQTtJQUMxQixNQUFNLENBQUNLLFNBQVNDLFdBQVcsR0FBR1AsK0NBQVFBLENBQU07SUFDNUMsTUFBTSxDQUFDUSxTQUFTQyxXQUFXLEdBQUdULCtDQUFRQSxDQUFRLEVBQUU7SUFDaEQsTUFBTSxDQUFDVSxTQUFTQyxXQUFXLEdBQUdYLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ1ksWUFBWUMsY0FBYyxHQUFHYiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNjLFdBQVdDLGFBQWEsR0FBR2YsK0NBQVFBLENBQUM7SUFFM0NELGdEQUFTQTttQ0FBQztZQUNSLGVBQWVpQjtnQkFDYixNQUFNQyxNQUFNLE1BQU1DLE1BQU0saUJBQXNCLE9BQUxiO2dCQUN6QyxNQUFNYyxPQUFPLE1BQU1GLElBQUlHLElBQUk7Z0JBQzNCYixXQUFXWSxLQUFLYixPQUFPO2dCQUN2QkcsV0FBV1UsS0FBS1gsT0FBTyxJQUFJLEVBQUU7Z0JBQzdCRyxXQUFXO1lBQ2I7WUFDQUs7UUFDRjtrQ0FBRztRQUFDWDtLQUFLO0lBRVQsU0FBU2dCLFlBQVlDLEtBQXNCO1FBQ3pDLElBQUlBLFVBQVUsUUFBUUEsVUFBVUMsV0FBVyxPQUFPO1FBQ2xELE1BQU1DLE1BQU0sT0FBT0YsVUFBVSxXQUFXQSxRQUFRRyxXQUFXSCxNQUFNSSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxNQUFNO1FBQzFGLElBQUlDLE1BQU1KLE1BQU0sT0FBTztRQUN2QixPQUFPQSxJQUFJSyxjQUFjLENBQUM7SUFDNUI7SUFFQSxJQUFJbkIsU0FBUyxxQkFBTyw4REFBQ29CO1FBQUlDLFdBQVU7a0JBQW9COzs7Ozs7SUFDdkQsSUFBSSxDQUFDekIsU0FBUyxxQkFBTyw4REFBQ3dCO1FBQUlDLFdBQVU7a0JBQW9COzs7Ozs7SUFFeEQscUJBQ0UsOERBQUNDO1FBQUtELFdBQVU7OzBCQUVkLDhEQUFDRTtnQkFBUUYsV0FBVTs7a0NBQ2pCLDhEQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNEO2dDQUFJQyxXQUFVO2dDQUE4SEcsU0FBUyxJQUFNbkIsYUFBYTs7b0NBQ3RLVCxRQUFRNkIsTUFBTSxJQUFJN0IsUUFBUTZCLE1BQU0sQ0FBQ3ZCLFdBQVcsaUJBQzNDLDhEQUFDd0I7d0NBQUlDLEtBQUsvQixRQUFRNkIsTUFBTSxDQUFDdkIsV0FBVyxDQUFDMEIsR0FBRzt3Q0FBRUMsS0FBS2pDLFFBQVE2QixNQUFNLENBQUN2QixXQUFXLENBQUMyQixHQUFHLElBQUlqQyxRQUFRa0MsS0FBSzt3Q0FBRVQsV0FBVTs7Ozs7NkRBRTFHLDhEQUFDVTt3Q0FBS1YsV0FBVTtrREFBeUI7Ozs7OztrREFFM0MsOERBQUNVO3dDQUFLVixXQUFVO2tEQUErSDs7Ozs7Ozs7Ozs7OzBDQUVqSiw4REFBQ0Q7Z0NBQUlDLFdBQVU7MENBQ1p6QixRQUFRNkIsTUFBTSxJQUFJN0IsUUFBUTZCLE1BQU0sQ0FBQ08sR0FBRyxDQUFDLENBQUNOLEtBQVVPLGtCQUMvQyw4REFBQ0M7d0NBQWViLFdBQVcsOEJBQWdGLE9BQWxEbkIsZUFBZStCLElBQUksaUJBQWlCLGVBQWM7d0NBQXNDVCxTQUFTLElBQU1yQixjQUFjOEI7a0RBQzVLLDRFQUFDUDs0Q0FBSUMsS0FBS0QsSUFBSUUsR0FBRzs0Q0FBRUMsS0FBS0gsSUFBSUcsR0FBRyxJQUFJakMsUUFBUWtDLEtBQUs7NENBQUVULFdBQVU7Ozs7Ozt1Q0FEakRZOzs7Ozs7Ozs7Ozs7Ozs7O2tDQU9uQiw4REFBQ2I7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRDtnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNjO3dDQUFHZCxXQUFVO2tEQUFzRnpCLFFBQVFrQyxLQUFLOzs7Ozs7b0NBQ2hIbEMsUUFBUXdDLFFBQVEsa0JBQUksOERBQUNMO3dDQUFLVixXQUFVO2tEQUFzRjs7Ozs7O29DQUMxSHpCLFFBQVF5QyxNQUFNLEtBQUssd0JBQVUsOERBQUNOO3dDQUFLVixXQUFVO2tEQUFxRjs7Ozs7Ozs7Ozs7OzBDQUVySSw4REFBQ2lCO2dDQUFFakIsV0FBVTs7b0NBQStDO29DQUFFVixZQUFZZixRQUFRMkMsS0FBSzs7Ozs7OzswQ0FDdkYsOERBQUNuQjtnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNpQjt3Q0FBRWpCLFdBQVU7a0RBQTBEekIsUUFBUTRDLFdBQVc7Ozs7OztrREFDMUYsOERBQUNDO3dDQUFHcEIsV0FBVTs7NENBQ1h6QixRQUFROEMsVUFBVSxrQkFBSSw4REFBQ0M7O2tFQUFHLDhEQUFDQztrRUFBRTs7Ozs7O29EQUFlO29EQUFFaEQsUUFBUThDLFVBQVU7Ozs7Ozs7NENBQ2hFOUMsUUFBUWlELFNBQVMsa0JBQUksOERBQUNGOztrRUFBRyw4REFBQ0M7a0VBQUU7Ozs7OztvREFBYztvREFBRWhELFFBQVFpRCxTQUFTOzs7Ozs7OzRDQUM3RGpELFFBQVFrRCxNQUFNLGtCQUFJLDhEQUFDSDs7a0VBQUcsOERBQUNDO2tFQUFFOzs7Ozs7b0RBQVc7b0RBQUVoRCxRQUFRa0QsTUFBTTs7Ozs7Ozs0Q0FDcERsRCxRQUFRbUQsTUFBTSxrQkFBSSw4REFBQ0o7O2tFQUFHLDhEQUFDQztrRUFBRTs7Ozs7O29EQUFXO29EQUFFaEQsUUFBUW1ELE1BQU07Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MENBSXpELDhEQUFDQztnQ0FBUTNCLFdBQVU7O2tEQUNqQiw4REFBQzRCO3dDQUFRNUIsV0FBVTtrREFBeUM7Ozs7OztrREFDNUQsOERBQUNEO3dDQUFJQyxXQUFVO2tEQUF5Qjs7Ozs7Ozs7Ozs7OzBDQUcxQyw4REFBQ0Q7Z0NBQUlDLFdBQVU7O2tEQUNiLDhEQUFDNkI7d0NBQUVDLE1BQUs7d0NBQUlDLGNBQVc7d0NBQW9CL0IsV0FBVTtrREFBbUIsNEVBQUNnQzs0Q0FBSUMsT0FBTTs0Q0FBS0MsUUFBTzs0Q0FBS0MsTUFBSztzREFBZSw0RUFBQ0M7Z0RBQUtDLEdBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7a0RBQ2hJLDhEQUFDUjt3Q0FBRUMsTUFBSzt3Q0FBSUMsY0FBVzt3Q0FBbUIvQixXQUFVO2tEQUFtQiw0RUFBQ2dDOzRDQUFJQyxPQUFNOzRDQUFLQyxRQUFPOzRDQUFLQyxNQUFLO3NEQUFlLDRFQUFDQztnREFBS0MsR0FBRTs7Ozs7Ozs7Ozs7Ozs7OztrREFDL0gsOERBQUNSO3dDQUFFQyxNQUFLO3dDQUFJQyxjQUFXO3dDQUFxQi9CLFdBQVU7a0RBQW1CLDRFQUFDZ0M7NENBQUlDLE9BQU07NENBQUtDLFFBQU87NENBQUtDLE1BQUs7c0RBQWUsNEVBQUNDO2dEQUFLQyxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBDQUVuSSw4REFBQ3hCO2dDQUFPYixXQUFVOzBDQUErSjs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBSXBMakIsMkJBQ0MsOERBQUNnQjtnQkFBSUMsV0FBVTtnQkFBa0VHLFNBQVMsSUFBTW5CLGFBQWE7O2tDQUMzRyw4REFBQ2U7d0JBQUlJLFNBQVNtQyxDQUFBQSxJQUFLQSxFQUFFQyxlQUFlO3dCQUFJdkMsV0FBVTtrQ0FDaEQsNEVBQUM3QixrRUFBZ0JBOzRCQUFDcUUsY0FBYzs0QkFBR0MsVUFBVTs0QkFBR0MsVUFBVTs0QkFBR0MsT0FBTztnQ0FBRUMsTUFBTTs0QkFBSTs0QkFBR0MsYUFBYTtnQ0FBRUMsVUFBVTs0QkFBTTtzQ0FDL0c7b0NBQUMsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLGNBQWMsRUFBRTtxREFDbkM7O3NEQUNFLDhEQUFDbEQ7NENBQUlDLFdBQVU7OzhEQUNiLDhEQUFDYTtvREFBT1YsU0FBU21DLENBQUFBO3dEQUFPQSxFQUFFQyxlQUFlO3dEQUFJUTtvREFBVTtvREFBRy9DLFdBQVU7OERBQWtIOzs7Ozs7OERBQ3RMLDhEQUFDYTtvREFBT1YsU0FBU21DLENBQUFBO3dEQUFPQSxFQUFFQyxlQUFlO3dEQUFJUztvREFBVztvREFBR2hELFdBQVU7OERBQWtIOzs7Ozs7OERBQ3ZMLDhEQUFDYTtvREFBT1YsU0FBU21DLENBQUFBO3dEQUFPQSxFQUFFQyxlQUFlO3dEQUFJVTtvREFBa0I7b0RBQUdqRCxXQUFVOzhEQUFpSDs7Ozs7Ozs7Ozs7O3NEQUUvTCw4REFBQzVCLG9FQUFrQkE7c0RBQ2pCLDRFQUFDaUM7Z0RBQ0NDLEtBQUsvQixRQUFRNkIsTUFBTSxDQUFDdkIsV0FBVyxDQUFDMEIsR0FBRztnREFDbkNDLEtBQUtqQyxRQUFRNkIsTUFBTSxDQUFDdkIsV0FBVyxDQUFDMkIsR0FBRyxJQUFJakMsUUFBUWtDLEtBQUs7Z0RBQ3BEVCxXQUFVO2dEQUNWa0QsV0FBVzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQU92Qiw4REFBQ3JDO3dCQUFPVixTQUFTLElBQU1uQixhQUFhO3dCQUFRZ0IsV0FBVTtrQ0FBbUw7Ozs7Ozs7Ozs7OzswQkFJN08sOERBQUNFO2dCQUFRRixXQUFVOztrQ0FDakIsOERBQUNtRDt3QkFBR25ELFdBQVU7a0NBQTJDOzs7Ozs7a0NBQ3pELDhEQUFDRDt3QkFBSUMsV0FBVTtrQ0FDWnZCLFFBQVFrQyxHQUFHLENBQUMsQ0FBQ3lDLHFCQUNaLDhEQUFDckQ7Z0NBQWtCQyxXQUFVOztrREFDM0IsOERBQUNEO3dDQUFJQyxXQUFVO2tEQUNab0QsS0FBS2hELE1BQU0sSUFBSWdELEtBQUtoRCxNQUFNLENBQUMsRUFBRSxpQkFDNUIsOERBQUNDOzRDQUFJQyxLQUFLOEMsS0FBS2hELE1BQU0sQ0FBQyxFQUFFLENBQUNHLEdBQUc7NENBQUVDLEtBQUs0QyxLQUFLaEQsTUFBTSxDQUFDLEVBQUUsQ0FBQ0ksR0FBRyxJQUFJNEMsS0FBSzNDLEtBQUs7NENBQUVULFdBQVU7Ozs7O2lFQUUvRSw4REFBQ1U7NENBQUtWLFdBQVU7c0RBQXFCOzs7Ozs7Ozs7OztrREFHekMsOERBQUNxRDt3Q0FBR3JELFdBQVU7a0RBQXVEb0QsS0FBSzNDLEtBQUs7Ozs7OztrREFDL0UsOERBQUNRO3dDQUFFakIsV0FBVTs7NENBQXNDOzRDQUFFVixZQUFZOEQsS0FBS2xDLEtBQUs7Ozs7Ozs7OytCQVRuRWtDLEtBQUtFLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQjdCO0dBakl3QmpGOztRQUNMSCxzREFBU0E7OztLQURKRyIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2tmaWRkZXMvQ29kZS9wcm9qZWN0cy90cmFkaXRpby90cmFkaXRpby1uZXh0LXNpdGUvc3JjL2FwcC9zaG93cm9vbS9bc2x1Z10vcGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBhcmFtcyB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgeyBUcmFuc2Zvcm1XcmFwcGVyLCBUcmFuc2Zvcm1Db21wb25lbnQsIHVzZUNvbnRyb2xzIH0gZnJvbSAncmVhY3Qtem9vbS1wYW4tcGluY2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9kdWN0RGV0YWlsKCkge1xuICBjb25zdCB7IHNsdWcgfSA9IHVzZVBhcmFtcygpO1xuICBjb25zdCBbcHJvZHVjdCwgc2V0UHJvZHVjdF0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xuICBjb25zdCBbcmVsYXRlZCwgc2V0UmVsYXRlZF0gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW21haW5JbWdJZHgsIHNldE1haW5JbWdJZHhdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFttb2RhbE9wZW4sIHNldE1vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBhc3luYyBmdW5jdGlvbiBmZXRjaFByb2R1Y3QoKSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9wcm9kdWN0cy8ke3NsdWd9YCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHNldFByb2R1Y3QoZGF0YS5wcm9kdWN0KTtcbiAgICAgIHNldFJlbGF0ZWQoZGF0YS5yZWxhdGVkIHx8IFtdKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgICBmZXRjaFByb2R1Y3QoKTtcbiAgfSwgW3NsdWddKTtcblxuICBmdW5jdGlvbiBmb3JtYXRQcmljZSh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBjb25zdCBudW0gPSB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInID8gdmFsdWUgOiBwYXJzZUZsb2F0KHZhbHVlLnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAnJykpO1xuICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIG51bS50b0xvY2FsZVN0cmluZygnZW4tR0InKTtcbiAgfVxuXG4gIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBweS0xNlwiPkxvYWRpbmcuLi48L2Rpdj47XG4gIGlmICghcHJvZHVjdCkgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktMTZcIj5Qcm9kdWN0IG5vdCBmb3VuZC48L2Rpdj47XG5cbiAgcmV0dXJuIChcbiAgICA8bWFpbiBjbGFzc05hbWU9XCJtYXgtdy01eGwgbXgtYXV0byBweS0xMiBweC00IG1kOnB4LTBcIj5cbiAgICAgIHsvKiBJbWFnZSBHYWxsZXJ5ICovfVxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtZDpmbGV4LXJvdyBnYXAtMTAgbWItMTBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBhc3BlY3Qtc3F1YXJlIGJnLXNhbmQgcm91bmRlZC1sZyBtYi00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlbiBjdXJzb3Item9vbS1pbiByZWxhdGl2ZSBncm91cFwiIG9uQ2xpY2s9eygpID0+IHNldE1vZGFsT3Blbih0cnVlKX0+XG4gICAgICAgICAgICB7cHJvZHVjdC5pbWFnZXMgJiYgcHJvZHVjdC5pbWFnZXNbbWFpbkltZ0lkeF0gPyAoXG4gICAgICAgICAgICAgIDxpbWcgc3JjPXtwcm9kdWN0LmltYWdlc1ttYWluSW1nSWR4XS51cmx9IGFsdD17cHJvZHVjdC5pbWFnZXNbbWFpbkltZ0lkeF0uYWx0IHx8IHByb2R1Y3QudGl0bGV9IGNsYXNzTmFtZT1cIm9iamVjdC1jb3ZlciB3LWZ1bGwgaC1mdWxsIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTIwMCBncm91cC1ob3ZlcjpzY2FsZS0xMDVcIiAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC02eGwgdGV4dC1lc3ByZXNzb1wiPvCfqpE8L3NwYW4+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTIgcmlnaHQtMiBiZy1lc3ByZXNzby84MCB0ZXh0LWl2b3J5IHRleHQteHMgcHgtMiBweS0wLjUgcm91bmRlZCBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvblwiPkNsaWNrIHRvIGVubGFyZ2U8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yIGp1c3RpZnktY2VudGVyIG10LTJcIj5cbiAgICAgICAgICAgIHtwcm9kdWN0LmltYWdlcyAmJiBwcm9kdWN0LmltYWdlcy5tYXAoKGltZzogYW55LCBpOiBudW1iZXIpID0+IChcbiAgICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e2l9IGNsYXNzTmFtZT17YHctMTYgaC0xNiByb3VuZGVkIGJvcmRlci0yICR7bWFpbkltZ0lkeCA9PT0gaSA/ICdib3JkZXItYnJhc3MnIDogJ2JvcmRlci1zYW5kJ30gb3ZlcmZsb3ctaGlkZGVuIGZvY3VzOm91dGxpbmUtbm9uZWB9IG9uQ2xpY2s9eygpID0+IHNldE1haW5JbWdJZHgoaSl9PlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtpbWcudXJsfSBhbHQ9e2ltZy5hbHQgfHwgcHJvZHVjdC50aXRsZX0gY2xhc3NOYW1lPVwib2JqZWN0LWNvdmVyIHctZnVsbCBoLWZ1bGxcIiAvPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgey8qIFByb2R1Y3QgSW5mbyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgbWItMlwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtaGVhZGluZyB0ZXh0LTN4bCBtZDp0ZXh0LTR4bCBmb250LWJvbGQgdXBwZXJjYXNlIHRleHQtZXNwcmVzc28gdHJhY2tpbmctdGlnaHRcIj57cHJvZHVjdC50aXRsZX08L2gxPlxuICAgICAgICAgICAge3Byb2R1Y3QuZmVhdHVyZWQgJiYgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrIGJnLWJyYXNzIHRleHQtZXNwcmVzc28gdGV4dC14cyByb3VuZGVkIHB4LTIgcHktMC41IHVwcGVyY2FzZSBmb250LWJvbGRcIj5GZWF0dXJlZDwvc3Bhbj59XG4gICAgICAgICAgICB7cHJvZHVjdC5zdGF0dXMgPT09ICdzb2xkJyAmJiA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgYmctcmVkLTQwMCB0ZXh0LXdoaXRlIHRleHQteHMgcm91bmRlZCBweC0yIHB5LTAuNSB1cHBlcmNhc2UgZm9udC1ib2xkXCI+U09MRDwvc3Bhbj59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1ib2R5IHRleHQtMnhsIHRleHQtYnJhc3MgZm9udC1ib2xkIG1iLTRcIj7Co3tmb3JtYXRQcmljZShwcm9kdWN0LnByaWNlKX08L3A+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LWJvZHkgdGV4dC1iYXNlIHRleHQtc2FuZCBtYi0yIHdoaXRlc3BhY2UtcHJlLWxpbmVcIj57cHJvZHVjdC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXNhbmQgc3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgIHtwcm9kdWN0LmRpbWVuc2lvbnMgJiYgPGxpPjxiPkRpbWVuc2lvbnM6PC9iPiB7cHJvZHVjdC5kaW1lbnNpb25zfTwvbGk+fVxuICAgICAgICAgICAgICB7cHJvZHVjdC5jb25kaXRpb24gJiYgPGxpPjxiPkNvbmRpdGlvbjo8L2I+IHtwcm9kdWN0LmNvbmRpdGlvbn08L2xpPn1cbiAgICAgICAgICAgICAge3Byb2R1Y3Qub3JpZ2luICYmIDxsaT48Yj5PcmlnaW46PC9iPiB7cHJvZHVjdC5vcmlnaW59PC9saT59XG4gICAgICAgICAgICAgIHtwcm9kdWN0LnBlcmlvZCAmJiA8bGk+PGI+UGVyaW9kOjwvYj4ge3Byb2R1Y3QucGVyaW9kfTwvbGk+fVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogRGVsaXZlcnkgSW5mbyAqL31cbiAgICAgICAgICA8ZGV0YWlscyBjbGFzc05hbWU9XCJtYi00IGJnLWl2b3J5LzYwIHJvdW5kZWQgcC0zXCI+XG4gICAgICAgICAgICA8c3VtbWFyeSBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBmb250LWJvbGQgdGV4dC1lc3ByZXNzb1wiPkRlbGl2ZXJ5IEluZm9ybWF0aW9uPC9zdW1tYXJ5PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQtc2FuZCB0ZXh0LXNtXCI+RGVsaXZlcnkgZGV0YWlscyBhbmQgb3B0aW9ucyB3aWxsIGJlIHNob3duIGhlcmUuPC9kaXY+XG4gICAgICAgICAgPC9kZXRhaWxzPlxuICAgICAgICAgIHsvKiBTb2NpYWwgU2hhcmUgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC00IG1iLTZcIj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgYXJpYS1sYWJlbD1cIlNoYXJlIG9uIEZhY2Vib29rXCIgY2xhc3NOYW1lPVwiaG92ZXI6dGV4dC1icmFzc1wiPjxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPjxwYXRoIGQ9XCJNMjIgMTJjMC01LjUyMi00LjQ3Ny0xMC0xMC0xMFMyIDYuNDc4IDIgMTJjMCA1IDMuNjU3IDkuMTI3IDguNDM4IDkuODc3di02Ljk4N2gtMi41NHYtMi44OWgyLjU0VjkuNzk3YzAtMi41MDYgMS40OTItMy44OSAzLjc3Ny0zLjg5IDEuMDk0IDAgMi4yMzguMTk1IDIuMjM4LjE5NXYyLjQ2aC0xLjI2Yy0xLjI0MiAwLTEuNjMyLjc3MS0xLjYzMiAxLjU2MnYxLjg3NWgyLjc3M2wtLjQ0MyAyLjg5aC0yLjMzdjYuOTg3QzE4LjM0MyAyMS4xMjcgMjIgMTcgMjIgMTJcIi8+PC9zdmc+PC9hPlxuICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBhcmlhLWxhYmVsPVwiU2hhcmUgb24gVHdpdHRlclwiIGNsYXNzTmFtZT1cImhvdmVyOnRleHQtYnJhc3NcIj48c3ZnIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48cGF0aCBkPVwiTTIyLjQ2IDUuOTI0Yy0uNzkzLjM1Mi0xLjY0NS41OS0yLjU0LjY5OGE0LjQ4IDQuNDggMCAwIDAgMS45NjMtMi40NzUgOC45NCA4Ljk0IDAgMCAxLTIuODI4IDEuMDgyQTQuNDggNC40OCAwIDAgMCAxNi4xMSA0Yy0yLjQ4NSAwLTQuNSAyLjAxNS00LjUgNC41IDAgLjM1My4wNC42OTcuMTE2IDEuMDI2QzcuNzI4IDkuMzcgNC4xIDcuNTc1IDEuNjcgNC45MDVjLS4zODcuNjY0LS42MSAxLjQzNy0uNjEgMi4yNiAwIDEuNTYuNzk0IDIuOTM2IDIuMDAzIDMuNzQ0LS43MzctLjAyMy0xLjQzLS4yMjYtMi4wMzctLjU2M3YuMDU3YzAgMi4xOCAxLjU1IDQuMDAyIDMuNjA0IDQuNDE3LS4zNzcuMTAzLS43NzUuMTU4LTEuMTg1LjE1OC0uMjkgMC0uNTY4LS4wMjgtLjg0LS4wOC41NjggMS43NzIgMi4yMTcgMy4wNjIgNC4xNzUgMy4wOTZBOC45OCA4Ljk4IDAgMCAxIDIgMTkuNTRhMTIuNjggMTIuNjggMCAwIDAgNi44OCAyLjAxN2M4LjI1MyAwIDEyLjc3LTYuODMzIDEyLjc3LTEyLjc2IDAtLjE5NS0uMDA0LS4zOS0uMDEzLS41ODNBOS4xNCA5LjE0IDAgMCAwIDI0IDQuNTlhOC45NCA4Ljk0IDAgMCAxLTIuNTQuNjk3elwiLz48L3N2Zz48L2E+XG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIGFyaWEtbGFiZWw9XCJTaGFyZSBvbiBQaW50ZXJlc3RcIiBjbGFzc05hbWU9XCJob3Zlcjp0ZXh0LWJyYXNzXCI+PHN2ZyB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+PHBhdGggZD1cIk0xMiAyQzYuNDc3IDIgMiA2LjQ3NyAyIDEyYzAgNC4wODQgMi40MzggNy41NjMgNS45MzggOC45MzgtLjA4Mi0uNzYtLjE1Ni0xLjkyNi4wMzMtMi43NTUuMTctLjczIDEuMDktNC42NDYgMS4wOS00LjY0NnMtLjI3Ny0uNTU1LS4yNzctMS4zNzVjMC0xLjI5Ljc0OC0yLjI1NCAxLjY4LTIuMjU0Ljc5MyAwIDEuMTc2LjU5NiAxLjE3NiAxLjMxMiAwIC44LS41MSAxLjk5NS0uNzczIDMuMTA2LS4yMi45My40NjggMS42ODggMS4zOSAxLjY4OCAxLjY2OCAwIDIuOTUzLTEuNzYgMi45NTMtNC4yOTcgMC0yLjI1LTEuNjItMy44MjUtMy45MzYtMy44MjUtMi42ODQgMC00LjI2IDIuMDEyLTQuMjYgNC4wOSAwIC44MS4zMTIgMS42OC43MDIgMi4xNS4wNzguMDk0LjA5LjE3Ni4wNjYuMjctLjA3Mi4yOTMtLjIzLjkzLS4yNiAxLjA2LS4wNC4xNy0uMTMuMjA3LS4zLjEyNS0xLjEyLS41Mi0xLjgyLTIuMTUtMS44Mi0zLjQ2MyAwLTIuODIgMi4wNS02LjA2IDYuMTEtNi4wNiAzLjIxIDAgNS43IDIuMjkgNS43IDUuMzUgMCAzLjE4LTEuOTkgNS43NC00Ljc2IDUuNzQtMS4wMSAwLTEuOTYtLjUzLTIuMjgtMS4xNGwtLjYyIDIuMzZjLS4xOC43LS42NyAxLjU4LTEgMi4xMi43NS4yMyAxLjU0LjM2IDIuMzcuMzYgNS41MjMgMCAxMC00LjQ3NyAxMC0xMFMxNy41MjMgMiAxMiAyelwiLz48L3N2Zz48L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJiZy1icmFzcyB0ZXh0LWVzcHJlc3NvIGZvbnQtYm9sZCByb3VuZGVkIHB4LTggcHktMyBib3JkZXItMiBib3JkZXItYnJhc3Mgc2hhZG93LWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCBob3ZlcjpiZy1lc3ByZXNzbyBob3Zlcjp0ZXh0LWl2b3J5IHRleHQtbGdcIj5FbnF1aXJlIGFib3V0IHRoaXMgaXRlbTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICAgIHsvKiBNb2RhbCBmb3IgaW1hZ2Ugem9vbSAqL31cbiAgICAgIHttb2RhbE9wZW4gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei01MCBiZy1ibGFjay84MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiIG9uQ2xpY2s9eygpID0+IHNldE1vZGFsT3BlbihmYWxzZSl9PlxuICAgICAgICAgIDxkaXYgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfSBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkIHNoYWRvdy1sZyBwLTIgbWF4LXctNHhsIG1heC1oLVs5MHZoXSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgPFRyYW5zZm9ybVdyYXBwZXIgaW5pdGlhbFNjYWxlPXsxfSBtaW5TY2FsZT17MX0gbWF4U2NhbGU9ezV9IHdoZWVsPXt7IHN0ZXA6IDAuMiB9fSBkb3VibGVDbGljaz17eyBkaXNhYmxlZDogZmFsc2UgfX0+XG4gICAgICAgICAgICAgIHsoeyB6b29tSW4sIHpvb21PdXQsIHJlc2V0VHJhbnNmb3JtIH0pID0+IChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtlID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgem9vbUluKCk7IH19IGNsYXNzTmFtZT1cImJnLWJyYXNzIHRleHQtZXNwcmVzc28gcm91bmRlZCBweC0zIHB5LTEgZm9udC1ib2xkIHRleHQtbGcgc2hhZG93IGhvdmVyOmJnLWVzcHJlc3NvIGhvdmVyOnRleHQtaXZvcnkgdHJhbnNpdGlvblwiPis8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtlID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgem9vbU91dCgpOyB9fSBjbGFzc05hbWU9XCJiZy1icmFzcyB0ZXh0LWVzcHJlc3NvIHJvdW5kZWQgcHgtMyBweS0xIGZvbnQtYm9sZCB0ZXh0LWxnIHNoYWRvdyBob3ZlcjpiZy1lc3ByZXNzbyBob3Zlcjp0ZXh0LWl2b3J5IHRyYW5zaXRpb25cIj7iiJI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtlID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgcmVzZXRUcmFuc2Zvcm0oKTsgfX0gY2xhc3NOYW1lPVwiYmctc2FuZCB0ZXh0LWVzcHJlc3NvIHJvdW5kZWQgcHgtMyBweS0xIGZvbnQtYm9sZCB0ZXh0LWxnIHNoYWRvdyBob3ZlcjpiZy1lc3ByZXNzbyBob3Zlcjp0ZXh0LWl2b3J5IHRyYW5zaXRpb25cIj5SZXNldDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8VHJhbnNmb3JtQ29tcG9uZW50PlxuICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgc3JjPXtwcm9kdWN0LmltYWdlc1ttYWluSW1nSWR4XS51cmx9XG4gICAgICAgICAgICAgICAgICAgICAgYWx0PXtwcm9kdWN0LmltYWdlc1ttYWluSW1nSWR4XS5hbHQgfHwgcHJvZHVjdC50aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtYXgtdy0zeGwgbWF4LWgtWzgwdmhdIHJvdW5kZWQgc2hhZG93LWxnIGN1cnNvci1tb3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9UcmFuc2Zvcm1Db21wb25lbnQ+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L1RyYW5zZm9ybVdyYXBwZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbE9wZW4oZmFsc2UpfSBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IGJnLWVzcHJlc3NvIHRleHQtaXZvcnkgcm91bmRlZC1mdWxsIHctMTAgaC0xMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LTJ4bCBmb250LWJvbGQgc2hhZG93LWxnIGhvdmVyOmJnLWJyYXNzIGhvdmVyOnRleHQtZXNwcmVzc28gdHJhbnNpdGlvblwiPiZ0aW1lczs8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgey8qIFJlbGF0ZWQgUHJvZHVjdHMgKi99XG4gICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJtdC0xNlwiPlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZm9udC1oZWFkaW5nIHRleHQtMnhsIG1iLTYgdGV4dC1lc3ByZXNzb1wiPlJlbGF0ZWQgUHJvZHVjdHM8L2gyPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTIgbWQ6Z3JpZC1jb2xzLTMgZ2FwLThcIj5cbiAgICAgICAgICB7cmVsYXRlZC5tYXAoKHByb2Q6IGFueSkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e3Byb2QuaWR9IGNsYXNzTmFtZT1cImJnLXNhbmQgcm91bmRlZC1jYXJkIHNoYWRvdy1jYXJkIHAtNCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0yMDAgaG92ZXI6c2NhbGUtMTA1IGhvdmVyOnNoYWRvdy1sZ1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLTMyIGJnLWl2b3J5IHJvdW5kZWQgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICB7cHJvZC5pbWFnZXMgJiYgcHJvZC5pbWFnZXNbMF0gPyAoXG4gICAgICAgICAgICAgICAgICA8aW1nIHNyYz17cHJvZC5pbWFnZXNbMF0udXJsfSBhbHQ9e3Byb2QuaW1hZ2VzWzBdLmFsdCB8fCBwcm9kLnRpdGxlfSBjbGFzc05hbWU9XCJvYmplY3QtY292ZXIgaC1mdWxsIHctZnVsbFwiIC8+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhsIHRleHQtc2FuZFwiPvCfqpE8L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LWhlYWRpbmcgdGV4dC1sZyB0ZXh0LWVzcHJlc3NvIG1iLTEgdGV4dC1jZW50ZXJcIj57cHJvZC50aXRsZX08L2gzPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LWJvZHkgdGV4dC1icmFzcyBmb250LWJvbGQgbWItMlwiPsKje2Zvcm1hdFByaWNlKHByb2QucHJpY2UpfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICA8L21haW4+XG4gICk7XG59ICJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVBhcmFtcyIsIlRyYW5zZm9ybVdyYXBwZXIiLCJUcmFuc2Zvcm1Db21wb25lbnQiLCJQcm9kdWN0RGV0YWlsIiwic2x1ZyIsInByb2R1Y3QiLCJzZXRQcm9kdWN0IiwicmVsYXRlZCIsInNldFJlbGF0ZWQiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsIm1haW5JbWdJZHgiLCJzZXRNYWluSW1nSWR4IiwibW9kYWxPcGVuIiwic2V0TW9kYWxPcGVuIiwiZmV0Y2hQcm9kdWN0IiwicmVzIiwiZmV0Y2giLCJkYXRhIiwianNvbiIsImZvcm1hdFByaWNlIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJudW0iLCJwYXJzZUZsb2F0IiwidG9TdHJpbmciLCJyZXBsYWNlIiwiaXNOYU4iLCJ0b0xvY2FsZVN0cmluZyIsImRpdiIsImNsYXNzTmFtZSIsIm1haW4iLCJzZWN0aW9uIiwib25DbGljayIsImltYWdlcyIsImltZyIsInNyYyIsInVybCIsImFsdCIsInRpdGxlIiwic3BhbiIsIm1hcCIsImkiLCJidXR0b24iLCJoMSIsImZlYXR1cmVkIiwic3RhdHVzIiwicCIsInByaWNlIiwiZGVzY3JpcHRpb24iLCJ1bCIsImRpbWVuc2lvbnMiLCJsaSIsImIiLCJjb25kaXRpb24iLCJvcmlnaW4iLCJwZXJpb2QiLCJkZXRhaWxzIiwic3VtbWFyeSIsImEiLCJocmVmIiwiYXJpYS1sYWJlbCIsInN2ZyIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbCIsInBhdGgiLCJkIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImluaXRpYWxTY2FsZSIsIm1pblNjYWxlIiwibWF4U2NhbGUiLCJ3aGVlbCIsInN0ZXAiLCJkb3VibGVDbGljayIsImRpc2FibGVkIiwiem9vbUluIiwiem9vbU91dCIsInJlc2V0VHJhbnNmb3JtIiwiZHJhZ2dhYmxlIiwiaDIiLCJwcm9kIiwiaDMiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/showroom/[slug]/page.tsx\n"));

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["main-app"], () => (__webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fnickfiddes%2FCode%2Fprojects%2Ftraditio%2Ftraditio-next-site%2Fsrc%2Fapp%2Fshowroom%2F%5Bslug%5D%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);